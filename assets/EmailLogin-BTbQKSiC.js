import{n as e,t}from"./css-CwcC6xyC.js";import{t as n}from"./input-CR6PP8Vp.js";import{M as r,t as i}from"./button-OiLMmw4m.js";import{Dn as a,En as o,Nn as s,Vn as c,Yn as l,dn as u,fn as d,kn as f,n as p,pn as m,qn as h,r as g,sn as _,t as v,tr as y}from"./index-O7hvt5-X.js";import{t as b}from"./VerifyCodeInput-Cz9DMCIY.js";import{t as x}from"./menuData-C2wv7NG_.js";var S=g(m({__name:`EmailLogin`,setup(m){let g=h({email:``,captcha:``}),S=l(!1),C=l(),w=p(),T=async()=>new Promise((e,t)=>{C.value?.validateField(`email`,(n,r)=>{n?setTimeout(e,1e3):t(r.email[0].message)})}),E=()=>{C.value&&C.value.validate(e=>{e&&(console.log(`loginForm`,g),S.value=!0,setTimeout(()=>{w.setupRouters(x),w.initRouter(),w.setupUser({username:`admin`,nickname:`云逸-e`}),S.value=!1,v.replace({name:`Dashboard`})},500))})};o(()=>{window.addEventListener(`keydown`,e=>{e.key===`Enter`&&E()})}),a(()=>{window.removeEventListener(`keydown`,e=>{e.key===`Enter`&&E()})});let D=h({email:[{required:!0,message:`请输入电子邮箱`,trigger:`blur`}],captcha:[{required:!0,message:`请输入验证`,trigger:`blur`}]});return(a,o)=>{let l=s(`Icon`),p=r,m=n,h=e,v=i,x=t;return f(),_(x,{ref_key:`loginFormRef`,ref:C,model:g,rules:D,"label-width":`auto`,class:`login-form`},{default:c(()=>[d(h,{prop:`email`,class:`animate__animated animate__fadeInUp`,style:{animationDelay:`0.1s`}},{default:c(()=>[d(m,{clearable:``,size:`large`,modelValue:g.email,"onUpdate:modelValue":o[0]||=e=>g.email=e,type:`text`,autocomplete:`off`,placeholder:`请输入电子邮箱`},{prefix:c(()=>[d(p,{class:`el-input__icon`},{default:c(()=>[d(l,{icon:`simple-icons:protonmail`})]),_:1})]),_:1},8,[`modelValue`])]),_:1}),d(h,{prop:`captcha`,class:`animate__animated animate__fadeInUp`,style:{animationDelay:`0.15s`}},{default:c(()=>[d(y(b),{modelValue:g.captcha,"onUpdate:modelValue":o[1]||=e=>g.captcha=e,placeholder:`请输入验证码`,buttonText:`获取验证码`,countdownSeconds:60,size:`large`,"request-fn":T},null,8,[`modelValue`])]),_:1}),d(h,{class:`mt-8 animate__animated animate__fadeInUp`,style:{animationDelay:`0.2s`}},{default:c(()=>[d(v,{size:`large`,type:`primary`,class:`login-button`,onClick:E,loading:S.value},{default:c(()=>[...o[2]||=[u(`登录`,-1)]]),_:1},8,[`loading`])]),_:1})]),_:1},8,[`model`,`rules`])}}}),[[`__scopeId`,`data-v-bc26b23b`]]);export{S as t};