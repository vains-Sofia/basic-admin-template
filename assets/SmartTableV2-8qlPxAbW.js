import{i as e,r as t}from"./css-Ci08GAK1.js";import{l as n}from"./aria-CIJ92hv4.js";import{t as r,v as i}from"./tooltip-CjK7pdb5.js";import{a}from"./input-CR6PP8Vp.js";import{A as o,M as s,_ as c,k as l,t as u}from"./button-OiLMmw4m.js";import{i as d,o as f,s as p}from"./click-outside-Dh2MD5H_.js";import{n as m,t as h}from"./checkbox-B0Jz7qmo.js";import{t as g}from"./empty-N4eeuzif.js";import{i as _,n as v,r as y,t as b}from"./Common-Dc9P-yY4.js";import{$t as x,A as S,An as C,C as w,En as T,Fn as E,H as D,Hn as O,Ht as k,Mn as A,O as ee,On as j,P as te,Pn as ne,Qn as re,S as M,Sn as N,Vn as P,Vt as F,W as ie,Xn as ae,Yn as I,an as L,bn as R,ct as oe,dn as se,fn as z,ft as B,gn as V,ir as H,kn as ce,ln as le,mn as ue,mr as U,o as de,on as W,or as fe,pn as G,qn as pe,rr as me,sr as he,tn as ge,tr as K,u as q,ur as _e,vn as ve,wn as ye,x as J,xn as Y,yn as X,zn as Z}from"./index-O7hvt5-X.js";var be=Number.isNaN||function(e){return typeof e==`number`&&e!==e};function xe(e,t){return!!(e===t||be(e)&&be(t))}function Se(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!xe(e[n],t[n]))return!1;return!0}function Ce(e,t){t===void 0&&(t=Se);var n=null;function r(){var r=[...arguments];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return r.clear=function(){n=null},r}var we=()=>{let e=ue().proxy.$props;return L(()=>{let t=(e,t,n)=>({});return e.perfMode?B(t):Ce(t)})},Te=`itemRendered`,Ee=`scroll`,De=`forward`,Oe=`backward`,ke=`auto`,Ae=`start`,je=`center`,Me=`horizontal`,Ne=`vertical`,Pe=`negative`,Fe=`positive-ascending`,Ie=`positive-descending`,Le={[Me]:`left`,[Ne]:`top`},Re=J({type:w([Number,Function]),required:!0}),ze=J({type:Number}),Be=J({type:Number,default:2}),Ve=J({type:String,values:[`ltr`,`rtl`],default:`ltr`}),He=J({type:Number,default:0}),Ue=J({type:Number,required:!0}),We=J({type:String,values:[`horizontal`,`vertical`],default:Ne}),Ge=M({className:{type:String,default:``},containerElement:{type:w([String,Object]),default:`div`},data:{type:w(Array),default:()=>a([])},direction:Ve,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:`div`},style:{type:w([Object,String,Array])},useIsScrolling:Boolean,width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:Boolean}),Ke=M({cache:Be,estimatedItemSize:ze,layout:We,initScrollOffset:He,total:Ue,itemSize:Re,...Ge}),qe={type:Number,default:6},Je={type:Number,default:0},Ye={type:Number,default:2},Xe=M({columnCache:Be,columnWidth:Re,estimatedColumnWidth:ze,estimatedRowHeight:ze,initScrollLeft:He,initScrollTop:He,itemKey:{type:w(Function),default:({columnIndex:e,rowIndex:t})=>`${t}:${e}`},rowCache:Be,rowHeight:Re,totalColumn:Ue,totalRow:Ue,hScrollbarSize:qe,vScrollbarSize:qe,scrollbarStartGap:Je,scrollbarEndGap:Ye,role:String,...Ge}),Ze=M({alwaysOn:Boolean,class:String,layout:We,total:Ue,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:qe,startGap:Je,endGap:Ye,visible:Boolean}),Qe=(e,t)=>e<t?De:Oe,$e=e=>e===`rtl`,et=null;function tt(e=!1){if(et===null||e){let e=document.createElement(`div`),t=e.style;t.width=`50px`,t.height=`50px`,t.overflow=`scroll`,t.direction=`rtl`;let n=document.createElement(`div`),r=n.style;return r.width=`100px`,r.height=`100px`,e.appendChild(n),document.body.appendChild(e),e.scrollLeft>0?et=Ie:(e.scrollLeft=1,et=e.scrollLeft===0?Pe:Fe),document.body.removeChild(e),et}return et}function nt({move:e,size:t,bar:n},r){let i={},a=`translate${n.axis}(${e}px)`;return i[n.size]=t,i.transform=a,r===`horizontal`?i.height=`100%`:i.width=`100%`,i}var rt=G({name:`ElVirtualScrollBar`,props:Ze,emits:[`scroll`,`start-move`,`stop-move`],setup(e,{emit:t}){let n=L(()=>e.startGap+e.endGap),r=F(`virtual-scrollbar`),a=F(`scrollbar`),o=I(),s=I(),c=null,l=null,u=pe({isDragging:!1,traveled:0}),d=L(()=>i[e.layout]),m=L(()=>e.clientSize-K(n)),h=L(()=>({position:`absolute`,width:`${e.layout===`horizontal`?m.value:e.scrollbarSize}px`,height:`${e.layout===`horizontal`?e.scrollbarSize:m.value}px`,[Le[e.layout]]:`2px`,right:`2px`,bottom:`2px`,borderRadius:`4px`})),g=L(()=>{let t=e.ratio;if(t>=100)return 1/0;if(t>=50)return t*m.value/100;let n=m.value/3;return Math.floor(Math.min(Math.max(t*m.value/100,20),n))}),_=L(()=>{if(!Number.isFinite(g.value))return{display:`none`};let t=`${g.value}px`;return nt({bar:d.value,size:t,move:u.traveled},e.layout)}),v=L(()=>Math.ceil(e.clientSize-g.value-K(n))),y=()=>{window.addEventListener(`mousemove`,w),window.addEventListener(`mouseup`,C);let e=K(s);e&&(l=document.onselectstart,document.onselectstart=()=>!1,e.addEventListener(`touchmove`,w,{passive:!0}),e.addEventListener(`touchend`,C))},b=()=>{window.removeEventListener(`mousemove`,w),window.removeEventListener(`mouseup`,C),document.onselectstart=l,l=null;let e=K(s);e&&(e.removeEventListener(`touchmove`,w),e.removeEventListener(`touchend`,C))},S=e=>{e.stopImmediatePropagation(),!(e.ctrlKey||[1,2].includes(e.button))&&(u.isDragging=!0,u[d.value.axis]=e.currentTarget[d.value.offset]-(e[d.value.client]-e.currentTarget.getBoundingClientRect()[d.value.direction]),t(`start-move`),y())},C=()=>{u.isDragging=!1,u[d.value.axis]=0,t(`stop-move`),b()},w=e=>{let{isDragging:n}=u;if(!n||!s.value||!o.value)return;let r=u[d.value.axis];if(!r)return;f(c);let i=(o.value.getBoundingClientRect()[d.value.direction]-e[d.value.client])*-1-(s.value[d.value.offset]-r);c=p(()=>{u.traveled=Math.max(0,Math.min(i,v.value)),t(`scroll`,i,v.value)})},T=e=>{let n=Math.abs(e.target.getBoundingClientRect()[d.value.direction]-e[d.value.client])-s.value[d.value.offset]/2;u.traveled=Math.max(0,Math.min(n,v.value)),t(`scroll`,n,v.value)};return Z(()=>e.scrollFrom,e=>{u.isDragging||(u.traveled=Math.ceil(e*v.value))}),ye(()=>{b()}),()=>V(`div`,{role:`presentation`,ref:o,class:[r.b(),e.class,(e.alwaysOn||u.isDragging)&&`always-on`],style:h.value,onMousedown:x(T,[`stop`,`prevent`]),onTouchstartPrevent:S},V(`div`,{ref:s,class:a.e(`thumb`),style:_.value,onMousedown:S},[]))}}),it=(e=>(e.ASC=`asc`,e.DESC=`desc`,e))(it||{}),at=(e=>(e.LEFT=`left`,e.CENTER=`center`,e.RIGHT=`right`,e))(at||{}),ot=(e=>(e.LEFT=`left`,e.RIGHT=`right`,e))(ot||{}),st={asc:`desc`,desc:`asc`},ct=Symbol(`placeholder`),lt=(e,t,n)=>{let r={flexGrow:0,flexShrink:0,...n?{}:{flexGrow:e.flexGrow||0,flexShrink:e.flexShrink||1}};n||(r.flexShrink=1);let i={...e.style??{},...r,flexBasis:`auto`,width:e.width};return t||(e.maxWidth&&(i.maxWidth=e.maxWidth),e.minWidth&&(i.minWidth=e.minWidth)),i};function ut(e,t,n){let r=L(()=>K(t).map((e,t)=>({...e,key:e.key??e.dataKey??t}))),i=L(()=>K(r).filter(e=>!e.hidden)),a=L(()=>K(i).filter(e=>e.fixed===`left`||e.fixed===!0)),o=L(()=>K(i).filter(e=>e.fixed===`right`)),s=L(()=>K(i).filter(e=>!e.fixed)),c=L(()=>{let e=[];return K(a).forEach(t=>{e.push({...t,placeholderSign:ct})}),K(s).forEach(t=>{e.push(t)}),K(o).forEach(t=>{e.push({...t,placeholderSign:ct})}),e}),l=L(()=>K(a).length||K(o).length),u=L(()=>K(r).reduce((t,r)=>(t[r.key]=lt(r,K(n),e.fixed),t),{})),d=L(()=>K(i).reduce((e,t)=>e+t.width,0)),f=e=>K(r).find(t=>t.key===e),p=e=>K(u)[e],m=(e,t)=>{e.width=t};function h(t){var n;let{key:r}=t.currentTarget.dataset;if(!r)return;let{sortState:i,sortBy:a}=e,o=it.ASC;o=he(i)?st[i[r]]:st[a.order],(n=e.onColumnSort)==null||n.call(e,{column:f(r),key:r,order:o})}return{columns:r,columnsStyles:u,columnsTotalWidth:d,fixedColumnsOnLeft:a,fixedColumnsOnRight:o,hasFixedColumns:l,mainColumns:c,normalColumns:s,visibleColumns:i,getColumn:f,getColumnStyle:p,updateColumnWidth:m,onColumnSorted:h}}var dt=(e,{mainTableRef:t,leftTableRef:n,rightTableRef:r,onMaybeEndReached:i})=>{let a=I({scrollLeft:0,scrollTop:0});function o(e){var i,a,o;let{scrollTop:s}=e;(i=t.value)==null||i.scrollTo(e),(a=n.value)==null||a.scrollToTop(s),(o=r.value)==null||o.scrollToTop(s)}function s(e){a.value=e,o(e)}function c(e){a.value.scrollTop=e,o(K(a))}function l(e){var n,r;a.value.scrollLeft=e,(r=(n=t.value)?.scrollTo)==null||r.call(n,K(a))}function u(t){var n;s(t),(n=e.onScroll)==null||n.call(e,t)}function d({scrollTop:e}){let{scrollTop:t}=K(a);e!==t&&c(e)}function f(e,n=`auto`){var r;(r=t.value)==null||r.scrollToRow(e,n)}return Z(()=>K(a).scrollTop,(e,t)=>{e>t&&i()}),{scrollPos:a,scrollTo:s,scrollToLeft:l,scrollToTop:c,scrollToRow:f,onScroll:u,onVerticalScroll:d}},ft=(t,{mainTableRef:n,leftTableRef:r,rightTableRef:i,tableInstance:a,ns:o,isScrolling:s})=>{let c=ue(),{emit:l}=c,u=ae(!1),d=I(t.defaultExpandedRowKeys||[]),f=I(-1),p=ae(null),m=I({}),h=I({}),g=ae({}),_=ae({}),v=ae({}),y=L(()=>D(t.estimatedRowHeight));function b(e){var n;(n=t.onRowsRendered)==null||n.call(t,e),e.rowCacheEnd>K(f)&&(f.value=e.rowCacheEnd)}function x({hovered:e,rowKey:t}){s.value||a.vnode.el.querySelectorAll(`[rowkey="${String(t)}"]`).forEach(t=>{e?t.classList.add(o.is(`hovered`)):t.classList.remove(o.is(`hovered`))})}function S({expanded:e,rowData:n,rowIndex:r,rowKey:i}){var s,c;let u=[...K(d)],f=u.indexOf(i);e?f===-1&&u.push(i):f>-1&&u.splice(f,1),d.value=u,l(`update:expandedRowKeys`,u),(s=t.onRowExpand)==null||s.call(t,{expanded:e,rowData:n,rowIndex:r,rowKey:i}),(c=t.onExpandedRowsChange)==null||c.call(t,u),a.vnode.el.querySelector(`.${o.is(`hovered`)}[rowkey="${String(i)}"]`)&&Y(()=>x({hovered:!0,rowKey:i}))}let C=e(()=>{var e,t,a,o;u.value=!0,m.value={...K(m),...K(h)},w(K(p),!1),h.value={},p.value=null,(e=n.value)==null||e.forceUpdate(),(t=r.value)==null||t.forceUpdate(),(a=i.value)==null||a.forceUpdate(),(o=c.proxy)==null||o.$forceUpdate(),u.value=!1},0);function w(e,t=!1){K(y)&&[n,r,i].forEach(n=>{let r=K(n);r&&r.resetAfterRowIndex(e,t)})}function T(e,t,n){let r=K(p);(r===null||r>n)&&(p.value=n),h.value[e]=t}function E({rowKey:e,height:t,rowIndex:n},r){r?r===ot.RIGHT?v.value[e]=t:g.value[e]=t:_.value[e]=t;let i=Math.max(...[g,v,_].map(t=>t.value[e]||0));K(m)[e]!==i&&(T(e,i,n),C())}return{expandedRowKeys:d,lastRenderedRowIndex:f,isDynamic:y,isResetting:u,rowHeights:m,resetAfterIndex:w,onRowExpanded:S,onRowHovered:x,onRowsRendered:b,onRowHeightChange:E}},pt=(e,{expandedRowKeys:t,lastRenderedRowIndex:n,resetAfterIndex:r})=>{let i=I({}),a=L(()=>{let n={},{data:r,rowKey:a}=e,o=K(t);if(!o||!o.length)return r;let s=[],c=new Set;o.forEach(e=>c.add(e));let l=r.slice();for(l.forEach(e=>n[e[a]]=0);l.length>0;){let e=l.shift();s.push(e),c.has(e[a])&&H(e.children)&&e.children.length>0&&(l=[...e.children,...l],e.children.forEach(t=>n[t[a]]=n[e[a]]+1))}return i.value=n,s}),o=L(()=>{let{data:t,expandColumnKey:n}=e;return n?K(a):t});return Z(o,(e,t)=>{e!==t&&(n.value=-1,r(0,!0))}),{data:o,depthMap:i}},mt=(e,t)=>e+t,ht=e=>H(e)?e.reduce(mt,0):e,gt=(e,t,n={})=>fe(e)?e(t):e??n,Q=e=>([`width`,`maxWidth`,`minWidth`,`height`].forEach(t=>{e[t]=q(e[t])}),e),_t=e=>X(e)?t=>V(e,t):e,vt=(e,{columnsTotalWidth:t,rowsHeight:n,fixedColumnsOnLeft:r,fixedColumnsOnRight:i})=>{let a=L(()=>{let{fixed:n,width:r,vScrollbarSize:i}=e,a=r-i;return n?Math.max(Math.round(K(t)),a):a}),o=L(()=>{let{height:t=0,maxHeight:r=0,footerHeight:i,hScrollbarSize:a}=e;if(r>0){let e=K(f),t=K(n),o=K(d)+e+t+a;return Math.min(o,r-i)}return t-i}),s=L(()=>{let{maxHeight:t}=e,r=K(o);if(D(t)&&t>0)return r;let i=K(n)+K(d)+K(f);return Math.min(r,i)}),c=e=>e.width,l=L(()=>ht(K(r).map(c))),u=L(()=>ht(K(i).map(c))),d=L(()=>ht(e.headerHeight)),f=L(()=>(e.fixedData?.length||0)*e.rowHeight),p=L(()=>K(o)-K(d)-K(f)),m=L(()=>{let{style:t={},height:n,width:r}=e;return Q({...t,height:n,width:r})});return{bodyWidth:a,fixedTableHeight:s,mainTableHeight:o,leftTableWidth:l,rightTableWidth:u,windowHeight:p,footerHeight:L(()=>Q({height:e.footerHeight})),emptyStyle:L(()=>({top:q(K(d)),bottom:q(e.footerHeight),width:q(e.width)})),rootStyle:m,headerHeight:d}};function yt(e){let t=I(),n=I(),r=I(),{columns:i,columnsStyles:a,columnsTotalWidth:o,fixedColumnsOnLeft:s,fixedColumnsOnRight:c,hasFixedColumns:l,mainColumns:u,onColumnSorted:d}=ut(e,re(e,`columns`),re(e,`fixed`)),{scrollTo:f,scrollToLeft:p,scrollToTop:m,scrollToRow:h,onScroll:g,onVerticalScroll:_,scrollPos:v}=dt(e,{mainTableRef:t,leftTableRef:n,rightTableRef:r,onMaybeEndReached:fe}),y=F(`table-v2`),b=ue(),x=ae(!1),{expandedRowKeys:S,lastRenderedRowIndex:C,isDynamic:w,isResetting:T,rowHeights:E,resetAfterIndex:O,onRowExpanded:k,onRowHeightChange:A,onRowHovered:ee,onRowsRendered:j}=ft(e,{mainTableRef:t,leftTableRef:n,rightTableRef:r,tableInstance:b,ns:y,isScrolling:x}),{data:te,depthMap:ne}=pt(e,{expandedRowKeys:S,lastRenderedRowIndex:C,resetAfterIndex:O}),M=L(()=>{let{estimatedRowHeight:t,rowHeight:n}=e,r=K(te);return D(t)?Object.values(K(E)).reduce((e,t)=>e+t,0):r.length*n}),{bodyWidth:N,fixedTableHeight:P,mainTableHeight:ie,leftTableWidth:R,rightTableWidth:oe,windowHeight:se,footerHeight:z,emptyStyle:B,rootStyle:V,headerHeight:ce}=vt(e,{columnsTotalWidth:o,fixedColumnsOnLeft:s,fixedColumnsOnRight:c,rowsHeight:M}),le=I(),U=L(()=>{let t=K(te).length===0;return H(e.fixedData)?e.fixedData.length===0&&t:t});function de(t){let{estimatedRowHeight:n,rowHeight:r,rowKey:i}=e;return n?K(E)[K(te)[t][i]]||n:r}let W=I(!1);function fe(){let{onEndReached:t}=e;if(!t)return;let{scrollTop:n}=K(v),r=K(M),i=r-(n+K(se))+e.hScrollbarSize;!W.value&&K(C)>=0&&r<=n+K(ie)-K(ce)?(W.value=!0,t(i)):W.value=!1}return Z(()=>K(M),()=>W.value=!1),Z(()=>e.expandedRowKeys,e=>S.value=e,{deep:!0}),{columns:i,containerRef:le,mainTableRef:t,leftTableRef:n,rightTableRef:r,isDynamic:w,isResetting:T,isScrolling:x,hasFixedColumns:l,columnsStyles:a,columnsTotalWidth:o,data:te,expandedRowKeys:S,depthMap:ne,fixedColumnsOnLeft:s,fixedColumnsOnRight:c,mainColumns:u,bodyWidth:N,emptyStyle:B,rootStyle:V,footerHeight:z,mainTableHeight:ie,fixedTableHeight:P,leftTableWidth:R,rightTableWidth:oe,showEmpty:U,getRowHeight:de,onColumnSorted:d,onRowHovered:ee,onRowExpanded:k,onRowsRendered:j,onRowHeightChange:A,scrollTo:f,scrollToLeft:p,scrollToTop:m,scrollToRow:h,onScroll:g,onVerticalScroll:_}}var bt=Symbol(`tableV2`),xt=`tableV2GridScrollLeft`,St=String,Ct={type:w(Array),required:!0};w(Object);var wt={type:w(Array)},Tt={...wt,required:!0},Et=String,Dt={type:w(Array),default:()=>a([])},Ot={type:Number,required:!0},kt={type:w([String,Number,Symbol]),default:`id`},At={type:w(Object)},jt=M({class:String,columns:Ct,columnsStyles:{type:w(Object),required:!0},depth:Number,expandColumnKey:Et,estimatedRowHeight:{...Xe.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:w(Function)},onRowHover:{type:w(Function)},onRowHeightChange:{type:w(Function)},rowData:{type:w(Object),required:!0},rowEventHandlers:{type:w(Object)},rowIndex:{type:Number,required:!0},rowKey:kt,style:{type:w(Object)}}),Mt={type:Number,required:!0},Nt=M({class:String,columns:Ct,fixedHeaderData:{type:w(Array)},headerData:{type:w(Array),required:!0},headerHeight:{type:w([Number,Array]),default:50},rowWidth:Mt,rowHeight:{type:Number,default:50},height:Mt,width:Mt}),Pt=M({columns:Ct,data:Tt,fixedData:wt,estimatedRowHeight:jt.estimatedRowHeight,width:Ot,height:Ot,headerWidth:Ot,headerHeight:Nt.headerHeight,bodyWidth:Ot,rowHeight:Ot,cache:Ke.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:Xe.scrollbarAlwaysOn,scrollbarStartGap:Xe.scrollbarStartGap,scrollbarEndGap:Xe.scrollbarEndGap,class:St,style:At,containerStyle:At,getRowHeight:{type:w(Function),required:!0},rowKey:jt.rowKey,onRowsRendered:{type:w(Function)},onScroll:{type:w(Function)}}),Ft=M({cache:Pt.cache,estimatedRowHeight:jt.estimatedRowHeight,rowKey:kt,headerClass:{type:w([String,Function])},headerProps:{type:w([Object,Function])},headerCellProps:{type:w([Object,Function])},headerHeight:Nt.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:w([String,Function])},rowProps:{type:w([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:w([Object,Function])},columns:Ct,data:Tt,dataGetter:{type:w(Function)},fixedData:wt,expandColumnKey:jt.expandColumnKey,expandedRowKeys:Dt,defaultExpandedRowKeys:Dt,class:St,fixed:Boolean,style:{type:w(Object)},width:Ot,height:Ot,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:Xe.hScrollbarSize,vScrollbarSize:Xe.vScrollbarSize,scrollbarAlwaysOn:Ze.alwaysOn,sortBy:{type:w(Object),default:()=>({})},sortState:{type:w(Object),default:void 0},onColumnSort:{type:w(Function)},onExpandedRowsChange:{type:w(Function)},onEndReached:{type:w(Function)},onRowExpand:jt.onRowExpand,onScroll:Pt.onScroll,onRowsRendered:Pt.onRowsRendered,rowEventHandlers:jt.rowEventHandlers}),It=G({name:`ElTableV2Header`,props:Nt,setup(e,{slots:t,expose:r}){let i=F(`table-v2`),a=ve(xt),o=I(),s=L(()=>Q({width:e.width,height:e.height})),c=L(()=>Q({width:e.rowWidth,height:e.height})),l=L(()=>n(K(e.headerHeight))),u=e=>{let t=K(o);Y(()=>{t!=null&&t.scroll&&t.scroll({left:e})})},d=()=>{let n=i.e(`fixed-header-row`),{columns:r,fixedHeaderData:a,rowHeight:o}=e;return a?.map((e,i)=>{let a=Q({height:o,width:`100%`});return t.fixed?.call(t,{class:n,columns:r,rowData:e,rowIndex:-(i+1),style:a})})},f=()=>{let n=i.e(`dynamic-header-row`),{columns:r}=e;return K(l).map((e,i)=>{let a=Q({width:`100%`,height:e});return t.dynamic?.call(t,{class:n,columns:r,headerIndex:i,style:a})})};return j(()=>{a?.value&&u(a.value)}),r({scrollToLeft:u}),()=>{if(!(e.height<=0))return z(`div`,{ref:o,class:e.class,style:K(s),role:`rowgroup`},[z(`div`,{style:K(c),class:i.e(`header`)},[f(),d()])])}}}),Lt=({atXEndEdge:e,atXStartEdge:t,atYEndEdge:n,atYStartEdge:r},i)=>{let a=null,o=0,s=0,c=(i,a)=>{let o=i<=0&&t.value||i>=0&&e.value,s=a<=0&&r.value||a>=0&&n.value;return o&&s};return{hasReachedEdge:c,onWheel:e=>{f(a);let t=e.deltaX,n=e.deltaY;Math.abs(t)>Math.abs(n)?n=0:t=0,e.shiftKey&&n!==0&&(t=n,n=0),!(c(o,s)&&c(o+t,s+n))&&(o+=t,s+=n,e.preventDefault(),a=p(()=>{i(o,s),o=0,s=0}))}}},Rt=({name:e,clearCache:t,getColumnPosition:n,getColumnStartIndexForOffset:r,getColumnStopIndexForStartIndex:i,getEstimatedTotalHeight:a,getEstimatedTotalWidth:o,getColumnOffset:s,getRowOffset:c,getRowPosition:l,getRowStartIndexForOffset:u,getRowStopIndexForStartIndex:f,initCache:p,injectToInstance:m,validateProps:h})=>G({name:e??`ElVirtualList`,props:Xe,emits:[Te,Ee],setup(e,{emit:g,expose:_,slots:v}){let y=F(`vl`);h(e);let b=ue(),x=I(p(e,b));m?.(b,x);let S=I(),C=I(),w=I(),O=I(null),k=I({isScrolling:!1,scrollLeft:D(e.initScrollLeft)?e.initScrollLeft:0,scrollTop:D(e.initScrollTop)?e.initScrollTop:0,updateRequested:!1,xAxisScrollDir:De,yAxisScrollDir:De}),A=we(),j=L(()=>Number.parseInt(`${e.height}`,10)),ne=L(()=>Number.parseInt(`${e.width}`,10)),re=L(()=>{let{totalColumn:t,totalRow:n,columnCache:a}=e,{isScrolling:o,xAxisScrollDir:s,scrollLeft:c}=K(k);if(t===0||n===0)return[0,0,0,0];let l=r(e,c,K(x)),u=i(e,l,c,K(x)),d=!o||s===`backward`?Math.max(1,a):1,f=!o||s===`forward`?Math.max(1,a):1;return[Math.max(0,l-d),Math.max(0,Math.min(t-1,u+f)),l,u]}),M=L(()=>{let{totalColumn:t,totalRow:n,rowCache:r}=e,{isScrolling:i,yAxisScrollDir:a,scrollTop:o}=K(k);if(t===0||n===0)return[0,0,0,0];let s=u(e,o,K(x)),c=f(e,s,o,K(x)),l=!i||a===`backward`?Math.max(1,r):1,d=!i||a===`forward`?Math.max(1,r):1;return[Math.max(0,s-l),Math.max(0,Math.min(n-1,c+d)),s,c]}),N=L(()=>a(e,K(x))),P=L(()=>o(e,K(x))),ie=L(()=>[{position:`relative`,overflow:`hidden`,WebkitOverflowScrolling:`touch`,willChange:`transform`},{direction:e.direction,height:D(e.height)?`${e.height}px`:e.height,width:D(e.width)?`${e.width}px`:e.width},e.style??{}]),ae=L(()=>{let e=`${K(P)}px`;return{height:`${K(N)}px`,pointerEvents:K(k).isScrolling?`none`:void 0,width:e}}),R=()=>{let{totalColumn:t,totalRow:n}=e;if(t>0&&n>0){let[e,t,n,r]=K(re),[i,a,o,s]=K(M);g(Te,{columnCacheStart:e,columnCacheEnd:t,rowCacheStart:i,rowCacheEnd:a,columnVisibleStart:n,columnVisibleEnd:r,rowVisibleStart:o,rowVisibleEnd:s})}let{scrollLeft:r,scrollTop:i,updateRequested:a,xAxisScrollDir:o,yAxisScrollDir:s}=K(k);g(Ee,{xAxisScrollDir:o,scrollLeft:r,yAxisScrollDir:s,scrollTop:i,updateRequested:a})},oe=t=>{let{clientHeight:n,clientWidth:r,scrollHeight:i,scrollLeft:a,scrollTop:o,scrollWidth:s}=t.currentTarget,c=K(k);if(c.scrollTop===o&&c.scrollLeft===a)return;let l=a;if($e(e.direction))switch(tt()){case Pe:l=-a;break;case Ie:l=s-r-a;break}k.value={...c,isScrolling:!0,scrollLeft:l,scrollTop:Math.max(0,Math.min(o,i-n)),updateRequested:!0,xAxisScrollDir:Qe(c.scrollLeft,l),yAxisScrollDir:Qe(c.scrollTop,o)},Y(()=>U()),de(),R()},se=(e,t)=>{let n=K(j),r=(N.value-n)/t*e;H({scrollTop:Math.min(N.value-n,r)})},z=(e,t)=>{let n=K(ne),r=(P.value-n)/t*e;H({scrollLeft:Math.min(P.value-n,r)})},{onWheel:B}=Lt({atXStartEdge:L(()=>k.value.scrollLeft<=0),atXEndEdge:L(()=>k.value.scrollLeft>=P.value-K(ne)),atYStartEdge:L(()=>k.value.scrollTop<=0),atYEndEdge:L(()=>k.value.scrollTop>=N.value-K(j))},(e,t)=>{var n,r,i,a;(r=(n=C.value)?.onMouseUp)==null||r.call(n),(a=(i=w.value)?.onMouseUp)==null||a.call(i);let o=K(ne),s=K(j);H({scrollLeft:Math.min(k.value.scrollLeft+e,P.value-o),scrollTop:Math.min(k.value.scrollTop+t,N.value-s)})});ee(S,`wheel`,B,{passive:!1});let H=({scrollLeft:e=k.value.scrollLeft,scrollTop:t=k.value.scrollTop})=>{e=Math.max(e,0),t=Math.max(t,0);let n=K(k);t===n.scrollTop&&e===n.scrollLeft||(k.value={...n,xAxisScrollDir:Qe(n.scrollLeft,e),yAxisScrollDir:Qe(n.scrollTop,t),scrollLeft:e,scrollTop:t,updateRequested:!0},Y(()=>U()),de(),R())},ce=(t=0,n=0,r=ke)=>{let i=K(k);n=Math.max(0,Math.min(n,e.totalColumn-1)),t=Math.max(0,Math.min(t,e.totalRow-1));let l=d(y.namespace.value),u=K(x),f=a(e,u),p=o(e,u);H({scrollLeft:s(e,n,r,i.scrollLeft,u,p>e.width?l:0),scrollTop:c(e,t,r,i.scrollTop,u,f>e.height?l:0)})},le=(r,i)=>{let{columnWidth:a,direction:o,rowHeight:s}=e,c=A.value(t&&a,t&&s,t&&o),u=`${r},${i}`;if(me(c,u))return c[u];{let[,t]=n(e,i,K(x)),a=K(x),s=$e(o),[d,f]=l(e,r,a),[p]=n(e,i,a);return c[u]={position:`absolute`,left:s?void 0:`${t}px`,right:s?`${t}px`:void 0,top:`${f}px`,height:`${d}px`,width:`${p}px`},c[u]}},U=()=>{k.value.isScrolling=!1,Y(()=>{A.value(-1,null,null)})};T(()=>{if(!te)return;let{initScrollLeft:t,initScrollTop:n}=e,r=K(S);r&&(D(t)&&(r.scrollLeft=t),D(n)&&(r.scrollTop=n)),R()});let de=()=>{let{direction:t}=e,{scrollLeft:n,scrollTop:r,updateRequested:i}=K(k),a=K(S);if(i&&a){if(t===`rtl`)switch(tt()){case Pe:a.scrollLeft=-n;break;case Fe:a.scrollLeft=n;break;default:{let{clientWidth:e,scrollWidth:t}=a;a.scrollLeft=t-e-n;break}}else a.scrollLeft=Math.max(0,n);a.scrollTop=Math.max(0,r)}},{resetAfterColumnIndex:W,resetAfterRowIndex:fe,resetAfter:G}=b.proxy;_({windowRef:S,innerRef:O,getItemStyleCache:A,scrollTo:H,scrollToItem:ce,states:k,resetAfterColumnIndex:W,resetAfterRowIndex:fe,resetAfter:G});let pe=()=>{let{scrollbarAlwaysOn:t,scrollbarStartGap:n,scrollbarEndGap:r,totalColumn:i,totalRow:a}=e,o=K(ne),s=K(j),c=K(P),l=K(N),{scrollLeft:u,scrollTop:d}=K(k);return{horizontalScrollbar:V(rt,{ref:C,alwaysOn:t,startGap:n,endGap:r,class:y.e(`horizontal`),clientSize:o,layout:`horizontal`,onScroll:z,ratio:o*100/c,scrollFrom:u/(c-o),total:a,visible:!0}),verticalScrollbar:V(rt,{ref:w,alwaysOn:t,startGap:n,endGap:r,class:y.e(`vertical`),clientSize:s,layout:`vertical`,onScroll:se,ratio:s*100/l,scrollFrom:d/(l-s),total:i,visible:!0})}},he=()=>{let[t,n]=K(re),[r,i]=K(M),{data:a,totalColumn:o,totalRow:s,useIsScrolling:c,itemKey:l}=e,u=[];if(s>0&&o>0)for(let e=r;e<=i;e++)for(let r=t;r<=n;r++){let t=l({columnIndex:r,data:a,rowIndex:e});u.push(V(ge,{key:t},v.default?.call(v,{columnIndex:r,data:a,isScrolling:c?K(k).isScrolling:void 0,style:le(e,r),rowIndex:e})))}return u},q=()=>{let t=E(e.innerElement),n=he();return[V(t,{style:K(ae),ref:O},_e(t)?n:{default:()=>n})]};return()=>{let t=E(e.containerElement),{horizontalScrollbar:n,verticalScrollbar:r}=pe(),i=q();return V(`div`,{key:0,class:y.e(`wrapper`),role:e.role},[V(t,{class:e.className,style:K(ie),onScroll:oe,ref:S},_e(t)?i:{default:()=>i}),n,r])}}}),{max:zt,min:Bt,floor:Vt}=Math,Ht={column:`columnWidth`,row:`rowHeight`},Ut={column:`lastVisitedColumnIndex`,row:`lastVisitedRowIndex`},$=(e,t,n,r)=>{let[i,a,o]=[n[r],e[Ht[r]],n[Ut[r]]];if(t>o){let e=0;if(o>=0){let t=i[o];e=t.offset+t.size}for(let n=o+1;n<=t;n++){let t=a(n);i[n]={offset:e,size:t},e+=t}n[Ut[r]]=t}return i[t]},Wt=(e,t,n,r,i,a)=>{for(;n<=r;){let o=n+Vt((r-n)/2),s=$(e,o,t,a).offset;if(s===i)return o;s<i?n=o+1:r=o-1}return zt(0,n-1)},Gt=(e,t,n,r,i)=>{let a=i===`column`?e.totalColumn:e.totalRow,o=1;for(;n<a&&$(e,n,t,i).offset<r;)n+=o,o*=2;return Wt(e,t,Vt(n/2),Bt(n,a-1),r,i)},Kt=(e,t,n,r)=>{let[i,a]=[t[r],t[Ut[r]]];return(a>0?i[a].offset:0)>=n?Wt(e,t,0,a,n,r):Gt(e,t,zt(0,a),n,r)},qt=({totalRow:e},{estimatedRowHeight:t,lastVisitedRowIndex:n,row:r})=>{let i=0;if(n>=e&&(n=e-1),n>=0){let e=r[n];i=e.offset+e.size}let a=(e-n-1)*t;return i+a},Jt=({totalColumn:e},{column:t,estimatedColumnWidth:n,lastVisitedColumnIndex:r})=>{let i=0;if(r>e&&(r=e-1),r>=0){let e=t[r];i=e.offset+e.size}let a=(e-r-1)*n;return i+a},Yt={column:Jt,row:qt},Xt=(e,t,n,r,i,a,o)=>{let[s,c]=[a===`row`?e.height:e.width,Yt[a]],l=$(e,t,i,a),u=zt(0,Bt(c(e,i)-s,l.offset)),d=zt(0,l.offset-s+o+l.size);switch(n===`smart`&&(n=r>=d-s&&r<=u+s?ke:je),n){case Ae:return u;case`end`:return d;case je:return Math.round(d+(u-d)/2);case ke:default:return r>=d&&r<=u?r:d>u||r<d?d:u}},Zt=Rt({name:`ElDynamicSizeGrid`,getColumnPosition:(e,t,n)=>{let r=$(e,t,n,`column`);return[r.size,r.offset]},getRowPosition:(e,t,n)=>{let r=$(e,t,n,`row`);return[r.size,r.offset]},getColumnOffset:(e,t,n,r,i,a)=>Xt(e,t,n,r,i,`column`,a),getRowOffset:(e,t,n,r,i,a)=>Xt(e,t,n,r,i,`row`,a),getColumnStartIndexForOffset:(e,t,n)=>Kt(e,n,t,`column`),getColumnStopIndexForStartIndex:(e,t,n,r)=>{let i=$(e,t,r,`column`),a=n+e.width,o=i.offset+i.size,s=t;for(;s<e.totalColumn-1&&o<a;)s++,o+=$(e,t,r,`column`).size;return s},getEstimatedTotalHeight:qt,getEstimatedTotalWidth:Jt,getRowStartIndexForOffset:(e,t,n)=>Kt(e,n,t,`row`),getRowStopIndexForStartIndex:(e,t,n,r)=>{let{totalRow:i,height:a}=e,o=$(e,t,r,`row`),s=n+a,c=o.size+o.offset,l=t;for(;l<i-1&&c<s;)l++,c+=$(e,l,r,`row`).size;return l},injectToInstance:(e,t)=>{let n=({columnIndex:n,rowIndex:r},i)=>{var a,o;i=ie(i)?!0:i,D(n)&&(t.value.lastVisitedColumnIndex=Math.min(t.value.lastVisitedColumnIndex,n-1)),D(r)&&(t.value.lastVisitedRowIndex=Math.min(t.value.lastVisitedRowIndex,r-1)),(a=e.exposed)==null||a.getItemStyleCache.value(-1,null,null),i&&((o=e.proxy)==null||o.$forceUpdate())};Object.assign(e.proxy,{resetAfterColumnIndex:(e,t)=>{n({columnIndex:e},t)},resetAfterRowIndex:(e,t)=>{n({rowIndex:e},t)},resetAfter:n})},initCache:({estimatedColumnWidth:e=50,estimatedRowHeight:t=50})=>({column:{},estimatedColumnWidth:e,estimatedRowHeight:t,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:e,rowHeight:t})=>{}}),Qt=Rt({name:`ElFixedSizeGrid`,getColumnPosition:({columnWidth:e},t)=>[e,t*e],getRowPosition:({rowHeight:e},t)=>[e,t*e],getEstimatedTotalHeight:({totalRow:e,rowHeight:t})=>t*e,getEstimatedTotalWidth:({totalColumn:e,columnWidth:t})=>t*e,getColumnOffset:({totalColumn:e,columnWidth:t,width:n},r,i,a,o,s)=>{n=Number(n);let c=Math.max(0,e*t-n),l=Math.min(c,r*t),u=Math.max(0,r*t-n+s+t);switch(i===`smart`&&(i=a>=u-n&&a<=l+n?ke:je),i){case Ae:return l;case`end`:return u;case je:{let e=Math.round(u+(l-u)/2);return e<Math.ceil(n/2)?0:e>c+Math.floor(n/2)?c:e}case ke:default:return a>=u&&a<=l?a:u>l||a<u?u:l}},getRowOffset:({rowHeight:e,height:t,totalRow:n},r,i,a,o,s)=>{t=Number(t);let c=Math.max(0,n*e-t),l=Math.min(c,r*e),u=Math.max(0,r*e-t+s+e);switch(i===`smart`&&(i=a>=u-t&&a<=l+t?ke:je),i){case Ae:return l;case`end`:return u;case je:{let e=Math.round(u+(l-u)/2);return e<Math.ceil(t/2)?0:e>c+Math.floor(t/2)?c:e}case ke:default:return a>=u&&a<=l?a:u>l||a<u?u:l}},getColumnStartIndexForOffset:({columnWidth:e,totalColumn:t},n)=>Math.max(0,Math.min(t-1,Math.floor(n/e))),getColumnStopIndexForStartIndex:({columnWidth:e,totalColumn:t,width:n},r,i)=>{let a=r*e,o=Math.ceil((n+i-a)/e);return Math.max(0,Math.min(t-1,r+o-1))},getRowStartIndexForOffset:({rowHeight:e,totalRow:t},n)=>Math.max(0,Math.min(t-1,Math.floor(n/e))),getRowStopIndexForStartIndex:({rowHeight:e,totalRow:t,height:n},r,i)=>{let a=r*e,o=Math.ceil((n+i-a)/e);return Math.max(0,Math.min(t-1,r+o-1))},initCache:()=>void 0,clearCache:!0,validateProps:({columnWidth:e,rowHeight:t})=>{}}),$t=`ElTableV2Grid`,en=e=>{let t=I(),n=I(),r=I(0),i=L(()=>{let{data:t,rowHeight:n,estimatedRowHeight:r}=e;if(!r)return t.length*n}),a=L(()=>{let{fixedData:t,rowHeight:n}=e;return(t?.length||0)*n}),o=L(()=>ht(e.headerHeight)),s=L(()=>{let{height:t}=e;return Math.max(0,t-K(o)-K(a))}),c=L(()=>K(o)+K(a)>0),l=({data:t,rowIndex:n})=>t[n][e.rowKey];function u({rowCacheStart:t,rowCacheEnd:n,rowVisibleStart:r,rowVisibleEnd:i}){var a;(a=e.onRowsRendered)==null||a.call(e,{rowCacheStart:t,rowCacheEnd:n,rowVisibleStart:r,rowVisibleEnd:i})}function d(e,t){var r;(r=n.value)==null||r.resetAfterRowIndex(e,t)}function f(e,i){let a=K(t),o=K(n);he(e)?(a?.scrollToLeft(e.scrollLeft),r.value=e.scrollLeft,o?.scrollTo(e)):(a?.scrollToLeft(e),r.value=e,o?.scrollTo({scrollLeft:e,scrollTop:i}))}function p(e){var t;(t=K(n))==null||t.scrollTo({scrollTop:e})}function m(e,t){var r;(r=K(n))==null||r.scrollToItem(e,1,t)}function h(){var e,r;(e=K(n))==null||e.$forceUpdate(),(r=K(t))==null||r.$forceUpdate()}return Z(()=>e.bodyWidth,()=>{var t;D(e.estimatedRowHeight)&&((t=n.value)==null||t.resetAfter({columnIndex:0},!1))}),{bodyRef:n,forceUpdate:h,fixedRowHeight:a,gridHeight:s,hasHeader:c,headerHeight:o,headerRef:t,totalHeight:i,itemKey:l,onItemRendered:u,resetAfterRowIndex:d,scrollTo:f,scrollToTop:p,scrollToRow:m,scrollLeft:r}},tn=G({name:$t,props:Pt,setup(e,{slots:t,expose:n}){let{ns:r}=ve(bt),{bodyRef:i,fixedRowHeight:a,gridHeight:o,hasHeader:s,headerRef:c,headerHeight:l,totalHeight:u,forceUpdate:d,itemKey:f,onItemRendered:p,resetAfterRowIndex:m,scrollTo:h,scrollToTop:g,scrollToRow:_,scrollLeft:v}=en(e);C(xt,v),N(async()=>{await Y();let e=i.value?.states.scrollTop;e&&g(Math.round(e)+1)}),n({forceUpdate:d,totalHeight:u,scrollTo:h,scrollToTop:g,scrollToRow:_,resetAfterRowIndex:m});let y=()=>e.bodyWidth;return()=>{let{cache:n,columns:u,data:d,fixedData:m,useIsScrolling:h,scrollbarAlwaysOn:g,scrollbarEndGap:_,scrollbarStartGap:v,style:b,rowHeight:x,bodyWidth:S,estimatedRowHeight:C,headerWidth:w,height:T,width:E,getRowHeight:O,onScroll:k}=e,A=D(C),ee=A?Zt:Qt,j=K(l);return z(`div`,{role:`table`,class:[r.e(`table`),e.class],style:b},[z(ee,{ref:i,data:d,useIsScrolling:h,itemKey:f,columnCache:0,columnWidth:A?y:S,totalColumn:1,totalRow:d.length,rowCache:n,rowHeight:A?O:x,width:E,height:K(o),class:r.e(`body`),role:`rowgroup`,scrollbarStartGap:v,scrollbarEndGap:_,scrollbarAlwaysOn:g,onScroll:k,onItemRendered:p,perfMode:!1},{default:e=>{let n=d[e.rowIndex];return t.row?.call(t,{...e,columns:u,rowData:n})}}),K(s)&&z(It,{ref:c,class:r.e(`header-wrapper`),columns:u,headerData:d,headerHeight:e.headerHeight,fixedHeaderData:m,rowWidth:w,rowHeight:x,width:E,height:Math.min(j+K(a),T)},{dynamic:t.header,fixed:t.row})])}}});function nn(e){return typeof e==`function`||Object.prototype.toString.call(e)===`[object Object]`&&!X(e)}var rn=(e,{slots:t})=>{let{mainTableRef:n,...r}=e;return z(tn,R({ref:n},r),nn(t)?t:{default:()=>[t]})};function an(e){return typeof e==`function`||Object.prototype.toString.call(e)===`[object Object]`&&!X(e)}var on=(e,{slots:t})=>{if(!e.columns.length)return;let{leftTableRef:n,...r}=e;return z(tn,R({ref:n},r),an(t)?t:{default:()=>[t]})};function sn(e){return typeof e==`function`||Object.prototype.toString.call(e)===`[object Object]`&&!X(e)}var cn=(e,{slots:t})=>{if(!e.columns.length)return;let{rightTableRef:n,...r}=e;return z(tn,R({ref:n},r),sn(t)?t:{default:()=>[t]})},ln=e=>{let{isScrolling:t}=ve(bt),n=I(!1),r=I(),i=L(()=>D(e.estimatedRowHeight)&&e.rowIndex>=0),a=(t=!1)=>{let i=K(r);if(!i)return;let{columns:a,onRowHeightChange:o,rowKey:s,rowIndex:c,style:l}=e,{height:u}=i.getBoundingClientRect();n.value=!0,Y(()=>{if(t||u!==Number.parseInt(l.height)){let e=a[0],t=e?.placeholderSign===ct;o?.({rowKey:s,height:u,rowIndex:c},e&&!t&&e.fixed)}})},o=L(()=>{let{rowData:t,rowIndex:n,rowKey:r,onRowHover:i}=e,a=e.rowEventHandlers||{},o={};return Object.entries(a).forEach(([e,i])=>{fe(i)&&(o[e]=e=>{i({event:e,rowData:t,rowIndex:n,rowKey:r})})}),i&&[{name:`onMouseleave`,hovered:!1},{name:`onMouseenter`,hovered:!0}].forEach(({name:e,hovered:a})=>{let s=o[e];o[e]=e=>{i({event:e,hovered:a,rowData:t,rowIndex:n,rowKey:r}),s?.(e)}}),o});return T(()=>{K(i)&&a(!0)}),{isScrolling:t,measurable:i,measured:n,rowRef:r,eventHandlers:o,onExpand:t=>{let{onRowExpand:n,rowData:r,rowIndex:i,rowKey:a}=e;n?.({expanded:t,rowData:r,rowIndex:i,rowKey:a})}}},un=G({name:`ElTableV2TableRow`,props:jt,setup(e,{expose:t,slots:n,attrs:r}){let{eventHandlers:i,isScrolling:a,measurable:o,measured:s,rowRef:c,onExpand:l}=ln(e);return t({onExpand:l}),()=>{let{columns:t,columnsStyles:u,expandColumnKey:d,depth:f,rowData:p,rowIndex:m,style:h}=e,g=t.map((e,r)=>{let i=H(p.children)&&p.children.length>0&&e.key===d;return n.cell({column:e,columns:t,columnIndex:r,depth:f,style:u[e.key],rowData:p,rowIndex:m,isScrolling:K(a),expandIconProps:i?{rowData:p,rowIndex:m,onExpand:l}:void 0})});if(n.row&&(g=n.row({cells:g.map(e=>H(e)&&e.length===1?e[0]:e),style:h,columns:t,depth:f,rowData:p,rowIndex:m,isScrolling:K(a)})),K(o)){let{height:t,...n}=h||{},a=K(s);return z(`div`,R({ref:c,class:e.class,style:a?h:n,role:`row`},r,K(i)),[g])}return z(`div`,R(r,{ref:c,class:e.class,style:h,role:`row`},K(i)),[g])}}});function dn(e){return typeof e==`function`||Object.prototype.toString.call(e)===`[object Object]`&&!X(e)}var fn=(e,{slots:t})=>{let{columns:n,columnsStyles:r,depthMap:i,expandColumnKey:a,expandedRowKeys:o,estimatedRowHeight:s,hasFixedColumns:c,rowData:l,rowIndex:u,style:d,isScrolling:f,rowProps:p,rowClass:m,rowKey:h,rowEventHandlers:g,ns:_,onRowHovered:v,onRowExpanded:y}=e,b=gt(m,{columns:n,rowData:l,rowIndex:u},``),x=gt(p,{columns:n,rowData:l,rowIndex:u}),S=l[h],C=i[S]||0,w=!!a,T=u<0,E=[_.e(`row`),b,{[_.e(`row-depth-${C}`)]:w&&u>=0,[_.is(`expanded`)]:w&&o.includes(S),[_.is(`fixed`)]:!C&&T,[_.is(`customized`)]:!!t.row}],D=c?v:void 0;return z(un,R({...x,columns:n,columnsStyles:r,class:E,depth:C,expandColumnKey:a,estimatedRowHeight:T?void 0:s,isScrolling:f,rowIndex:u,rowData:l,rowKey:S,rowEventHandlers:g,style:d},{onRowExpand:y,onMouseenter:e=>{D?.({hovered:!0,rowKey:S,event:e,rowData:l,rowIndex:u})},onMouseleave:e=>{D?.({hovered:!1,rowKey:S,event:e,rowData:l,rowIndex:u})},rowkey:S}),dn(t)?t:{default:()=>[t]})},pn=(e,{slots:t})=>{let{cellData:n,style:r}=e,i=(n?.toString)?.call(n)||``,a=A(t,`default`,e,()=>[i]);return z(`div`,{class:e.class,title:i,style:r},[a])};pn.displayName=`ElTableV2Cell`,pn.inheritAttrs=!1;var mn=pn,hn=e=>{let{expanded:t,expandable:n,onExpand:r,style:i,size:a}=e;return z(s,R({onClick:n?()=>r(!t):void 0,class:e.class},{size:a,style:i}),{default:()=>[z(c,null,null)]})},gn=({columns:e,column:t,columnIndex:n,depth:r,expandIconProps:i,isScrolling:a,rowData:o,rowIndex:s,style:c,expandedRowKeys:l,ns:u,cellProps:d,expandColumnKey:f,indentSize:p,iconSize:m,rowKey:h},{slots:g})=>{let _=Q(c);if(t.placeholderSign===ct)return z(`div`,{class:u.em(`row-cell`,`placeholder`),style:_},null);let{cellRenderer:v,dataKey:y,dataGetter:b}=t,x=fe(b)?b({columns:e,column:t,columnIndex:n,rowData:o,rowIndex:s}):oe(o,y??``),S=gt(d,{cellData:x,columns:e,column:t,columnIndex:n,rowIndex:s,rowData:o}),C={class:u.e(`cell-text`),columns:e,column:t,columnIndex:n,cellData:x,isScrolling:a,rowData:o,rowIndex:s},w=_t(v),T=w?w(C):A(g,`default`,C,()=>[z(mn,C,null)]),E=[u.e(`row-cell`),t.class,t.align===at.CENTER&&u.is(`align-center`),t.align===at.RIGHT&&u.is(`align-right`)],D=s>=0&&f&&t.key===f,O=s>=0&&l.includes(o[h]),k,ee=`margin-inline-start: ${r*p}px;`;return D&&(k=he(i)?z(hn,R(i,{class:[u.e(`expand-icon`),u.is(`expanded`,O)],size:m,expanded:O,style:ee,expandable:!0}),null):z(`div`,{style:[ee,`width: ${m}px; height: ${m}px;`].join(` `)},null)),z(`div`,R({class:E,style:_},S,{role:`cell`}),[k,T])};gn.inheritAttrs=!1;var _n=gn,vn=G({name:`ElTableV2HeaderRow`,props:M({class:String,columns:Ct,columnsStyles:{type:w(Object),required:!0},headerIndex:Number,style:{type:w(Object)}}),setup(e,{slots:t}){return()=>{let{columns:n,columnsStyles:r,headerIndex:i,style:a}=e,o=n.map((e,a)=>t.cell({columns:n,column:e,columnIndex:a,headerIndex:i,style:r[e.key]}));return t.header&&(o=t.header({cells:o.map(e=>H(e)&&e.length===1?e[0]:e),columns:n,headerIndex:i})),z(`div`,{class:e.class,style:a,role:`row`},[o])}}});function yn(e){return typeof e==`function`||Object.prototype.toString.call(e)===`[object Object]`&&!X(e)}var bn=({columns:e,columnsStyles:t,headerIndex:n,style:r,headerClass:i,headerProps:a,ns:o},{slots:s})=>{let c={columns:e,headerIndex:n},l=[o.e(`header-row`),gt(i,c,``),{[o.is(`customized`)]:!!s.header}];return z(vn,{...gt(a,c),columnsStyles:t,class:l,columns:e,headerIndex:n,style:r},yn(s)?s:{default:()=>[s]})},xn=(e,{slots:t})=>A(t,`default`,e,()=>[z(`div`,{class:e.class,title:e.column?.title},[e.column?.title])]);xn.displayName=`ElTableV2HeaderCell`,xn.inheritAttrs=!1;var Sn=xn,Cn=e=>{let{sortOrder:t}=e;return z(s,{size:14,class:e.class},{default:()=>[t===it.ASC?z(o,null,null):z(l,null,null)]})},wn=(e,{slots:t})=>{let{column:n,ns:r,style:i,onColumnSorted:a}=e,o=Q(i);if(n.placeholderSign===ct)return z(`div`,{class:r.em(`header-row-cell`,`placeholder`),style:o},null);let{headerCellRenderer:s,headerClass:c,sortable:l}=n,u={...e,class:r.e(`header-cell-text`)},d=_t(s),f=d?d(u):A(t,`default`,u,()=>[z(Sn,u,null)]),{sortBy:p,sortState:m,headerCellProps:h}=e,g,_;if(m){let e=m[n.key];g=!!st[e],_=g?e:it.ASC}else g=n.key===p.key,_=g?p.order:it.ASC;let v=[r.e(`header-cell`),gt(c,e,``),n.align===at.CENTER&&r.is(`align-center`),n.align===at.RIGHT&&r.is(`align-right`),l&&r.is(`sortable`)];return z(`div`,R({...gt(h,e),onClick:n.sortable?a:void 0,class:v,style:o,"data-key":n.key},{role:`columnheader`}),[f,l&&z(Cn,{class:[r.e(`sort-icon`),g&&r.is(`sorting`)],sortOrder:_},null)])},Tn=(e,{slots:t})=>z(`div`,{class:e.class,style:e.style},[t.default?.call(t)]);Tn.displayName=`ElTableV2Footer`;var En=Tn,Dn=(e,{slots:t})=>{let n=A(t,`default`,{},()=>[z(g,null,null)]);return z(`div`,{class:e.class,style:e.style},[n])};Dn.displayName=`ElTableV2Empty`;var On=Dn,kn=(e,{slots:t})=>z(`div`,{class:e.class,style:e.style},[t.default?.call(t)]);kn.displayName=`ElTableV2Overlay`;var An=kn;function jn(e){return typeof e==`function`||Object.prototype.toString.call(e)===`[object Object]`&&!X(e)}var Mn=G({name:`ElTableV2`,props:Ft,setup(e,{slots:t,expose:n}){let r=F(`table-v2`),{columnsStyles:i,fixedColumnsOnLeft:a,fixedColumnsOnRight:o,mainColumns:s,mainTableHeight:c,fixedTableHeight:l,leftTableWidth:u,rightTableWidth:d,data:f,depthMap:p,expandedRowKeys:m,hasFixedColumns:h,mainTableRef:g,leftTableRef:_,rightTableRef:v,isDynamic:y,isResetting:b,isScrolling:x,bodyWidth:S,emptyStyle:w,rootStyle:T,footerHeight:E,showEmpty:D,scrollTo:O,scrollToLeft:k,scrollToTop:A,scrollToRow:ee,getRowHeight:j,onColumnSorted:te,onRowHeightChange:ne,onRowHovered:re,onRowExpanded:M,onRowsRendered:N,onScroll:P,onVerticalScroll:ie}=yt(e);return n({scrollTo:O,scrollToLeft:k,scrollToTop:A,scrollToRow:ee}),C(bt,{ns:r,isResetting:b,isScrolling:x}),()=>{let{cache:n,cellProps:b,estimatedRowHeight:x,expandColumnKey:C,fixedData:O,headerHeight:k,headerClass:A,headerProps:ee,headerCellProps:F,sortBy:ae,sortState:I,rowHeight:L,rowClass:oe,rowEventHandlers:se,rowKey:B,rowProps:V,scrollbarAlwaysOn:H,indentSize:ce,iconSize:le,useIsScrolling:ue,vScrollbarSize:U,width:de}=e,W=K(f),fe={cache:n,class:r.e(`main`),columns:K(s),data:W,fixedData:O,estimatedRowHeight:x,bodyWidth:K(S),headerHeight:k,headerWidth:K(S),height:K(c),mainTableRef:g,rowKey:B,rowHeight:L,scrollbarAlwaysOn:H,scrollbarStartGap:2,scrollbarEndGap:U,useIsScrolling:ue,width:de,getRowHeight:j,onRowsRendered:N,onScroll:P},G=K(u),pe=K(l),me={cache:n,class:r.e(`left`),columns:K(a),data:W,fixedData:O,estimatedRowHeight:x,leftTableRef:_,rowHeight:L,bodyWidth:G,headerWidth:G,headerHeight:k,height:pe,rowKey:B,scrollbarAlwaysOn:H,scrollbarStartGap:2,scrollbarEndGap:U,useIsScrolling:ue,width:G,getRowHeight:j,onScroll:ie},he=K(d),ge={cache:n,class:r.e(`right`),columns:K(o),data:W,fixedData:O,estimatedRowHeight:x,rightTableRef:v,rowHeight:L,bodyWidth:he,headerWidth:he,headerHeight:k,height:pe,rowKey:B,scrollbarAlwaysOn:H,scrollbarStartGap:2,scrollbarEndGap:U,width:he,style:`--${K(r.namespace)}-table-scrollbar-size: ${U}px`,useIsScrolling:ue,getRowHeight:j,onScroll:ie},q=K(i),_e={ns:r,depthMap:K(p),columnsStyles:q,expandColumnKey:C,expandedRowKeys:K(m),estimatedRowHeight:x,hasFixedColumns:K(h),rowProps:V,rowClass:oe,rowKey:B,rowEventHandlers:se,onRowHovered:re,onRowExpanded:M,onRowHeightChange:ne},ve={cellProps:b,expandColumnKey:C,indentSize:ce,iconSize:le,rowKey:B,expandedRowKeys:K(m),ns:r},ye={ns:r,headerClass:A,headerProps:ee,columnsStyles:q},J={ns:r,sortBy:ae,sortState:I,headerCellProps:F,onColumnSorted:te},Y={row:e=>z(fn,R(e,_e),{row:t.row,cell:e=>{let n;return t.cell?z(_n,R(e,ve,{style:q[e.column.key]}),jn(n=t.cell(e))?n:{default:()=>[n]}):z(_n,R(e,ve,{style:q[e.column.key]}),null)}}),header:e=>z(bn,R(e,ye),{header:t.header,cell:e=>{let n;return t[`header-cell`]?z(wn,R(e,J,{style:q[e.column.key]}),jn(n=t[`header-cell`](e))?n:{default:()=>[n]}):z(wn,R(e,J,{style:q[e.column.key]}),null)}})},X=[e.class,r.b(),r.e(`root`),{[r.is(`dynamic`)]:K(y)}],Z={class:r.e(`footer`),style:K(E)};return z(`div`,{class:X,style:K(T)},[z(rn,fe,jn(Y)?Y:{default:()=>[Y]}),z(on,me,jn(Y)?Y:{default:()=>[Y]}),z(cn,ge,jn(Y)?Y:{default:()=>[Y]}),t.footer&&z(En,Z,{default:t.footer}),K(D)&&z(On,{class:r.e(`empty`),style:K(w)},{default:t.empty}),t.overlay&&z(An,{class:r.e(`overlay`)},{default:t.overlay})])}}}),Nn=M({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:w(Function)}}),Pn=e=>{let t=I(),n=I(0),r=I(0),i;return T(()=>{i=S(t,([e])=>{let{width:t,height:i}=e.contentRect,{paddingLeft:a,paddingRight:o,paddingTop:s,paddingBottom:c}=getComputedStyle(e.target),l=Number.parseInt(a)||0,u=Number.parseInt(o)||0,d=Number.parseInt(s)||0,f=Number.parseInt(c)||0;n.value=t-l-u,r.value=i-d-f}).stop}),ye(()=>{i?.()}),Z([n,r],([t,n])=>{var r;(r=e.onResize)==null||r.call(e,{width:t,height:n})}),{sizer:t,width:n,height:r}},Fn=G({name:`ElAutoResizer`,props:Nn,setup(e,{slots:t}){let n=F(`auto-resizer`),{height:r,width:i,sizer:a}=Pn(e),o={width:`100%`,height:`100%`};return()=>z(`div`,{ref:a,class:n.b(),style:o},[t.default?.call(t,{height:r.value,width:i.value})])}}),In=de(Mn),Ln=de(Fn);function Rn(e){return typeof e==`function`||Object.prototype.toString.call(e)===`[object Object]`&&!X(e)}var zn=G({name:`SmartVirtualizedTable`,props:{data:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},pagination:{type:Object,default:null},paginationLayout:{type:String,default:`total, sizes, prev, pager, next, jumper`},adaptive:{type:Boolean,default:!0},extraGap:{type:Number,default:50},title:{type:String,default:``},showRefresh:{type:Boolean,default:!0},showToolbar:{type:Boolean,default:!0},showColumnController:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},emits:[`update:pagination`,`size-change`,`current-change`,`sort-change`,`refresh`,`select`,`select-all`,`selection-change`],setup(e,{emit:t,slots:n,attrs:i}){let a=L(()=>e.pagination??null),o=e=>{a.value&&(t(`update:pagination`,{...a.value,pageSize:e,currentPage:1}),t(`size-change`,e))},s=e=>{a.value&&(t(`update:pagination`,{...a.value,currentPage:e}),t(`current-change`,e))},c=I(0),l=I(null),d=I(),f=I(null),p=I(0),v=null,x=new b(e,l,f,c,p);T(async()=>{await Y(),x.calcTableHeight(),v=new ResizeObserver(()=>x.calcTableHeight()),window.addEventListener(`resize`,()=>x.calcTableHeight()),Z(()=>f.value,t=>{v?.disconnect(),e.pagination&&t instanceof HTMLElement&&v?.observe(t),x.calcTableHeight()},{immediate:!0})}),ye(()=>{window.removeEventListener(`resize`,()=>x.calcTableHeight()),v?.disconnect()});let S=({value:e,intermediate:t=!1,onChange:n})=>z(h,{onChange:n,modelValue:e,indeterminate:t},null),C=I(e.columns.map(e=>e.dataKey)),w=()=>{let t=e.columns.filter(e=>!e.autoWidth&&C.value.includes(e.dataKey)),n=t.map(e=>e.dataKey),r=t.reduce((e,t)=>e+(t.width??0),0);return(p.value-r)/C.value.filter(e=>!n.includes(e)).length},E=L(()=>e.columns.filter(e=>C.value.includes(e.dataKey)).map(r=>{r.autoWidth?r.width=w():(r.autoWidth=!r.width,r.width=r.width||w());let i=r.slot||r.dataKey,a=r.headerSlot||`${r.prop}-header`;return r.slot?r.cellRenderer=({rowData:e,rowIndex:t})=>{let a=e[r.dataKey];if(n[i]){let a=n[i]({rowData:e,rowIndex:t,column:r});return Array.isArray(a)?V(ge,null,a):a}return r.formatter?V(`span`,{},r.formatter(e,r,a,t)):V(`span`,{},a)}:r.selection&&(r.cellRenderer=({rowData:n})=>z(S,{value:n.checked,onChange:r=>{n.checked=r,t(`select`,e.data.filter(e=>e.checked),n),t(`selection-change`,e.data.filter(e=>e.checked))}},null)),r.headerSlot?r.headerCellRenderer=()=>{let e=n[a]?.({column:r});return e?Array.isArray(e)?V(ge,null,e):e:null}:r.selection&&(r.headerCellRenderer=()=>{let n=K(e.data),r=n=>{e.data.forEach(e=>{e.checked=n}),t(`selection-change`,e.data.filter(e=>e.checked)),t(`select-all`,e.data.filter(e=>e.checked))},i=n.length!==0&&n.every(e=>e.checked);return z(S,{value:i,intermediate:n.some(e=>e.checked)&&!i,onChange:r},null)}),r})),D=()=>{let i=()=>{x.calcTableHeight()};return z(`div`,{style:`display:flex;justify-content:space-between;align-items:center; padding:0 11px 11px;border-bottom:1px solid var(--el-border-color-lighter);`},[z(`div`,{style:`font-size:16px;font-weight:600;color:var(--el-text-color-primary);`},[n.title?n.title():e.title]),z(`div`,{style:`display:flex;gap:0px;align-items:center;`},[e.showRefresh&&z(r,{content:`刷新`,placement:`top`},{default:()=>[z(u,{text:!0,onClick:()=>t(`refresh`),disabled:e.loading},{default:()=>[z(k,{icon:`ep:refresh`},null)]})]}),e.showColumnController&&z(r,{content:`列设置`,placement:`top`,"as-child":!0},{default:()=>[z(`div`,null,[z(y,{trigger:`click`,placement:`bottom-end`},{reference:()=>z(u,{text:!0},{default:()=>[z(k,{icon:`ep:menu`},null)]}),default:()=>{let t;return z(m,{modelValue:C.value,"onUpdate:modelValue":e=>C.value=e,style:`padding-left:20px`,onChange:i},Rn(t=e.columns.map(e=>z(h,{onChange:i,key:e.dataKey,value:e.dataKey,label:e.selection?`复选框`:e.title},null)))?t:{default:()=>[t]})}})])]})])])};return()=>z(`div`,{style:`background-color:var(--el-bg-color);padding:12px;box-sizing:border-box;`,ref:l},[e.showToolbar?n.toolbar?n.toolbar():D():null,z(Ln,null,{default:({height:r,width:a})=>O(z(In,R(i,{ref:d,data:e.data,width:a,columns:E.value,height:e.adaptive?c.value:r,"onSort-change":e=>t(`sort-change`,e)}),{empty:n.empty?()=>n.empty?.():()=>z(g,{description:`暂无数据`},null)}),[[ne(`loading`),e.loading]])}),a.value&&z(`div`,{style:`margin-top:12px;text-align:right`},[z(_,{background:!0,ref:f,style:`justify-content:flex-end;`,layout:e.paginationLayout,currentPage:a.value.currentPage,pageSize:a.value.pageSize,total:a.value.total,pageSizes:a.value.pageSizes||[10,20,50,100],"onUpdate:page-size":o,"onUpdate:current-page":s},null)])])}}),Bn=G({__name:`SmartTableV2`,setup(e){let n=I([]),r=I({currentPage:1,pageSize:3e3,total:0,pageSizes:[10,20,50,100,3e3]}),i=I(!1),a=e=>{console.log(e),n.value=v(n.value,e.key,e.order),o.value=e},o=I({key:`age2`,order:it.ASC}),s=e=>{console.log(`选中行：`,e)},c=e=>{console.log(e)},l=(e,t)=>{console.log(e,t)},d=[{key:`index`,dataKey:`index`,selection:!0,width:50},{key:`name`,dataKey:`name`,title:`姓名`,slot:`name`,align:`center`},{key:`age`,dataKey:`age`,title:`年龄`,align:`center`,sortable:!0,headerSlot:`age-header`},{key:`age1`,dataKey:`age1`,title:`年龄1`,align:`center`},{key:`age2`,dataKey:`age2`,title:`年龄2`,align:`center`,sortable:!0},{key:`age3`,dataKey:`age3`,title:`年龄3`,align:`center`},{key:`age4`,dataKey:`age4`,title:`年龄4`,align:`center`},{key:`age5`,dataKey:`age5`,title:`年龄5`,align:`center`},{key:`age6`,dataKey:`age6`,title:`年龄6`,align:`center`},{key:`age7`,dataKey:`age7`,title:`年龄7`,align:`center`},{dataKey:`edit-col`,title:`操作`,slot:`edit-slot`,width:150}],f=e=>{console.log(`排序参数：`,e),h()},p=e=>{console.log(`编辑`,e)},m=e=>{console.log(`删除`,e)},h=()=>{i.value=!0,setTimeout(()=>{r.value.total=1e4,n.value=Array.from({length:r.value.pageSize}).map((e,t)=>({id:(r.value.currentPage-1)*r.value.pageSize+t+1,name:`用户 ${(r.value.currentPage-1)*r.value.pageSize+t+1}`,age:18+Math.floor(Math.random()*10),age1:18+Math.floor(Math.random()*10),age2:18+Math.floor(Math.random()*10),age3:18+Math.floor(Math.random()*10),age4:18+Math.floor(Math.random()*10),age5:18+Math.floor(Math.random()*10),age6:18+Math.floor(Math.random()*10),age7:18+Math.floor(Math.random()*10)})),i.value=!1},500)};return h(),(e,g)=>{let _=t,v=u;return ce(),le(`div`,null,[z(K(zn),{title:`虚拟表格`,data:n.value,columns:d,loading:i.value,"sort-by":o.value,pagination:r.value,"onUpdate:pagination":g[0]||=e=>r.value=e,style:{width:`100%`},onColumnSort:a,onRefresh:h,onSortChange:f,onSizeChange:h,onCurrentChange:h,onSelect:l,onSelectAll:c,onSelectionChange:s},{name:P(({rowData:e})=>[z(_,null,{default:P(()=>[se(U(e.name),1)]),_:2},1024)]),"age-header":P(()=>[...g[1]||=[W(`span`,{style:{color:`red`}},`🔥 年龄`,-1)]]),"edit-slot":P(({rowData:e})=>[z(v,{size:`small`,type:`primary`,onClick:t=>p(e)},{default:P(()=>[...g[2]||=[se(`编辑`,-1)]]),_:1},8,[`onClick`]),z(v,{size:`small`,type:`danger`,onClick:t=>m(e)},{default:P(()=>[...g[3]||=[se(`删除`,-1)]]),_:1},8,[`onClick`])]),_:1},8,[`data`,`loading`,`sort-by`,`pagination`])])}}});export{Bn as t};