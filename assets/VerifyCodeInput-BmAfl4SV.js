import{t as e}from"./css-DENDHyzK.js";import{t}from"./css-BxD6NdqY.js";import{Gr as n,Tr as r,Y as i,_r as a,kr as o,o as s,qi as c,ri as l,vr as u}from"./index-DkS91mYz.js";var d=u({name:`VerifyCodeInput`,props:{modelValue:{type:String,required:!0},placeholder:{type:String,default:``},buttonText:{type:String,default:`获取验证码`},countdownSeconds:{type:Number,default:60},requestFn:{type:Function,default:void 0}},emits:[`update:modelValue`],setup(c,{emit:u,attrs:d}){let f=l(c.modelValue);n(()=>c.modelValue,e=>f.value=e),n(f,e=>u(`update:modelValue`,e));let p=l(c.countdownSeconds),m=l(!1),h=l(!1),g=null,_=async()=>{if(!(m.value||h.value))try{h.value=!0,c.requestFn?await c.requestFn():await new Promise(e=>setTimeout(e,1e3)),v()}catch(e){console.error(`获取验证码失败：`,e)}finally{h.value=!1}},v=()=>{m.value=!0,p.value=c.countdownSeconds,g=window.setInterval(()=>{p.value--,p.value<=0&&y()},1e3)},y=()=>{g&&=(clearInterval(g),null),m.value=!1};return o(()=>{y()}),()=>a(`div`,{style:`display: inline-block;width: 100%;`},[a(e,r(d,{modelValue:f.value,"onUpdate:modelValue":e=>f.value=e,placeholder:c.placeholder,clearable:!0}),{prefix:()=>a(i,{class:`el-input__icon`},{default:()=>[a(s,{icon:`ri:shield-keyhole-line`},null)]}),append:()=>a(t,{plain:!0,style:{width:`120px`},loading:h.value,disabled:m.value||h.value,onClick:_},{default:()=>[m.value?`${p.value}s`:c.buttonText]})})])}});export{d as t};