import"./_initCloneObject-BsjYyby-.js";import{t as e}from"./_baseClone-B5KGzugA.js";import"./event-ybyaoC_m.js";import"./scroll-C0Dofiz-.js";import{n as t}from"./use-deprecated-BP8lmVFH.js";import"./aria-CCaT2o1P.js";import"./teleport-DMHkh723.js";import{t as n}from"./css-BxD6NdqY.js";import"./vnode-5olvZtGS.js";import"./css-heIaB2f0.js";import{t as r}from"./css-_IYeStbW.js";import"./refs-BjxfU7KM.js";import{$ as i,A as a,At as o,C as s,Ci as c,Cr as l,E as u,Er as d,Fr as f,Gn as p,Gr as m,Ii as h,Ir as g,Jn as _,K as v,Lr as y,Mi as ee,Mr as te,Oi as b,Ri as x,Rr as S,S as ne,Tr as re,Vi as ie,Vr as ae,X as oe,Xt as se,Y as C,Zt as ce,_r as w,bi as le,bt as ue,d as de,dr as T,et as fe,fr as E,gr as D,hr as pe,ii as me,ir as O,k as he,kr as ge,lt as _e,mr as k,o as A,oi as ve,or as ye,ot as be,pi as j,pr as M,q as xe,qi as Se,qr as N,ri as P,rr as Ce,ui as F,ur as I,vr as L,vt as R,w as we,yi as z,yt as B}from"./index-DkS91mYz.js";var Te=1,Ee=4;function De(t){return e(t,Te|Ee)}var Oe=De,ke=R({type:{type:String,default:`line`,values:[`line`,`circle`,`dashboard`]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:``,values:[``,`success`,`exception`,`warning`]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:B(String),default:`round`},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:B([String,Array,Function]),default:``},striped:Boolean,stripedFlow:Boolean,format:{type:B(Function),default:e=>`${e}%`}});z();var Ae=oe(be(L({...L({name:`ElProgress`}),props:ke,setup(e){let t=e,n={success:`#13ce66`,exception:`#ff4949`,warning:`#e6a23c`,default:`#20a0ff`},r=p(`progress`),i=I(()=>{let e={width:`${t.percentage}%`,animationDuration:`${t.duration}s`},n=ce(t.percentage);return n.includes(`gradient`)?e.background=n:e.backgroundColor=n,e}),a=I(()=>(t.strokeWidth/t.width*100).toFixed(1)),o=I(()=>[`circle`,`dashboard`].includes(t.type)?Number.parseInt(`${50-Number.parseFloat(a.value)/2}`,10):0),l=I(()=>{let e=o.value,n=t.type===`dashboard`;return`
          M 50 50
          m 0 ${n?``:`-`}${e}
          a ${e} ${e} 0 1 1 0 ${n?`-`:``}${e*2}
          a ${e} ${e} 0 1 1 0 ${n?``:`-`}${e*2}
          `}),d=I(()=>2*Math.PI*o.value),m=I(()=>t.type===`dashboard`?.75:1),g=I(()=>`${-1*d.value*(1-m.value)/2}px`),_=I(()=>({strokeDasharray:`${d.value*m.value}px, ${d.value}px`,strokeDashoffset:g.value})),y=I(()=>({strokeDasharray:`${d.value*m.value*(t.percentage/100)}px, ${d.value}px`,strokeDashoffset:g.value,transition:`stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s`})),te=I(()=>{let e;return e=t.color?ce(t.percentage):n[t.status]||n.default,e}),b=I(()=>t.status===`warning`?v:t.type===`line`?t.status===`success`?s:we:t.status===`success`?ne:u),re=I(()=>t.type===`line`?12+t.strokeWidth*.4:t.width*.111111+2),oe=I(()=>t.format(t.percentage));function se(e){let t=100/e.length;return e.map((e,n)=>ee(e)?{color:e,percentage:(n+1)*t}:e).sort((e,t)=>e.percentage-t.percentage)}let ce=e=>{let{color:n}=t;if(c(n))return n(e);if(ee(n))return n;{let t=se(n);for(let n of t)if(n.percentage>e)return n.color;return t[t.length-1]?.color}};return(e,t)=>(f(),k(`div`,{class:h([F(r).b(),F(r).m(e.type),F(r).is(e.status),{[F(r).m(`without-text`)]:!e.showText,[F(r).m(`text-inside`)]:e.textInside}]),role:`progressbar`,"aria-valuenow":e.percentage,"aria-valuemin":`0`,"aria-valuemax":`100`},[e.type===`line`?(f(),k(`div`,{key:0,class:h(F(r).b(`bar`))},[T(`div`,{class:h(F(r).be(`bar`,`outer`)),style:x({height:`${e.strokeWidth}px`})},[T(`div`,{class:h([F(r).be(`bar`,`inner`),{[F(r).bem(`bar`,`inner`,`indeterminate`)]:e.indeterminate},{[F(r).bem(`bar`,`inner`,`striped`)]:e.striped},{[F(r).bem(`bar`,`inner`,`striped-flow`)]:e.stripedFlow}]),style:x(F(i))},[(e.showText||e.$slots.default)&&e.textInside?(f(),k(`div`,{key:0,class:h(F(r).be(`bar`,`innerText`))},[S(e.$slots,`default`,{percentage:e.percentage},()=>[T(`span`,null,ie(F(oe)),1)])],2)):M(`v-if`,!0)],6)],6)],2)):(f(),k(`div`,{key:1,class:h(F(r).b(`circle`)),style:x({height:`${e.width}px`,width:`${e.width}px`})},[(f(),k(`svg`,{viewBox:`0 0 100 100`},[T(`path`,{class:h(F(r).be(`circle`,`track`)),d:F(l),stroke:`var(${F(r).cssVarName(`fill-color-light`)}, #e5e9f2)`,"stroke-linecap":e.strokeLinecap,"stroke-width":F(a),fill:`none`,style:x(F(_))},null,14,[`d`,`stroke`,`stroke-linecap`,`stroke-width`]),T(`path`,{class:h(F(r).be(`circle`,`path`)),d:F(l),stroke:F(te),fill:`none`,opacity:e.percentage?1:0,"stroke-linecap":e.strokeLinecap,"stroke-width":F(a),style:x(F(y))},null,14,[`d`,`stroke`,`opacity`,`stroke-linecap`,`stroke-width`])]))],6)),(e.showText||e.$slots.default)&&!e.textInside?(f(),k(`div`,{key:2,class:h(F(r).e(`text`)),style:x({fontSize:`${F(re)}px`})},[S(e.$slots,`default`,{percentage:e.percentage},()=>[e.status?(f(),E(F(C),{key:1},{default:N(()=>[(f(),E(ae(F(b))))]),_:1})):(f(),k(`span`,{key:0},ie(F(oe)),1))])],6)):M(`v-if`,!0)],10,[`aria-valuenow`]))}}),[[`__file`,`progress.vue`]])),je=Symbol(`uploadContextKey`);z();var Me=`ElUpload`,Ne=class extends Error{constructor(e,t,n,r){super(e),this.name=`UploadAjaxError`,this.status=t,this.method=n,this.url=r}};function Pe(e,t,n){let r;return r=n.response?`${n.response.error||n.response}`:n.responseText?`${n.responseText}`:`fail to ${t.method} ${e} ${n.status}`,new Ne(r,n.status,t.method,e)}function Fe(e){let t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}var Ie=e=>{typeof XMLHttpRequest>`u`&&fe(Me,`XMLHttpRequest is undefined`);let t=new XMLHttpRequest,n=e.action;t.upload&&t.upload.addEventListener(`progress`,t=>{let n=t;n.percent=t.total>0?t.loaded/t.total*100:0,e.onProgress(n)});let r=new FormData;if(e.data)for(let[t,n]of Object.entries(e.data))le(n)&&n.length?r.append(t,...n):r.append(t,n);r.append(e.filename,e.file,e.file.name),t.addEventListener(`error`,()=>{e.onError(Pe(n,e,t))}),t.addEventListener(`load`,()=>{if(t.status<200||t.status>=300)return e.onError(Pe(n,e,t));e.onSuccess(Fe(t))}),t.open(e.method,n,!0),e.withCredentials&&`withCredentials`in t&&(t.withCredentials=!0);let i=e.headers||{};if(i instanceof Headers)i.forEach((e,n)=>t.setRequestHeader(n,e));else for(let[e,n]of Object.entries(i))se(n)||t.setRequestHeader(e,String(n));return t.send(r),t};z();var Le=[`text`,`picture`,`picture-card`],Re=1,ze=()=>Date.now()+ Re++,Be=R({action:{type:String,default:`#`},headers:{type:B(Object)},method:{type:String,default:`post`},data:{type:B([Object,Function,Promise]),default:()=>de({})},multiple:Boolean,name:{type:String,default:`file`},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:``},fileList:{type:B(Array),default:()=>de([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Le,default:`text`},httpRequest:{type:B(Function),default:Ie},disabled:Boolean,limit:Number}),Ve=R({...Be,beforeUpload:{type:B(Function),default:j},beforeRemove:{type:B(Function)},onRemove:{type:B(Function),default:j},onChange:{type:B(Function),default:j},onPreview:{type:B(Function),default:j},onSuccess:{type:B(Function),default:j},onProgress:{type:B(Function),default:j},onError:{type:B(Function),default:j},onExceed:{type:B(Function),default:j},crossorigin:{type:B(String)}});z();var He=R({files:{type:B(Array),default:()=>de([])},disabled:Boolean,handlePreview:{type:B(Function),default:j},listType:{type:String,values:Le,default:`text`},crossorigin:{type:B(String)}}),Ue={remove:e=>!!e},We=be(L({...L({name:`ElUploadList`}),props:He,emits:Ue,setup(e,{emit:n}){let r=e,{t:i}=ue(),o=p(`upload`),c=p(`icon`),l=p(`list`),d=t(),m=P(!1),g=I(()=>[o.b(`list`),o.bm(`list`,r.listType),o.is(`disabled`,r.disabled)]),v=e=>{n(`remove`,e)};return(e,t)=>(f(),E(_,{tag:`ul`,class:h(F(g)),name:F(l).b()},{default:N(()=>[(f(!0),k(ye,null,y(e.files,(t,n)=>(f(),k(`li`,{key:t.uid||t.name,class:h([F(o).be(`list`,`item`),F(o).is(t.status),{focusing:m.value}]),tabindex:`0`,onKeydown:Ce(e=>!F(d)&&v(t),[`delete`]),onFocus:e=>m.value=!0,onBlur:e=>m.value=!1,onClick:e=>m.value=!1},[S(e.$slots,`default`,{file:t,index:n},()=>[e.listType===`picture`||t.status!==`uploading`&&e.listType===`picture-card`?(f(),k(`img`,{key:0,class:h(F(o).be(`list`,`item-thumbnail`)),src:t.url,crossorigin:e.crossorigin,alt:``},null,10,[`src`,`crossorigin`])):M(`v-if`,!0),t.status===`uploading`||e.listType!==`picture-card`?(f(),k(`div`,{key:1,class:h(F(o).be(`list`,`item-info`))},[T(`a`,{class:h(F(o).be(`list`,`item-name`)),onClick:O(n=>e.handlePreview(t),[`prevent`])},[w(F(C),{class:h(F(c).m(`document`))},{default:N(()=>[w(F(a))]),_:1},8,[`class`]),T(`span`,{class:h(F(o).be(`list`,`item-file-name`)),title:t.name},ie(t.name),11,[`title`])],10,[`onClick`]),t.status===`uploading`?(f(),E(F(Ae),{key:0,type:e.listType===`picture-card`?`circle`:`line`,"stroke-width":e.listType===`picture-card`?6:2,percentage:Number(t.percentage),style:x(e.listType===`picture-card`?``:`margin-top: 0.5rem`)},null,8,[`type`,`stroke-width`,`percentage`,`style`])):M(`v-if`,!0)],2)):M(`v-if`,!0),T(`label`,{class:h(F(o).be(`list`,`item-status-label`))},[e.listType===`text`?(f(),E(F(C),{key:0,class:h([F(c).m(`upload-success`),F(c).m(`circle-check`)])},{default:N(()=>[w(F(s))]),_:1},8,[`class`])):[`picture-card`,`picture`].includes(e.listType)?(f(),E(F(C),{key:1,class:h([F(c).m(`upload-success`),F(c).m(`check`)])},{default:N(()=>[w(F(ne))]),_:1},8,[`class`])):M(`v-if`,!0)],2),F(d)?M(`v-if`,!0):(f(),E(F(C),{key:2,class:h(F(c).m(`close`)),onClick:e=>v(t)},{default:N(()=>[w(F(u))]),_:2},1032,[`class`,`onClick`])),M(` Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn`),M(` This is a bug which needs to be fixed `),M(` TODO: Fix the incorrect navigation interaction `),F(d)?M(`v-if`,!0):(f(),k(`i`,{key:3,class:h(F(c).m(`close-tip`))},ie(F(i)(`el.upload.deleteTip`)),3)),e.listType===`picture-card`?(f(),k(`span`,{key:4,class:h(F(o).be(`list`,`item-actions`))},[T(`span`,{class:h(F(o).be(`list`,`item-preview`)),onClick:n=>e.handlePreview(t)},[w(F(C),{class:h(F(c).m(`zoom-in`))},{default:N(()=>[w(F(xe))]),_:1},8,[`class`])],10,[`onClick`]),F(d)?M(`v-if`,!0):(f(),k(`span`,{key:0,class:h(F(o).be(`list`,`item-delete`)),onClick:e=>v(t)},[w(F(C),{class:h(F(c).m(`delete`))},{default:N(()=>[w(F(he))]),_:1},8,[`class`])],10,[`onClick`]))],2)):M(`v-if`,!0)])],42,[`onKeydown`,`onFocus`,`onBlur`,`onClick`]))),128)),S(e.$slots,`append`)]),_:3},8,[`class`,`name`]))}}),[[`__file`,`upload-list.vue`]]);z();var Ge=R({disabled:Boolean}),Ke={file:e=>le(e)},qe=`ElUploadDrag`,Je=be(L({...L({name:qe}),props:Ge,emits:Ke,setup(e,{emit:n}){l(je)||fe(qe,`usage: <el-upload><el-upload-dragger /></el-upload>`);let r=p(`upload`),i=P(!1),a=t(),o=e=>{if(a.value)return;i.value=!1,e.stopPropagation();let t=Array.from(e.dataTransfer.files),r=e.dataTransfer.items||[];t.forEach((e,t)=>{let n=r[t],i=(n?.webkitGetAsEntry)?.call(n);i&&(e.isDirectory=i.isDirectory)}),n(`file`,t)},s=()=>{a.value||(i.value=!0)},c=e=>{e.currentTarget.contains(e.relatedTarget)||(i.value=!1)};return(e,t)=>(f(),k(`div`,{class:h([F(r).b(`dragger`),F(r).is(`dragover`,i.value)]),onDrop:O(o,[`prevent`]),onDragover:O(s,[`prevent`]),onDragleave:O(c,[`prevent`])},[S(e.$slots,`default`)],42,[`onDrop`,`onDragover`,`onDragleave`]))}}),[[`__file`,`upload-dragger.vue`]]);z();var Ye=R({...Be,beforeUpload:{type:B(Function),default:j},onRemove:{type:B(Function),default:j},onStart:{type:B(Function),default:j},onSuccess:{type:B(Function),default:j},onProgress:{type:B(Function),default:j},onError:{type:B(Function),default:j},onExceed:{type:B(Function),default:j}});z();var Xe=be(L({...L({name:`ElUploadContent`,inheritAttrs:!1}),props:Ye,setup(e,{expose:n}){let r=e,i=p(`upload`),a=t(),o=me({}),s=me(),l=e=>{if(e.length===0)return;let{autoUpload:t,limit:n,fileList:i,multiple:a,onStart:o,onExceed:s}=r;if(n&&i.length+e.length>n){s(e,i);return}a||(e=e.slice(0,1));for(let n of e){let e=n;e.uid=ze(),o(e),t&&u(e)}},u=async e=>{if(s.value.value=``,!r.beforeUpload)return m(e);let t,n={};try{let i=r.data,a=r.beforeUpload(e);n=b(r.data)?Oe(r.data):r.data,t=await a,b(r.data)&&ce(i,n)&&(n=Oe(r.data))}catch{t=!1}if(t===!1){r.onRemove(e);return}let i=e;t instanceof Blob&&(i=t instanceof File?t:new File([t],e.name,{type:e.type})),m(Object.assign(i,{uid:e.uid}),n)},d=async(e,t)=>c(e)?e(t):e,m=async(e,t)=>{let{headers:n,data:i,method:a,withCredentials:s,name:c,action:l,onProgress:u,onSuccess:f,onError:p,httpRequest:m}=r;try{t=await d(t??i,e)}catch{r.onRemove(e);return}let{uid:h}=e,g={headers:n||{},withCredentials:s,file:e,data:t,method:a,filename:c,action:l,onProgress:t=>{u(t,e)},onSuccess:t=>{f(t,e),delete o.value[h]},onError:t=>{p(t,e),delete o.value[h]}},_=m(g);o.value[h]=_,_ instanceof Promise&&_.then(g.onSuccess,g.onError)},g=e=>{let t=e.target.files;t&&l(Array.from(t))},_=()=>{a.value||(s.value.value=``,s.value.click())},v=()=>{_()};return n({abort:e=>{_e(o.value).filter(e?([t])=>String(e.uid)===t:()=>!0).forEach(([e,t])=>{t instanceof XMLHttpRequest&&t.abort(),delete o.value[e]})},upload:u}),(e,t)=>(f(),k(`div`,{class:h([F(i).b(),F(i).m(e.listType),F(i).is(`drag`,e.drag),F(i).is(`disabled`,F(a))]),tabindex:F(a)?`-1`:`0`,onClick:_,onKeydown:Ce(O(v,[`self`]),[`enter`,`space`])},[e.drag?(f(),E(Je,{key:0,disabled:F(a),onFile:l},{default:N(()=>[S(e.$slots,`default`)]),_:3},8,[`disabled`])):S(e.$slots,`default`,{key:1}),T(`input`,{ref_key:`inputRef`,ref:s,class:h(F(i).e(`input`)),name:e.name,disabled:F(a),multiple:e.multiple,accept:e.accept,type:`file`,onChange:g,onClick:O(()=>{},[`stop`])},null,42,[`name`,`disabled`,`multiple`,`accept`,`onClick`])],42,[`tabindex`,`onKeydown`]))}}),[[`__file`,`upload-content.vue`]]),Ze=`ElUpload`,Qe=e=>{e.url?.startsWith(`blob:`)&&URL.revokeObjectURL(e.url)},$e=(e,t)=>{let n=o(e,`fileList`,void 0,{passive:!0}),r=e=>n.value.find(t=>t.uid===e.uid);function a(e){var n;(n=t.value)==null||n.abort(e)}function s(e=[`ready`,`uploading`,`success`,`fail`]){n.value=n.value.filter(t=>!e.includes(t.status))}function c(e){n.value=n.value.filter(t=>t.uid!==e.uid)}let l=(t,i)=>{let a=r(i);a&&(console.error(t),a.status=`fail`,c(a),e.onError(t,a,n.value),e.onChange(a,n.value))},u=(t,i)=>{let a=r(i);a&&(e.onProgress(t,a,n.value),a.status=`uploading`,a.percentage=Math.round(t.percent))},d=(t,i)=>{let a=r(i);a&&(a.status=`success`,a.response=t,e.onSuccess(t,a,n.value),e.onChange(a,n.value))},f=t=>{se(t.uid)&&(t.uid=ze());let r={name:t.name,percentage:0,status:`ready`,size:t.size,raw:t,uid:t.uid};if(e.listType===`picture-card`||e.listType===`picture`)try{r.url=URL.createObjectURL(t)}catch(t){i(Ze,t.message),e.onError(t,r,n.value)}n.value=[...n.value,r],e.onChange(r,n.value)},p=async t=>{let i=t instanceof File?r(t):t;i||fe(Ze,`file to be removed not found`);let o=t=>{a(t),c(t),e.onRemove(t,n.value),Qe(t)};e.beforeRemove?await e.beforeRemove(i,n.value)!==!1&&o(i):o(i)};function h(){n.value.filter(({status:e})=>e===`ready`).forEach(({raw:e})=>e&&t.value?.upload(e))}return m(()=>e.listType,t=>{t!==`picture-card`&&t!==`picture`||(n.value=n.value.map(t=>{let{raw:r,url:i}=t;if(!i&&r)try{t.url=URL.createObjectURL(r)}catch(r){e.onError(r,t,n.value)}return t}))}),m(n,e=>{for(let t of e)t.uid||=ze(),t.status||=`success`},{immediate:!0,deep:!0}),{uploadFiles:n,abort:a,clearFiles:s,handleError:l,handleProgress:u,handleStart:f,handleSuccess:d,handleRemove:p,submit:h,revokeFileObjectURL:Qe}},et=oe(be(L({...L({name:`ElUpload`}),props:Ve,setup(e,{expose:n}){let r=e,i=t(),a=me(),{abort:o,submit:s,clearFiles:c,uploadFiles:l,handleStart:u,handleError:d,handleRemove:p,handleSuccess:m,handleProgress:h,revokeFileObjectURL:_}=$e(r,a),v=I(()=>r.listType===`picture-card`),y=I(()=>({...r,fileList:l.value,onStart:u,onProgress:h,onSuccess:m,onError:d,onRemove:p}));return ge(()=>{l.value.forEach(_)}),g(je,{accept:ve(r,`accept`)}),n({abort:o,submit:s,clearFiles:c,handleStart:u,handleRemove:p}),(e,t)=>(f(),k(`div`,null,[F(v)&&e.showFileList?(f(),E(We,{key:0,disabled:F(i),"list-type":e.listType,files:F(l),crossorigin:e.crossorigin,"handle-preview":e.onPreview,onRemove:F(p)},pe({append:N(()=>[w(Xe,re({ref_key:`uploadRef`,ref:a},F(y)),{default:N(()=>[e.$slots.trigger?S(e.$slots,`trigger`,{key:0}):M(`v-if`,!0),!e.$slots.trigger&&e.$slots.default?S(e.$slots,`default`,{key:1}):M(`v-if`,!0)]),_:3},16)]),_:2},[e.$slots.file?{name:`default`,fn:N(({file:t,index:n})=>[S(e.$slots,`file`,{file:t,index:n})])}:void 0]),1032,[`disabled`,`list-type`,`files`,`crossorigin`,`handle-preview`,`onRemove`])):M(`v-if`,!0),!F(v)||F(v)&&!e.showFileList?(f(),E(Xe,re({key:1,ref_key:`uploadRef`,ref:a},F(y)),{default:N(()=>[e.$slots.trigger?S(e.$slots,`trigger`,{key:0}):M(`v-if`,!0),!e.$slots.trigger&&e.$slots.default?S(e.$slots,`default`,{key:1}):M(`v-if`,!0)]),_:3},16)):M(`v-if`,!0),e.$slots.trigger?S(e.$slots,`default`,{key:2}):M(`v-if`,!0),S(e.$slots,`tip`),!F(v)&&e.showFileList?(f(),E(We,{key:3,disabled:F(i),"list-type":e.listType,files:F(l),crossorigin:e.crossorigin,"handle-preview":e.onPreview,onRemove:F(p)},pe({_:2},[e.$slots.file?{name:`default`,fn:N(({file:t,index:n})=>[S(e.$slots,`file`,{file:t,index:n})])}:void 0]),1032,[`disabled`,`list-type`,`files`,`crossorigin`,`handle-preview`,`onRemove`])):M(`v-if`,!0)]))}}),[[`__file`,`upload.vue`]])),tt=typeof window<`u`&&window.document!==void 0,V=tt?window:{},nt=tt?`ontouchstart`in V.document.documentElement:!1,rt=tt?`PointerEvent`in V:!1,H=`cropper`,U=`${H}-canvas`,it=`${H}-crosshair`,at=`${H}-grid`,ot=`${H}-handle`,W=`${H}-image`,G=`${H}-selection`,st=`${H}-shade`,ct=`${H}-viewer`,lt=`select`,ut=`move`,dt=`scale`,ft=`rotate`,pt=`transform`,mt=`none`,ht=`n-resize`,gt=`e-resize`,_t=`s-resize`,vt=`w-resize`,yt=`ne-resize`,bt=`nw-resize`,xt=`se-resize`,St=`sw-resize`,Ct=nt?`touchend touchcancel`:`mouseup`,wt=nt?`touchmove`:`mousemove`,Tt=rt?`pointerdown`:nt?`touchstart`:`mousedown`,Et=rt?`pointermove`:wt,Dt=rt?`pointerup pointercancel`:Ct,Ot=`error`,kt=`keydown`,K=`load`,At=`wheel`,q=`action`,jt=`actionend`,Mt=`actionstart`,J=`change`,Nt=`transform`;function Pt(e){return typeof e==`string`}var Ft=Number.isNaN||V.isNaN;function Y(e){return typeof e==`number`&&!Ft(e)}function X(e){return Y(e)&&e>0&&e<1/0}function It(e){return e===void 0}function Lt(e){return typeof e==`object`&&!!e}var{hasOwnProperty:Rt}=Object.prototype;function zt(e){if(!Lt(e))return!1;try{let{constructor:t}=e,{prototype:n}=t;return t&&n&&Rt.call(n,`isPrototypeOf`)}catch{return!1}}function Bt(e){return typeof e==`function`}function Vt(e){return typeof e==`object`&&!!e&&e.nodeType===1}var Ht=/([a-z\d])([A-Z])/g;function Ut(e){return String(e).replace(Ht,`$1-$2`).toLowerCase()}var Wt=/-[A-z\d]/g;function Gt(e){return e.replace(Wt,e=>e.slice(1).toUpperCase())}var Kt=/\s\s*/;function Z(e,t,n,r){t.trim().split(Kt).forEach(t=>{e.removeEventListener(t,n,r)})}function Q(e,t,n,r){t.trim().split(Kt).forEach(t=>{e.addEventListener(t,n,r)})}function qt(e,t,n,r){Q(e,t,n,Object.assign(Object.assign({},r),{once:!0}))}var Jt={bubbles:!0,cancelable:!0,composed:!0};function Yt(e,t,n,r){return e.dispatchEvent(new CustomEvent(t,Object.assign(Object.assign(Object.assign({},Jt),{detail:n}),r)))}function Xt(e){return typeof e.composedPath==`function`&&e.composedPath().find(Vt)||e.target}var Zt=Promise.resolve();function Qt(e,t){return t?Zt.then(e?t.bind(e):t):Zt}function $t(e){let t=e.getRootNode();switch(t.nodeType){case 1:return t.ownerDocument;case 9:return t;case 11:return t}return null}function en(e){let{documentElement:t}=e.ownerDocument,n=e.getBoundingClientRect();return{left:n.left+(V.pageXOffset-t.clientLeft),top:n.top+(V.pageYOffset-t.clientTop)}}var tn=/deg|g?rad|turn$/i;function nn(e){let t=parseFloat(e)||0;if(t!==0){let[n=`rad`]=String(e).match(tn)||[];switch(n.toLowerCase()){case`deg`:return t/360*(Math.PI*2);case`grad`:return t/400*(Math.PI*2);case`turn`:return t*(Math.PI*2)}}return t}var rn=`contain`,an=`cover`;function on(e,t=rn){let{aspectRatio:n}=e,{width:r,height:i}=e,a=X(r),o=X(i);if(a&&o){let e=i*n;t===rn&&e>r||t===an&&e<r?i=r/n:r=i*n}else a?i=r/n:o&&(r=i*n);return{width:r,height:i}}function sn(e,...t){if(t.length===0)return e;let[n,r,i,a,o,s]=e,[c,l,u,d,f,p]=t[0];return e=[n*c+i*l,r*c+a*l,n*u+i*d,r*u+a*d,n*f+i*p+o,r*f+a*p+s],sn(e,...t.slice(1))}var cn=`:host([hidden]){display:none!important}`,ln=/left|top|width|height/i,un=`open`,dn=new WeakMap,fn=new WeakMap,pn=new Map,mn=V.document&&Array.isArray(V.document.adoptedStyleSheets)&&`replaceSync`in V.CSSStyleSheet.prototype,$=class extends HTMLElement{get $sharedStyle(){return`${this.themeColor?`:host{--theme-color: ${this.themeColor};}`:``}${cn}`}constructor(){super(),this.shadowRootMode=un,this.slottable=!0;let e=Object.getPrototypeOf(this)?.constructor?.$name;e&&pn.set(e,this.tagName.toLowerCase())}static get observedAttributes(){return[`shadow-root-mode`,`slottable`,`theme-color`]}attributeChangedCallback(e,t,n){if(Object.is(n,t))return;let r=Gt(e),i=this[r],a=n;switch(typeof i){case`boolean`:a=n!==null&&n!==`false`;break;case`number`:a=Number(n);break}switch(this[r]=a,e){case`theme-color`:{let e=fn.get(this),t=this.$sharedStyle;e&&t&&(mn?e.replaceSync(t):e.textContent=t);break}}}$propertyChangedCallback(e,t,n){if(!Object.is(n,t))switch(e=Ut(e),typeof n){case`boolean`:n===!0?this.hasAttribute(e)||this.setAttribute(e,``):this.removeAttribute(e);break;case`number`:n=Ft(n)?``:String(n);default:n?this.getAttribute(e)!==n&&this.setAttribute(e,n):this.removeAttribute(e)}}connectedCallback(){Object.getPrototypeOf(this).constructor.observedAttributes.forEach(e=>{let t=Gt(e),n=this[t];It(n)||this.$propertyChangedCallback(t,void 0,n),Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get(){return n},set(e){let r=n;n=e,this.$propertyChangedCallback(t,r,e)}})});let e=this.shadowRoot||this.attachShadow({mode:this.shadowRootMode||un});if(dn.set(this,e),fn.set(this,this.$addStyles(this.$sharedStyle)),this.$style&&this.$addStyles(this.$style),this.$template){let t=document.createElement(`template`);t.innerHTML=this.$template,e.appendChild(t.content)}if(this.slottable){let t=document.createElement(`slot`);e.appendChild(t)}}disconnectedCallback(){fn.has(this)&&fn.delete(this),dn.has(this)&&dn.delete(this)}$getTagNameOf(e){return pn.get(e)??e}$setStyles(e){return Object.keys(e).forEach(t=>{let n=e[t];Y(n)&&(n=n!==0&&ln.test(t)?`${n}px`:String(n)),this.style[t]=n}),this}$getShadowRoot(){return this.shadowRoot||dn.get(this)}$addStyles(e){let t,n=this.$getShadowRoot();return mn?(t=new CSSStyleSheet,t.replaceSync(e),n.adoptedStyleSheets=n.adoptedStyleSheets.concat(t)):(t=document.createElement(`style`),t.textContent=e,n.appendChild(t)),t}$emit(e,t,n){return Yt(this,e,t,n)}$nextTick(e){return Qt(this,e)}static $define(e,t){Lt(e)&&(t=e,e=``),e||=this.$name||this.name,e=Ut(e),tt&&V.customElements&&!V.customElements.get(e)&&customElements.define(e,this,t)}};$.$version=`2.1.0`;var hn=`:host{display:block;min-height:100px;min-width:200px;overflow:hidden;position:relative;touch-action:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host([background]){background-color:#fff;background-image:repeating-linear-gradient(45deg,#ccc 25%,transparent 0,transparent 75%,#ccc 0,#ccc),repeating-linear-gradient(45deg,#ccc 25%,transparent 0,transparent 75%,#ccc 0,#ccc);background-image:repeating-conic-gradient(#ccc 0 25%,#fff 0 50%);background-position:0 0,.5rem .5rem;background-size:1rem 1rem}:host([disabled]){pointer-events:none}:host([disabled]):after{bottom:0;content:"";cursor:not-allowed;display:block;left:0;pointer-events:none;position:absolute;right:0;top:0}`,gn=class extends ${constructor(){super(...arguments),this.$onPointerDown=null,this.$onPointerMove=null,this.$onPointerUp=null,this.$onWheel=null,this.$wheeling=!1,this.$pointers=new Map,this.$style=hn,this.$action=mt,this.background=!1,this.disabled=!1,this.scaleStep=.1,this.themeColor=`#39f`}static get observedAttributes(){return super.observedAttributes.concat([`background`,`disabled`,`scale-step`])}connectedCallback(){super.connectedCallback(),this.disabled||this.$bind()}disconnectedCallback(){this.disabled||this.$unbind(),super.disconnectedCallback()}$propertyChangedCallback(e,t,n){if(!Object.is(n,t))switch(super.$propertyChangedCallback(e,t,n),e){case`disabled`:n?this.$unbind():this.$bind();break}}$bind(){this.$onPointerDown||(this.$onPointerDown=this.$handlePointerDown.bind(this),Q(this,Tt,this.$onPointerDown)),this.$onPointerMove||(this.$onPointerMove=this.$handlePointerMove.bind(this),Q(this.ownerDocument,Et,this.$onPointerMove)),this.$onPointerUp||(this.$onPointerUp=this.$handlePointerUp.bind(this),Q(this.ownerDocument,Dt,this.$onPointerUp)),this.$onWheel||(this.$onWheel=this.$handleWheel.bind(this),Q(this,At,this.$onWheel,{passive:!1,capture:!0}))}$unbind(){this.$onPointerDown&&=(Z(this,Tt,this.$onPointerDown),null),this.$onPointerMove&&=(Z(this.ownerDocument,Et,this.$onPointerMove),null),this.$onPointerUp&&=(Z(this.ownerDocument,Dt,this.$onPointerUp),null),this.$onWheel&&=(Z(this,At,this.$onWheel,{capture:!0}),null)}$handlePointerDown(e){let{buttons:t,button:n,type:r}=e;if(this.disabled||(r===`pointerdown`&&e.pointerType===`mouse`||r===`mousedown`)&&(Y(t)&&t!==1||Y(n)&&n!==0||e.ctrlKey))return;let{$pointers:i}=this,a=``;if(e.changedTouches)Array.from(e.changedTouches).forEach(({identifier:e,pageX:t,pageY:n})=>{i.set(e,{startX:t,startY:n,endX:t,endY:n})});else{let{pointerId:t=0,pageX:n,pageY:r}=e;i.set(t,{startX:n,startY:r,endX:n,endY:r})}i.size>1?a=pt:Vt(e.target)&&(a=e.target.action||e.target.getAttribute(`action`)||``),this.$emit(`actionstart`,{action:a,relatedEvent:e})!==!1&&(e.preventDefault(),this.$action=a,this.style.willChange=`transform`)}$handlePointerMove(e){let{$action:t,$pointers:n}=this;if(this.disabled||t===`none`||n.size===0||this.$emit(`actionmove`,{action:t,relatedEvent:e})===!1)return;if(e.preventDefault(),e.changedTouches)Array.from(e.changedTouches).forEach(({identifier:e,pageX:t,pageY:r})=>{let i=n.get(e);i&&Object.assign(i,{endX:t,endY:r})});else{let{pointerId:t=0,pageX:r,pageY:i}=e,a=n.get(t);a&&Object.assign(a,{endX:r,endY:i})}let r={action:t,relatedEvent:e};if(t===`transform`){let t=new Map(n),i=0,a=0,o=0,s=0,c=e.pageX,l=e.pageY;n.forEach((e,n)=>{t.delete(n),t.forEach(t=>{let n=t.startX-e.startX,r=t.startY-e.startY,u=t.endX-e.endX,d=t.endY-e.endY,f=0,p=0,m=0,h=0;if(n===0?r<0?m=Math.PI*2:r>0&&(m=Math.PI):n>0?m=Math.PI/2+Math.atan(r/n):n<0&&(m=Math.PI*1.5+Math.atan(r/n)),u===0?d<0?h=Math.PI*2:d>0&&(h=Math.PI):u>0?h=Math.PI/2+Math.atan(d/u):u<0&&(h=Math.PI*1.5+Math.atan(d/u)),h>0||m>0){let n=h-m,r=Math.abs(n);r>i&&(i=r,o=n,c=(e.startX+t.startX)/2,l=(e.startY+t.startY)/2)}if(n=Math.abs(n),r=Math.abs(r),u=Math.abs(u),d=Math.abs(d),n>0&&r>0?f=Math.sqrt(n*n+r*r):n>0?f=n:r>0&&(f=r),u>0&&d>0?p=Math.sqrt(u*u+d*d):u>0?p=u:d>0&&(p=d),f>0&&p>0){let n=(p-f)/f,r=Math.abs(n);r>a&&(a=r,s=n,c=(e.startX+t.startX)/2,l=(e.startY+t.startY)/2)}})});let u=i>0,d=a>0;u&&d?(r.rotate=o,r.scale=s,r.centerX=c,r.centerY=l):u?(r.action=ft,r.rotate=o,r.centerX=c,r.centerY=l):d?(r.action=dt,r.scale=s,r.centerX=c,r.centerY=l):r.action=mt}else{let[e]=Array.from(n.values());Object.assign(r,e)}n.forEach(e=>{e.startX=e.endX,e.startY=e.endY}),r.action!==`none`&&this.$emit(q,r,{cancelable:!1})}$handlePointerUp(e){let{$action:t,$pointers:n}=this;if(!(this.disabled||t===`none`)&&this.$emit(`actionend`,{action:t,relatedEvent:e})!==!1){if(e.preventDefault(),e.changedTouches)Array.from(e.changedTouches).forEach(({identifier:e})=>{n.delete(e)});else{let{pointerId:t=0}=e;n.delete(t)}n.size===0&&(this.style.willChange=``,this.$action=mt)}}$handleWheel(e){if(this.disabled||(e.preventDefault(),this.$wheeling))return;this.$wheeling=!0,setTimeout(()=>{this.$wheeling=!1},50);let t=(e.deltaY>0?-1:1)*this.scaleStep;this.$emit(q,{action:dt,scale:t,relatedEvent:e},{cancelable:!1})}$setAction(e){return Pt(e)&&(this.$action=e),this}$toCanvas(e){return new Promise((t,n)=>{if(!this.isConnected){n(Error(`The current element is not connected to the DOM.`));return}let r=document.createElement(`canvas`),i=this.offsetWidth,a=this.offsetHeight,o=1;zt(e)&&(X(e.width)||X(e.height))&&({width:i,height:a}=on({aspectRatio:i/a,width:e.width,height:e.height}),o=i/this.offsetWidth),r.width=i,r.height=a;let s=this.querySelector(this.$getTagNameOf(W));if(!s){t(r);return}s.$ready().then(n=>{let c=r.getContext(`2d`);if(c){let[t,l,u,d,f,p]=s.$getTransform(),m=f,h=p,g=n.naturalWidth,_=n.naturalHeight;o!==1&&(m*=o,h*=o,g*=o,_*=o);let v=g/2,y=_/2;c.fillStyle=`transparent`,c.fillRect(0,0,i,a),zt(e)&&Bt(e.beforeDraw)&&e.beforeDraw.call(this,c,r),c.save(),c.translate(v,y),c.transform(t,l,u,d,m,h),c.translate(-v,-y),c.drawImage(n,0,0,g,_),c.restore()}t(r)}).catch(n)})}};gn.$name=U,gn.$version=`2.1.0`;var _n=`:host{display:inline-block}img{display:block;height:100%;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}`,vn=new WeakMap,yn=[`alt`,`crossorigin`,`decoding`,`elementtiming`,`fetchpriority`,`loading`,`referrerpolicy`,`sizes`,`src`,`srcset`],bn=class extends ${constructor(){super(...arguments),this.$matrix=[1,0,0,1,0,0],this.$onLoad=null,this.$onCanvasAction=null,this.$onCanvasActionEnd=null,this.$onCanvasActionStart=null,this.$actionStartTarget=null,this.$style=_n,this.$image=new Image,this.initialCenterSize=`contain`,this.rotatable=!1,this.scalable=!1,this.skewable=!1,this.slottable=!1,this.translatable=!1,this.alt=``,this.crossorigin=``,this.decoding=``,this.elementtiming=``,this.fetchpriority=``,this.loading=``,this.referrerpolicy=``,this.sizes=``,this.src=``,this.srcset=``}set $canvas(e){vn.set(this,e)}get $canvas(){return vn.get(this)}static get observedAttributes(){return super.observedAttributes.concat(yn,[`initial-center-size`,`rotatable`,`scalable`,`skewable`,`translatable`])}attributeChangedCallback(e,t,n){Object.is(n,t)||(super.attributeChangedCallback(e,t,n),yn.includes(e)&&this.$image.setAttribute(e,n))}$propertyChangedCallback(e,t,n){if(!Object.is(n,t))switch(super.$propertyChangedCallback(e,t,n),e){case`initialCenterSize`:this.$nextTick(()=>{this.$center(n)});break}}connectedCallback(){super.connectedCallback();let{$image:e}=this,t=this.closest(this.$getTagNameOf(U));t&&(this.$canvas=t,this.$setStyles({display:`block`,position:`absolute`}),this.$onCanvasActionStart=e=>{this.$actionStartTarget=e.detail?.relatedEvent?.target},this.$onCanvasActionEnd=()=>{this.$actionStartTarget=null},this.$onCanvasAction=this.$handleAction.bind(this),Q(t,Mt,this.$onCanvasActionStart),Q(t,jt,this.$onCanvasActionEnd),Q(t,q,this.$onCanvasAction)),this.$onLoad=this.$handleLoad.bind(this),Q(e,K,this.$onLoad),this.$getShadowRoot().appendChild(e)}disconnectedCallback(){let{$image:e,$canvas:t}=this;t&&(this.$onCanvasActionStart&&=(Z(t,Mt,this.$onCanvasActionStart),null),this.$onCanvasActionEnd&&=(Z(t,jt,this.$onCanvasActionEnd),null),this.$onCanvasAction&&=(Z(t,q,this.$onCanvasAction),null)),e&&this.$onLoad&&(Z(e,K,this.$onLoad),this.$onLoad=null),this.$getShadowRoot().removeChild(e),super.disconnectedCallback()}$handleLoad(){let{$image:e}=this;this.$setStyles({width:e.naturalWidth,height:e.naturalHeight}),this.$canvas&&this.$center(this.initialCenterSize)}$handleAction(e){if(this.hidden||!(this.rotatable||this.scalable||this.translatable))return;let{$canvas:t}=this,{detail:n}=e;if(n){let{relatedEvent:e}=n,{action:r}=n;switch(r===`transform`&&(!this.rotatable||!this.scalable)&&(r=this.rotatable?ft:this.scalable?dt:mt),r){case ut:if(this.translatable){let r=null;e&&(r=e.target.closest(this.$getTagNameOf(G))),r||=t.querySelector(this.$getTagNameOf(G)),r&&r.multiple&&!r.active&&(r=t.querySelector(`${this.$getTagNameOf(G)}[active]`)),(!r||r.hidden||!r.movable||r.dynamic||!(this.$actionStartTarget&&r.contains(this.$actionStartTarget)))&&this.$move(n.endX-n.startX,n.endY-n.startY)}break;case ft:if(this.rotatable)if(e){let{x:t,y:r}=this.getBoundingClientRect();this.$rotate(n.rotate,e.clientX-t,e.clientY-r)}else this.$rotate(n.rotate);break;case dt:if(this.scalable)if(e){let t=e.target.closest(this.$getTagNameOf(G));if(!t||!t.zoomable||t.zoomable&&t.dynamic){let{x:t,y:r}=this.getBoundingClientRect();this.$zoom(n.scale,e.clientX-t,e.clientY-r)}}else this.$zoom(n.scale);break;case pt:if(this.rotatable&&this.scalable){let{rotate:t}=n,{scale:r}=n;r<0?r=1/(1-r):r+=1;let i=Math.cos(t),a=Math.sin(t),[o,s,c,l]=[i*r,a*r,-a*r,i*r];if(e){let t=this.getBoundingClientRect(),n=e.clientX-t.x,r=e.clientY-t.y,[i,a,u,d]=this.$matrix,f=t.width/2,p=t.height/2,m=n-f,h=r-p,g=(m*d-u*h)/(i*d-u*a),_=(h*i-a*m)/(i*d-u*a);this.$transform(o,s,c,l,g*(1-o)+_*c,_*(1-l)+g*s)}else this.$transform(o,s,c,l,0,0)}break}}}$ready(e){let{$image:t}=this,n=new Promise((e,n)=>{let r=Error(`Failed to load the image source`);if(t.complete)t.naturalWidth>0&&t.naturalHeight>0?e(t):n(r);else{let i=()=>{Z(t,Ot,a),setTimeout(()=>{e(t)})},a=()=>{Z(t,K,i),n(r)};qt(t,K,i),qt(t,Ot,a)}});return Bt(e)&&n.then(t=>(e(t),t)),n}$center(e){let{parentElement:t}=this;if(!t)return this;let n=t.getBoundingClientRect(),r=n.width,i=n.height,{x:a,y:o,width:s,height:c}=this.getBoundingClientRect(),l=a+s/2,u=o+c/2,d=n.x+r/2,f=n.y+i/2;if(this.$move(d-l,f-u),e&&(s!==r||c!==i)){let t=r/s,n=i/c;switch(e){case`cover`:this.$scale(Math.max(t,n));break;case`contain`:this.$scale(Math.min(t,n));break}}return this}$move(e,t=e){if(this.translatable&&Y(e)&&Y(t)){let[n,r,i,a]=this.$matrix,o=(e*a-i*t)/(n*a-i*r),s=(t*n-r*e)/(n*a-i*r);this.$translate(o,s)}return this}$moveTo(e,t=e){if(this.translatable&&Y(e)&&Y(t)){let[n,r,i,a]=this.$matrix,o=(e*a-i*t)/(n*a-i*r),s=(t*n-r*e)/(n*a-i*r);this.$setTransform(n,r,i,a,o,s)}return this}$rotate(e,t,n){if(this.rotatable){let r=nn(e),i=Math.cos(r),a=Math.sin(r),[o,s,c,l]=[i,a,-a,i];if(Y(t)&&Y(n)){let[e,r,i,a]=this.$matrix,{width:u,height:d}=this.getBoundingClientRect(),f=u/2,p=d/2,m=t-f,h=n-p,g=(m*a-i*h)/(e*a-i*r),_=(h*e-r*m)/(e*a-i*r);this.$transform(o,s,c,l,g*(1-o)-_*c,_*(1-l)-g*s)}else this.$transform(o,s,c,l,0,0)}return this}$zoom(e,t,n){if(!this.scalable||e===0)return this;if(e<0?e=1/(1-e):e+=1,Y(t)&&Y(n)){let[r,i,a,o]=this.$matrix,{width:s,height:c}=this.getBoundingClientRect(),l=s/2,u=c/2,d=t-l,f=n-u,p=(d*o-a*f)/(r*o-a*i),m=(f*r-i*d)/(r*o-a*i);this.$transform(e,0,0,e,p*(1-e),m*(1-e))}else this.$scale(e);return this}$scale(e,t=e){return this.scalable&&this.$transform(e,0,0,t,0,0),this}$skew(e,t=0){if(this.skewable){let n=nn(e),r=nn(t);this.$transform(1,Math.tan(r),Math.tan(n),1,0,0)}return this}$translate(e,t=e){return this.translatable&&Y(e)&&Y(t)&&this.$transform(1,0,0,1,e,t),this}$transform(e,t,n,r,i,a){return Y(e)&&Y(t)&&Y(n)&&Y(r)&&Y(i)&&Y(a)?this.$setTransform(sn(this.$matrix,[e,t,n,r,i,a])):this}$setTransform(e,t,n,r,i,a){if((this.rotatable||this.scalable||this.skewable||this.translatable)&&(Array.isArray(e)&&([e,t,n,r,i,a]=e),Y(e)&&Y(t)&&Y(n)&&Y(r)&&Y(i)&&Y(a))){let o=[...this.$matrix],s=[e,t,n,r,i,a];if(this.$emit(`transform`,{matrix:s,oldMatrix:o})===!1)return this;this.$matrix=s,this.style.transform=`matrix(${s.join(`, `)})`}return this}$getTransform(){return this.$matrix.slice()}$resetTransform(){return this.$setTransform([1,0,0,1,0,0])}};bn.$name=W,bn.$version=`2.1.0`;var xn=`:host{display:block;height:0;left:0;outline:var(--theme-color) solid 1px;position:relative;top:0;width:0}:host([transparent]){outline-color:transparent}`,Sn=new WeakMap,Cn=class extends ${constructor(){super(...arguments),this.$onCanvasActionEnd=null,this.$onCanvasActionStart=null,this.$onSelectionChange=null,this.$style=xn,this.x=0,this.y=0,this.width=0,this.height=0,this.slottable=!1,this.themeColor=`rgba(0, 0, 0, 0.65)`}set $canvas(e){Sn.set(this,e)}get $canvas(){return Sn.get(this)}static get observedAttributes(){return super.observedAttributes.concat([`height`,`width`,`x`,`y`])}connectedCallback(){super.connectedCallback();let e=this.closest(this.$getTagNameOf(U));if(e){this.$canvas=e,this.style.position=`absolute`;let t=e.querySelector(this.$getTagNameOf(G));t&&(this.$onCanvasActionStart=e=>{t.hidden&&e.detail.action===`select`&&(this.hidden=!1)},this.$onCanvasActionEnd=e=>{t.hidden&&e.detail.action===`select`&&(this.hidden=!0)},this.$onSelectionChange=e=>{let{x:n,y:r,width:i,height:a}=e.defaultPrevented?t:e.detail;this.$change(n,r,i,a),(t.hidden||n===0&&r===0&&i===0&&a===0)&&(this.hidden=!0)},Q(e,Mt,this.$onCanvasActionStart),Q(e,jt,this.$onCanvasActionEnd),Q(e,J,this.$onSelectionChange))}this.$render()}disconnectedCallback(){let{$canvas:e}=this;e&&(this.$onCanvasActionStart&&=(Z(e,Mt,this.$onCanvasActionStart),null),this.$onCanvasActionEnd&&=(Z(e,jt,this.$onCanvasActionEnd),null),this.$onSelectionChange&&=(Z(e,J,this.$onSelectionChange),null)),super.disconnectedCallback()}$change(e,t,n=this.width,r=this.height){return!Y(e)||!Y(t)||!Y(n)||!Y(r)||e===this.x&&t===this.y&&n===this.width&&r===this.height?this:(this.hidden&&=!1,this.x=e,this.y=t,this.width=n,this.height=r,this.$render())}$reset(){return this.$change(0,0,0,0)}$render(){return this.$setStyles({transform:`translate(${this.x}px, ${this.y}px)`,width:this.width,height:this.height,outlineWidth:V.innerWidth})}};Cn.$name=st,Cn.$version=`2.1.0`;var wn=`:host{background-color:var(--theme-color);display:block}:host([action=move]),:host([action=select]){height:100%;left:0;position:absolute;top:0;width:100%}:host([action=move]){cursor:move}:host([action=select]){cursor:crosshair}:host([action$=-resize]){background-color:transparent;height:15px;position:absolute;width:15px}:host([action$=-resize]):after{background-color:var(--theme-color);content:"";display:block;height:5px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:5px}:host([action=n-resize]),:host([action=s-resize]){cursor:ns-resize;left:50%;transform:translateX(-50%);width:100%}:host([action=n-resize]){top:-8px}:host([action=s-resize]){bottom:-8px}:host([action=e-resize]),:host([action=w-resize]){cursor:ew-resize;height:100%;top:50%;transform:translateY(-50%)}:host([action=e-resize]){right:-8px}:host([action=w-resize]){left:-8px}:host([action=ne-resize]){cursor:nesw-resize;right:-8px;top:-8px}:host([action=nw-resize]){cursor:nwse-resize;left:-8px;top:-8px}:host([action=se-resize]){bottom:-8px;cursor:nwse-resize;right:-8px}:host([action=se-resize]):after{height:15px;width:15px}@media (pointer:coarse){:host([action=se-resize]):after{height:10px;width:10px}}@media (pointer:fine){:host([action=se-resize]):after{height:5px;width:5px}}:host([action=sw-resize]){bottom:-8px;cursor:nesw-resize;left:-8px}:host([plain]){background-color:transparent}`,Tn=class extends ${constructor(){super(...arguments),this.$onCanvasCropEnd=null,this.$onCanvasCropStart=null,this.$style=wn,this.action=mt,this.plain=!1,this.slottable=!1,this.themeColor=`rgba(51, 153, 255, 0.5)`}static get observedAttributes(){return super.observedAttributes.concat([`action`,`plain`])}};Tn.$name=ot,Tn.$version=`2.1.0`;var En=`:host{display:block;left:0;position:relative;right:0}:host([outlined]){outline:1px solid var(--theme-color)}:host([multiple]){outline:1px dashed hsla(0,0%,100%,.5)}:host([multiple]):after{bottom:0;content:"";cursor:pointer;display:block;left:0;position:absolute;right:0;top:0}:host([multiple][active]){outline-color:var(--theme-color);z-index:1}:host([multiple])>*{visibility:hidden}:host([multiple][active])>*{visibility:visible}:host([multiple][active]):after{display:none}`,Dn=new WeakMap,On=class extends ${constructor(){super(...arguments),this.$onCanvasAction=null,this.$onCanvasActionStart=null,this.$onCanvasActionEnd=null,this.$onDocumentKeyDown=null,this.$action=``,this.$actionStartTarget=null,this.$changing=!1,this.$style=En,this.$initialSelection={x:0,y:0,width:0,height:0},this.x=0,this.y=0,this.width=0,this.height=0,this.aspectRatio=NaN,this.initialAspectRatio=NaN,this.initialCoverage=NaN,this.active=!1,this.linked=!1,this.dynamic=!1,this.movable=!1,this.resizable=!1,this.zoomable=!1,this.multiple=!1,this.keyboard=!1,this.outlined=!1,this.precise=!1}set $canvas(e){Dn.set(this,e)}get $canvas(){return Dn.get(this)}static get observedAttributes(){return super.observedAttributes.concat([`active`,`aspect-ratio`,`dynamic`,`height`,`initial-aspect-ratio`,`initial-coverage`,`keyboard`,`linked`,`movable`,`multiple`,`outlined`,`precise`,`resizable`,`width`,`x`,`y`,`zoomable`])}$propertyChangedCallback(e,t,n){if(!Object.is(n,t))switch(super.$propertyChangedCallback(e,t,n),e){case`x`:case`y`:case`width`:case`height`:this.$changing||this.$nextTick(()=>{this.$change(this.x,this.y,this.width,this.height,this.aspectRatio,!0)});break;case`aspectRatio`:case`initialAspectRatio`:this.$nextTick(()=>{this.$initSelection()});break;case`initialCoverage`:this.$nextTick(()=>{X(n)&&n<=1&&this.$initSelection(!0,!0)});break;case`keyboard`:this.$nextTick(()=>{this.$canvas&&(n?this.$onDocumentKeyDown||(this.$onDocumentKeyDown=this.$handleKeyDown.bind(this),Q(this.ownerDocument,kt,this.$onDocumentKeyDown)):this.$onDocumentKeyDown&&=(Z(this.ownerDocument,kt,this.$onDocumentKeyDown),null))});break;case`multiple`:this.$nextTick(()=>{if(this.$canvas){let e=this.$getSelections();n?(e.forEach(e=>{e.active=!1}),this.active=!0,this.$emit(J,{x:this.x,y:this.y,width:this.width,height:this.height})):(this.active=!1,e.slice(1).forEach(e=>{this.$removeSelection(e)}))}});break;case`precise`:this.$nextTick(()=>{this.$change(this.x,this.y)});break;case`linked`:n&&(this.dynamic=!0);break}}connectedCallback(){super.connectedCallback();let e=this.closest(this.$getTagNameOf(U));e?(this.$canvas=e,this.$setStyles({position:`absolute`,transform:`translate(${this.x}px, ${this.y}px)`}),this.hidden||this.$render(),this.$initSelection(!0),this.$onCanvasActionStart=this.$handleActionStart.bind(this),this.$onCanvasActionEnd=this.$handleActionEnd.bind(this),this.$onCanvasAction=this.$handleAction.bind(this),Q(e,Mt,this.$onCanvasActionStart),Q(e,jt,this.$onCanvasActionEnd),Q(e,q,this.$onCanvasAction)):this.$render()}disconnectedCallback(){let{$canvas:e}=this;e&&(this.$onCanvasActionStart&&=(Z(e,Mt,this.$onCanvasActionStart),null),this.$onCanvasActionEnd&&=(Z(e,jt,this.$onCanvasActionEnd),null),this.$onCanvasAction&&=(Z(e,q,this.$onCanvasAction),null)),super.disconnectedCallback()}$getSelections(){let e=[];return this.parentElement&&(e=Array.from(this.parentElement.querySelectorAll(this.$getTagNameOf(G)))),e}$initSelection(e=!1,t=!1){let{initialCoverage:n,parentElement:r}=this;if(X(n)&&r){let i=this.aspectRatio||this.initialAspectRatio,a=(t?0:this.width)||r.offsetWidth*n,o=(t?0:this.height)||r.offsetHeight*n;X(i)&&({width:a,height:o}=on({aspectRatio:i,width:a,height:o})),this.$change(this.x,this.y,a,o),e&&this.$center(),this.$initialSelection={x:this.x,y:this.y,width:this.width,height:this.height}}}$createSelection(){let e=this.cloneNode(!0);return this.hasAttribute(`id`)&&e.removeAttribute(`id`),e.initialCoverage=NaN,this.active=!1,this.parentElement&&this.parentElement.insertBefore(e,this.nextSibling),e}$removeSelection(e=this){if(this.parentElement){let t=this.$getSelections();if(t.length>1){let n=t.indexOf(e),r=t[n+1]||t[n-1];r&&(e.active=!1,this.parentElement.removeChild(e),r.active=!0,r.$emit(J,{x:r.x,y:r.y,width:r.width,height:r.height}))}else this.$clear()}}$handleActionStart(e){let t=e.detail?.relatedEvent?.target;this.$action=``,this.$actionStartTarget=t,!this.hidden&&this.multiple&&!this.active&&t===this&&this.parentElement&&(this.$getSelections().forEach(e=>{e.active=!1}),this.active=!0,this.$emit(J,{x:this.x,y:this.y,width:this.width,height:this.height}))}$handleAction(e){let{currentTarget:t,detail:n}=e;if(!t||!n)return;let{relatedEvent:r}=n,{action:i}=n,a=r?Xt(r):null;if(!i&&this.multiple&&(i=this.$action||a?.action,this.$action=i),!i||this.hidden&&i!==`select`||this.multiple&&!this.active&&i!==`scale`)return;let{width:o,height:s}=this,c=n.endX-n.startX,l=n.endY-n.startY,{aspectRatio:u}=this;switch(!X(u)&&r.shiftKey&&(u=X(o)&&X(s)?o/s:1),i){case lt:if(c!==0||l!==0){c===0?c=l:l===0&&(l=c);let{$canvas:e}=this,r=en(t);(this.multiple&&!this.hidden?this.$createSelection():this).$change(n.startX-r.left,n.startY-r.top,Math.abs(c),Math.abs(l),u),c<0?l<0?i=bt:l>0&&(i=St):c>0&&(l<0?i=yt:l>0&&(i=xt)),e&&(e.$action=i)}break;case ut:this.movable&&(this.dynamic||this.$actionStartTarget&&this.contains(this.$actionStartTarget))&&this.$move(c,l);break;case dt:if(r&&this.zoomable&&(this.dynamic||this.contains(r.target))){let e=en(t);this.$zoom(n.scale,r.pageX-e.left,r.pageY-e.top)}break;default:this.$resize(i,c,l,u)}}$handleActionEnd(){this.$action=``,this.$actionStartTarget=null}$handleKeyDown(e){if(this.hidden||!this.keyboard||this.multiple&&!this.active||e.defaultPrevented)return;let{activeElement:t}=document;if(!(t&&([`INPUT`,`TEXTAREA`].includes(t.tagName)||[`true`,`plaintext-only`].includes(t.contentEditable))))switch(e.key){case`Backspace`:e.metaKey&&(e.preventDefault(),this.$removeSelection());break;case`Delete`:e.preventDefault(),this.$removeSelection();break;case`ArrowLeft`:e.preventDefault(),this.$move(-1,0);break;case`ArrowRight`:e.preventDefault(),this.$move(1,0);break;case`ArrowUp`:e.preventDefault(),this.$move(0,-1);break;case`ArrowDown`:e.preventDefault(),this.$move(0,1);break;case`+`:e.preventDefault(),this.$zoom(.1);break;case`-`:e.preventDefault(),this.$zoom(-.1);break}}$center(){let{parentElement:e}=this;if(!e)return this;let t=(e.offsetWidth-this.width)/2,n=(e.offsetHeight-this.height)/2;return this.$change(t,n)}$move(e,t=e){return this.$moveTo(this.x+e,this.y+t)}$moveTo(e,t=e){return this.movable?this.$change(e,t):this}$resize(e,t=0,n=0,r=this.aspectRatio){if(!this.resizable)return this;let i=X(r),{$canvas:a}=this,{x:o,y:s,width:c,height:l}=this;switch(e){case ht:s+=n,l-=n,l<0&&(e=_t,l=-l,s-=l),i&&(t=n*r,o+=t/2,c-=t,c<0&&(c=-c,o-=c));break;case gt:c+=t,c<0&&(e=vt,c=-c,o-=c),i&&(n=t/r,s-=n/2,l+=n,l<0&&(l=-l,s-=l));break;case _t:l+=n,l<0&&(e=ht,l=-l,s-=l),i&&(t=n*r,o-=t/2,c+=t,c<0&&(c=-c,o-=c));break;case vt:o+=t,c-=t,c<0&&(e=gt,c=-c,o-=c),i&&(n=t/r,s+=n/2,l-=n,l<0&&(l=-l,s-=l));break;case yt:i&&(n=-t/r),s+=n,l-=n,c+=t,c<0&&l<0?(e=St,c=-c,l=-l,o-=c,s-=l):c<0?(e=bt,c=-c,o-=c):l<0&&(e=xt,l=-l,s-=l);break;case bt:i&&(n=t/r),o+=t,s+=n,c-=t,l-=n,c<0&&l<0?(e=xt,c=-c,l=-l,o-=c,s-=l):c<0?(e=yt,c=-c,o-=c):l<0&&(e=St,l=-l,s-=l);break;case xt:i&&(n=t/r),c+=t,l+=n,c<0&&l<0?(e=bt,c=-c,l=-l,o-=c,s-=l):c<0?(e=St,c=-c,o-=c):l<0&&(e=yt,l=-l,s-=l);break;case St:i&&(n=-t/r),o+=t,c-=t,l+=n,c<0&&l<0?(e=yt,c=-c,l=-l,o-=c,s-=l):c<0?(e=xt,c=-c,o-=c):l<0&&(e=bt,l=-l,s-=l);break}return a&&a.$setAction(e),this.$change(o,s,c,l)}$zoom(e,t,n){if(!this.zoomable||e===0)return this;e<0?e=1/(1-e):e+=1;let{width:r,height:i}=this,a=r*e,o=i*e,s=this.x,c=this.y;return Y(t)&&Y(n)?(s-=(a-r)*((t-this.x)/r),c-=(o-i)*((n-this.y)/i)):(s-=(a-r)/2,c-=(o-i)/2),this.$change(s,c,a,o)}$change(e,t,n=this.width,r=this.height,i=this.aspectRatio,a=!1){return this.$changing||!Y(e)||!Y(t)||!Y(n)||!Y(r)||n<0||r<0||(X(i)&&({width:n,height:r}=on({aspectRatio:i,width:n,height:r},`cover`)),this.precise||(e=Math.round(e),t=Math.round(t),n=Math.round(n),r=Math.round(r)),e===this.x&&t===this.y&&n===this.width&&r===this.height&&Object.is(i,this.aspectRatio)&&!a)||(this.hidden&&=!1,this.$emit(`change`,{x:e,y:t,width:n,height:r})===!1)?this:(this.$changing=!0,this.x=e,this.y=t,this.width=n,this.height=r,this.$changing=!1,this.$render())}$reset(){let{x:e,y:t,width:n,height:r}=this.$initialSelection;return this.$change(e,t,n,r)}$clear(){return this.$change(0,0,0,0,NaN,!0),this.hidden=!0,this}$render(){return this.$setStyles({transform:`translate(${this.x}px, ${this.y}px)`,width:this.width,height:this.height})}$toCanvas(e){return new Promise((t,n)=>{if(!this.isConnected){n(Error(`The current element is not connected to the DOM.`));return}let r=document.createElement(`canvas`),{width:i,height:a}=this,o=1;if(zt(e)&&(X(e.width)||X(e.height))&&({width:i,height:a}=on({aspectRatio:i/a,width:e.width,height:e.height}),o=i/this.width),r.width=i,r.height=a,!this.$canvas){t(r);return}let s=this.$canvas.querySelector(this.$getTagNameOf(W));if(!s){t(r);return}s.$ready().then(n=>{let c=r.getContext(`2d`);if(c){let[t,l,u,d,f,p]=s.$getTransform(),m=-this.x,h=-this.y,g=(m*d-u*h)/(t*d-u*l),_=(h*t-l*m)/(t*d-u*l),v=t*g+u*_+f,y=l*g+d*_+p,ee=n.naturalWidth,te=n.naturalHeight;o!==1&&(v*=o,y*=o,ee*=o,te*=o);let b=ee/2,x=te/2;c.fillStyle=`transparent`,c.fillRect(0,0,i,a),zt(e)&&Bt(e.beforeDraw)&&e.beforeDraw.call(this,c,r),c.save(),c.translate(b,x),c.transform(t,l,u,d,v,y),c.translate(-b,-x),c.drawImage(n,0,0,ee,te),c.restore()}t(r)}).catch(n)})}};On.$name=G,On.$version=`2.1.0`;var kn=`:host{display:flex;flex-direction:column;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}:host([bordered]){border:1px dashed var(--theme-color)}:host([covered]){bottom:0;left:0;position:absolute;right:0;top:0}:host>span{display:flex;flex:1}:host>span+span{border-top:1px dashed var(--theme-color)}:host>span>span{flex:1}:host>span>span+span{border-left:1px dashed var(--theme-color)}`,An=class extends ${constructor(){super(...arguments),this.$style=kn,this.bordered=!1,this.columns=3,this.covered=!1,this.rows=3,this.slottable=!1,this.themeColor=`rgba(238, 238, 238, 0.5)`}static get observedAttributes(){return super.observedAttributes.concat([`bordered`,`columns`,`covered`,`rows`])}$propertyChangedCallback(e,t,n){Object.is(n,t)||(super.$propertyChangedCallback(e,t,n),(e===`rows`||e===`columns`)&&this.$nextTick(()=>{this.$render()}))}connectedCallback(){super.connectedCallback(),this.$render()}$render(){let e=this.$getShadowRoot(),t=document.createDocumentFragment();for(let e=0;e<this.rows;e+=1){let e=document.createElement(`span`);e.setAttribute(`role`,`row`);for(let t=0;t<this.columns;t+=1){let t=document.createElement(`span`);t.setAttribute(`role`,`gridcell`),e.appendChild(t)}t.appendChild(e)}e&&(e.innerHTML=``,e.appendChild(t))}};An.$name=at,An.$version=`2.1.0`;var jn=`:host{display:inline-block;height:1em;position:relative;touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;width:1em}:host:after,:host:before{background-color:var(--theme-color);content:"";display:block;position:absolute}:host:before{height:1px;left:0;top:50%;transform:translateY(-50%);width:100%}:host:after{height:100%;left:50%;top:0;transform:translateX(-50%);width:1px}:host([centered]){left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}`,Mn=class extends ${constructor(){super(...arguments),this.$style=jn,this.centered=!1,this.slottable=!1,this.themeColor=`rgba(238, 238, 238, 0.5)`}static get observedAttributes(){return super.observedAttributes.concat([`centered`])}};Mn.$name=it,Mn.$version=`2.1.0`;var Nn=`:host{display:block;height:100%;overflow:hidden;position:relative;width:100%}`,Pn=new WeakMap,Fn=new WeakMap,In=new WeakMap,Ln=new WeakMap,Rn=`both`,zn=`horizontal`,Bn=`vertical`,Vn=`none`,Hn=class extends ${constructor(){super(...arguments),this.$onSelectionChange=null,this.$onSourceImageLoad=null,this.$onSourceImageTransform=null,this.$scale=1,this.$style=Nn,this.resize=Bn,this.selection=``,this.slottable=!1}set $image(e){Fn.set(this,e)}get $image(){return Fn.get(this)}set $sourceImage(e){Ln.set(this,e)}get $sourceImage(){return Ln.get(this)}set $canvas(e){Pn.set(this,e)}get $canvas(){return Pn.get(this)}set $selection(e){In.set(this,e)}get $selection(){return In.get(this)}static get observedAttributes(){return super.observedAttributes.concat([`resize`,`selection`])}connectedCallback(){super.connectedCallback();let e=null;if(e=this.selection?$t(this)?.querySelector(this.selection)??null:this.closest(this.$getTagNameOf(G)),Vt(e)){this.$selection=e,this.$onSelectionChange=this.$handleSelectionChange.bind(this),Q(e,J,this.$onSelectionChange);let t=e.closest(this.$getTagNameOf(U));if(t){this.$canvas=t;let e=t.querySelector(this.$getTagNameOf(W));e&&(this.$sourceImage=e,this.$image=e.cloneNode(!0),this.$getShadowRoot().appendChild(this.$image),this.$onSourceImageLoad=this.$handleSourceImageLoad.bind(this),this.$onSourceImageTransform=this.$handleSourceImageTransform.bind(this),Q(e.$image,K,this.$onSourceImageLoad),Q(e,Nt,this.$onSourceImageTransform))}this.$render()}}disconnectedCallback(){let{$selection:e,$sourceImage:t}=this;e&&this.$onSelectionChange&&(Z(e,J,this.$onSelectionChange),this.$onSelectionChange=null),t&&this.$onSourceImageLoad&&(Z(t.$image,K,this.$onSourceImageLoad),this.$onSourceImageLoad=null),t&&this.$onSourceImageTransform&&(Z(t,Nt,this.$onSourceImageTransform),this.$onSourceImageTransform=null),super.disconnectedCallback()}$handleSelectionChange(e){this.$render(e.defaultPrevented?this.$selection:e.detail)}$handleSourceImageLoad(){let{$image:e,$sourceImage:t}=this,n=e.getAttribute(`src`),r=t.getAttribute(`src`);r&&r!==n&&(e.setAttribute(`src`,r),e.$ready(()=>{this.$render()}))}$handleSourceImageTransform(e){this.$render(void 0,e.detail.matrix)}$render(e,t){let{$canvas:n,$selection:r}=this;!e&&!r.hidden&&(e=r),(!e||e.x===0&&e.y===0&&e.width===0&&e.height===0)&&(e={x:0,y:0,width:n.offsetWidth,height:n.offsetHeight});let{x:i,y:a,width:o,height:s}=e,c={},{clientWidth:l,clientHeight:u}=this,d=l,f=u,p=NaN;switch(this.resize){case Rn:p=1,d=o,f=s,c.width=o,c.height=s;break;case zn:p=s>0?u/s:0,d=o*p,c.width=d;break;case Bn:p=o>0?l/o:0,f=s*p,c.height=f;break;case Vn:default:l>0?p=o>0?l/o:0:u>0&&(p=s>0?u/s:0)}this.$scale=p,this.$setStyles(c),this.$sourceImage&&setTimeout(()=>{this.$transformImageByOffset(t??this.$sourceImage.$getTransform(),-i,-a)})}$transformImageByOffset(e,t,n){let{$image:r,$scale:i,$sourceImage:a}=this;if(a&&r&&i>=0){let[a,o,s,c,l,u]=e,d=(t*c-s*n)/(a*c-s*o),f=(n*a-o*t)/(a*c-s*o),p=a*d+s*f+l,m=o*d+c*f+u;r.$ready(e=>{this.$setStyles.call(r,{width:e.naturalWidth*i,height:e.naturalHeight*i})}),r.$setTransform(a,o,s,c,p*i,m*i)}}};Hn.$name=ct,Hn.$version=`2.1.0`;var Un=`<cropper-canvas background><cropper-image rotatable scalable skewable translatable></cropper-image><cropper-shade hidden></cropper-shade><cropper-handle action="select" plain></cropper-handle><cropper-selection initial-coverage="0.5" movable resizable><cropper-grid role="grid" bordered covered></cropper-grid><cropper-crosshair centered></cropper-crosshair><cropper-handle action="move" theme-color="rgba(255, 255, 255, 0.35)"></cropper-handle><cropper-handle action="n-resize"></cropper-handle><cropper-handle action="e-resize"></cropper-handle><cropper-handle action="s-resize"></cropper-handle><cropper-handle action="w-resize"></cropper-handle><cropper-handle action="ne-resize"></cropper-handle><cropper-handle action="nw-resize"></cropper-handle><cropper-handle action="se-resize"></cropper-handle><cropper-handle action="sw-resize"></cropper-handle></cropper-selection></cropper-canvas>`,Wn=/^img|canvas$/,Gn=/<(\/?(?:script|style)[^>]*)>/gi,Kn={template:Un};gn.$define(),Mn.$define(),An.$define(),Tn.$define(),bn.$define(),On.$define(),Cn.$define(),Hn.$define();var qn=class{constructor(e,t){if(this.options=Kn,Pt(e)&&(e=document.querySelector(e)),!Vt(e)||!Wn.test(e.localName))throw Error(`The first argument is required and must be an <img> or <canvas> element.`);this.element=e,t=Object.assign(Object.assign({},Kn),t),this.options=t;let{container:n}=t;if(n&&(Pt(n)&&(n=$t(e)?.querySelector(n)),!Vt(n)))throw Error("The `container` option must be an element or a valid selector.");Vt(n)||(n=e.parentElement?e.parentElement:e.ownerDocument.body),this.container=n;let r=e.localName,i=``;r===`img`?{src:i}=e:r===`canvas`&&window.HTMLCanvasElement&&(i=e.toDataURL());let{template:a}=t;if(a&&Pt(a)){let t=document.createElement(`template`),o=document.createDocumentFragment();t.innerHTML=a.replace(Gn,`&lt;$1&gt;`),o.appendChild(t.content),Array.from(o.querySelectorAll(W)).forEach(t=>{t.setAttribute(`src`,i),t.setAttribute(`alt`,e.alt||`The image to crop`),r===`img`&&[`crossorigin`,`decoding`,`elementtiming`,`fetchpriority`,`loading`,`referrerpolicy`,`sizes`,`srcset`].forEach(n=>{e.hasAttribute(n)&&t.setAttribute(n,e.getAttribute(n)||``)})}),e.parentElement?(e.style.display=`none`,n.insertBefore(o,e.nextSibling)):n.appendChild(o)}}getCropperCanvas(){return this.container.querySelector(U)}getCropperImage(){return this.container.querySelector(W)}getCropperSelection(){return this.container.querySelector(G)}getCropperSelections(){return this.container.querySelectorAll(G)}destroy(){var e;let t=this.getCropperCanvas();t&&((e=t.parentElement)==null||e.removeChild(t)),this.element&&(this.element.style.display=``)}};qn.version=`2.1.0`;var Jn=L({name:`ImageCropper`,props:{width:{type:Number,default:300},height:{type:Number,default:300},quality:{type:Number,default:1},aspectRatio:{type:Number,default:void 0},modelValue:{type:[String,File],default:``}},emits:[`update:blob`,`update:url`,`update:modelValue`],setup(e,{emit:t}){let n=P(null),r=P(null),i=P(null),a=P(``),o=P(``),s=null,c=async()=>{!r.value||!n.value||(await d(),s&&=(s.destroy(),null),s=new qn(r.value,{container:n.value}),s.getCropperCanvas?.()?.$addStyles(`
				  :host {
					height: ${e.height+100}px;
				  }
				`),s.getCropperImage?.()?.$ready(()=>{let t=s?.getCropperImage?.();t&&(t.$center(),t.skewable=!0,t.$image.height=e.height+50);let r=s?.getCropperSelection?.();r&&(r.width=e.width,r.height=e.height,r.movable=!0,r.outlined=!0,r.zoomable=!0,r.aspectRatio=e.aspectRatio??1,r.initialAspectRatio=e.aspectRatio??1,r.$center()),y();let i=n.value?.getElementsByTagName(`cropper-handle`);if(i&&i.length)for(let e of i)e.getAttribute(`action`)===`select`&&e.setAttribute(`action`,`move`)}),r.value.addEventListener(`load`,()=>{u()}))},l=null,u=()=>{if(!s)return;let n=s.getCropperSelection?.(),r=s.getCropperImage();r&&n&&(n.$toCanvas({width:e.width,height:e.height}).then(e=>{e.toBlob(e=>{e&&(a.value=URL.createObjectURL(e))},`image/png`)}),l&&clearTimeout(l),l=window.setTimeout(()=>{let[i,o,s,c]=r.$getTransform(),l=Math.sqrt(i*i+o*o),u=Math.sqrt(s*s+c*c),d=n.width/l,f=n.height/u;console.log(`scaleX`,l,`scaleY`,u,`realWidth`,d,`realHeight`,f),n.$toCanvas({width:d,height:f}).then(n=>{n&&n.toBlob(e=>{if(!e)return;let n=URL.createObjectURL(e);a.value=n,t(`update:blob`,e),t(`update:url`,n)},`image/png`,e.quality)})},150))},f=e=>{if(!s||!e)return;let t=s.getCropperImage(),n=s.getCropperSelection(),r=s.getCropperCanvas();if(!r||!t||!n)return;let i=r.getBoundingClientRect(),a=t.cloneNode();e.detail.matrix&&(a.style.transform=`matrix(${e.detail.matrix.join(`, `)})`),a.style.opacity=`0`,r.appendChild(a);let o=a.getBoundingClientRect();r.removeChild(a),h({x:n.x,y:n.y,width:n.width,height:n.height},{x:o.left-i.left,y:o.top-i.top,width:o.width,height:o.height})||e.preventDefault()},p=e=>{if(!s||!e)return;let t=s.getCropperImage(),n=s.getCropperCanvas();if(!n||!t)return;let r=n.getBoundingClientRect(),i=t.getBoundingClientRect(),a={x:i.left-r.left,y:i.top-r.top,width:i.width,height:i.height},o=e.detail;h(o,a)||e.preventDefault()},h=(e,t)=>e.x>=t.x&&e.y>=t.y&&e.x+e.width<=t.x+t.width&&e.y+e.height<=t.y+t.height,g=e=>{let n=e.target.files?.[0];n&&t(`update:modelValue`,n)},_=()=>{i.value?.click()},v=()=>{s?.getCropperImage()?.$zoom(.05),u()},y=()=>{s?.getCropperImage()?.$zoom(-.05),u()},ee=()=>{s?.getCropperImage()?.$rotate(`-90deg`),u()},b=()=>{s?.getCropperImage()?.$rotate(`90deg`),u()},x=()=>{s?.getCropperImage()?.$scale(-1,1),u()},S=()=>{s?.getCropperImage()?.$scale(1,-1),u()};return te(()=>{}),ge(()=>{s?.destroy(),s=null}),m(()=>e.modelValue,e=>{e&&(e instanceof File?o.value=URL.createObjectURL(e):o.value=e,d().then(c))},{immediate:!0}),()=>w(`div`,{style:{display:`flex`,gap:`16px`}},[w(`div`,re({ref:n},{onAction:u},{onTransform:f},{onChange:p,style:{flex:1,position:`relative`,border:`1px solid var(--cropper-border, #ddd)`,background:`var(--cropper-background, #fff)`}}),[w(`img`,{alt:``,ref:r,src:o.value},null),w(`div`,{style:{position:`absolute`,top:`10px`,left:`10px`,display:`flex`,gap:`8px`,padding:`6px 8px`,borderRadius:`8px`,background:`var(--cropper-toolbar-bg, rgba(0,0,0,0.4))`,backdropFilter:`blur(6px)`}},[w(`button`,{onClick:_,style:{color:`white`,cursor:`pointer`}},[w(A,{icon:`ep:upload`},null)]),w(`button`,{onClick:v,style:{color:`white`,cursor:`pointer`}},[w(A,{icon:`ep:zoom-in`},null)]),w(`button`,{onClick:y,style:{color:`white`,cursor:`pointer`}},[w(A,{icon:`ep:zoom-out`},null)]),w(`button`,{onClick:ee,style:{color:`white`,cursor:`pointer`}},[w(A,{icon:`ep:refresh-left`},null)]),w(`button`,{onClick:b,style:{color:`white`,cursor:`pointer`}},[w(A,{icon:`ep:refresh-right`},null)]),w(`button`,{onClick:x,style:{color:`white`,cursor:`pointer`}},[w(A,{icon:`ep:switch`},null)]),w(`button`,{onClick:S,style:{color:`white`,cursor:`pointer`}},[w(A,{icon:`ep:sort`},null)])])]),w(`div`,{style:{width:`260px`}},[w(`h4`,{style:{color:`var(--cropper-text, #333)`}},[D(``)]),w(`div`,{style:{border:`1px solid var(--cropper-border, #ddd)`,padding:`8px`,background:`var(--cropper-background, #fff)`}},[a.value?w(`img`,{alt:`CropperPreview`,src:a.value,style:{width:`100%`,borderRadius:`4px`}},null):w(`div`,{style:{textAlign:`center`,color:`var(--cropper-text-muted, #999)`,padding:`40px 0`}},[D(``)])]),w(`input`,{ref:i,type:`file`,accept:`image/*`,style:{display:`none`},onChange:g},null)])])}}),Yn={style:{padding:`24px`}},Xn={class:`flex gap-3`},Zn={key:0,style:{"margin-top":`20px`}},Qn=[`src`],$n=L({__name:`Cropper`,setup(e){let t=P(!1),i=P(!1),a=P(``),o=P(``),s=P(null),c=P(),l=()=>{s.value&&(o.value=URL.createObjectURL(s.value),console.log(o.value),t.value=!1,i.value=!1)},u=e=>(c.value=e,i.value=!0,!1);return(e,d)=>{let p=n,m=et,h=r;return f(),k(`div`,Yn,[T(`div`,Xn,[w(p,{type:`primary`,onClick:d[0]||=e=>t.value=!0},{default:N(()=>[...d[11]||=[D(``,-1)]]),_:1}),w(m,{accept:`image/*`,"show-file-list":!1,"before-upload":u},{default:N(()=>[w(p,{type:`primary`},{default:N(()=>[...d[12]||=[D(``,-1)]]),_:1})]),_:1})]),w(h,{title:``,modelValue:t.value,"onUpdate:modelValue":d[5]||=e=>t.value=e,width:`900px`},{footer:N(()=>[w(p,{onClick:d[4]||=e=>t.value=!1},{default:N(()=>[...d[13]||=[D(``,-1)]]),_:1}),w(p,{type:`primary`,onClick:l},{default:N(()=>[...d[14]||=[D(``,-1)]]),_:1})]),default:N(()=>[w(F(Jn),{modelValue:a.value,"onUpdate:modelValue":d[1]||=e=>a.value=e,"onUpdate:blob":d[2]||=e=>s.value=e,"onUpdate:url":d[3]||=e=>o.value=e,width:400,height:400,"aspect-ratio":1},null,8,[`modelValue`])]),_:1},8,[`modelValue`]),w(h,{title:``,modelValue:i.value,"onUpdate:modelValue":d[10]||=e=>i.value=e,width:`900px`},{footer:N(()=>[w(p,{onClick:d[9]||=e=>i.value=!1},{default:N(()=>[...d[15]||=[D(``,-1)]]),_:1}),w(p,{type:`primary`,onClick:l},{default:N(()=>[...d[16]||=[D(``,-1)]]),_:1})]),default:N(()=>[w(F(Jn),{modelValue:c.value,"onUpdate:modelValue":d[6]||=e=>c.value=e,"onUpdate:blob":d[7]||=e=>s.value=e,"onUpdate:url":d[8]||=e=>o.value=e,"aspect-ratio":1},null,8,[`modelValue`])]),_:1},8,[`modelValue`]),o.value?(f(),k(`div`,Zn,[d[17]||=T(`h3`,null,``,-1),T(`img`,{src:o.value,style:{width:`300px`,"border-radius":`6px`}},null,8,Qn)])):M(``,!0)])}}});export{$n as default};