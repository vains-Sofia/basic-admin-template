import{t as e}from"./input-CR6PP8Vp.js";import{M as t,t as n}from"./button-OiLMmw4m.js";import{Ht as r,Yn as i,bn as a,fn as o,pn as s,wn as c,zn as l}from"./index-O7hvt5-X.js";var u=s({name:`VerifyCodeInput`,props:{modelValue:{type:String,required:!0},placeholder:{type:String,default:``},buttonText:{type:String,default:`获取验证码`},countdownSeconds:{type:Number,default:60},requestFn:{type:Function,default:void 0}},emits:[`update:modelValue`],setup(s,{emit:u,attrs:d}){let f=i(s.modelValue);l(()=>s.modelValue,e=>f.value=e),l(f,e=>u(`update:modelValue`,e));let p=i(s.countdownSeconds),m=i(!1),h=i(!1),g=null,_=async()=>{if(!(m.value||h.value))try{h.value=!0,s.requestFn?await s.requestFn():await new Promise(e=>setTimeout(e,1e3)),v()}catch(e){console.error(`获取验证码失败：`,e)}finally{h.value=!1}},v=()=>{m.value=!0,p.value=s.countdownSeconds,g=window.setInterval(()=>{p.value--,p.value<=0&&y()},1e3)},y=()=>{g&&=(clearInterval(g),null),m.value=!1};return c(()=>{y()}),()=>o(`div`,{style:`display: inline-block;width: 100%;`},[o(e,a(d,{modelValue:f.value,"onUpdate:modelValue":e=>f.value=e,placeholder:s.placeholder,clearable:!0}),{prefix:()=>o(t,{class:`el-input__icon`},{default:()=>[o(r,{icon:`ri:shield-keyhole-line`},null)]}),append:()=>o(n,{plain:!0,loading:h.value,disabled:m.value||h.value,onClick:_},{default:()=>[m.value?`${p.value}s`:s.buttonText]})})])}});export{u as t};