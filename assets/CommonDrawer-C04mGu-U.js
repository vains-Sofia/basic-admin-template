import{d as e,i as t}from"./tooltip-CjK7pdb5.js";import{M as n,N as r,S as i,r as a,t as o}from"./button-OiLMmw4m.js";import{c as s,i as c,n as l,r as u,t as d}from"./Plugins-Buz3_TXI.js";import{$t as f,En as p,Fn as m,Hn as h,M as g,Mn as _,O as v,Rn as y,S as b,Vn as x,Vt as S,Wt as C,Yn as w,Zt as T,an as E,bn as D,cn as O,dn as k,dr as A,fn as j,j as M,jn as N,kn as P,ln as F,mr as I,o as L,on as R,pn as z,pr as ee,sn as B,tn as V,tr as H,u as U,w as W,wn as G,zn as K}from"./index-O7hvt5-X.js";var q=b({...c,direction:{type:String,default:`rtl`,values:[`ltr`,`rtl`,`ttb`,`btt`]},resizable:Boolean,size:{type:[String,Number],default:`30%`},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:`2`}}),J=u;function te(e,t){let{width:n,height:r}=M(),i=E(()=>[`ltr`,`rtl`].includes(e.direction)),a=E(()=>[`ltr`,`ttb`].includes(e.direction)?1:-1),o=E(()=>i.value?n.value:r.value),s=E(()=>g(c.value+a.value*l.value,4,o.value)),c=w(0),l=w(0),u=w(!1),d=w(!1),f=[],p=[],m=()=>{let e=t.value?.closest(`[aria-modal="true"]`);return e?i.value?e.offsetWidth:e.offsetHeight:100};K(()=>[e.size,e.resizable],()=>{d.value=!1,c.value=0,l.value=0,y()});let h=t=>{e.resizable&&(d.value||=(c.value=m(),!0),f=[t.pageX,t.pageY],u.value=!0,p.push(v(window,`mouseup`,y),v(window,`mousemove`,_)))},_=e=>{let{pageX:t,pageY:n}=e,r=t-f[0],a=n-f[1];l.value=i.value?r:a},y=()=>{f=[],c.value=s.value,l.value=0,u.value=!1,p.forEach(e=>e?.()),p=[]},b=v(t,`mousedown`,h);return G(()=>{b(),y()}),{size:E(()=>d.value?`${s.value}px`:U(e.size)),isResizing:u,isHorizontal:i}}var Y=L(r(z({...z({name:`ElDrawer`,inheritAttrs:!1}),props:q,emits:J,setup(r,{expose:o}){let c=r,u=y();a({scope:`el-drawer`,from:`the title slot`,replacement:`the header slot`,version:`3.0.0`,ref:`https://element-plus.org/en-US/component/drawer.html#slots`},E(()=>!!u.title));let d=w(),p=w(),m=w(),g=S(`drawer`),{t:v}=W(),{afterEnter:b,afterLeave:k,beforeLeave:M,visible:N,rendered:L,titleId:z,bodyId:V,zIndex:U,onModalClick:G,onOpenAutoFocus:K,onCloseAutoFocus:q,onFocusoutPrevented:J,onCloseRequested:Y,handleClose:X}=l(c,d),{isHorizontal:Z,size:Q,isResizing:$}=te(c,m);return o({handleClose:X,afterEnter:b,afterLeave:k}),(r,a)=>(P(),B(H(t),{to:r.appendTo,disabled:r.appendTo===`body`?!r.appendToBody:!1},{default:x(()=>[j(C,{name:H(g).b(`fade`),onAfterEnter:H(b),onAfterLeave:H(k),onBeforeLeave:H(M),persisted:``},{default:x(()=>[h(j(H(s),{mask:r.modal,"overlay-class":[H(g).is(`drawer`),r.modalClass??``],"z-index":H(U),onClick:H(G)},{default:x(()=>[j(H(e),{loop:``,trapped:H(N),"focus-trap-el":d.value,"focus-start-el":p.value,onFocusAfterTrapped:H(K),onFocusAfterReleased:H(q),onFocusoutPrevented:H(J),onReleaseRequested:H(Y)},{default:x(()=>[R(`div`,D({ref_key:`drawerRef`,ref:d,"aria-modal":`true`,"aria-label":r.title||void 0,"aria-labelledby":r.title?void 0:H(z),"aria-describedby":H(V)},r.$attrs,{class:[H(g).b(),r.direction,H(N)&&`open`,H(g).is(`dragging`,H($))],style:{[H(Z)?`width`:`height`]:H(Q)},role:`dialog`,onClick:f(()=>{},[`stop`])}),[R(`span`,{ref_key:`focusStartRef`,ref:p,class:A(H(g).e(`sr-focus`)),tabindex:`-1`},null,2),r.withHeader?(P(),F(`header`,{key:0,class:A([H(g).e(`header`),r.headerClass])},[r.$slots.title?_(r.$slots,`title`,{key:1},()=>[O(` DEPRECATED SLOT `)]):_(r.$slots,`header`,{key:0,close:H(X),titleId:H(z),titleClass:H(g).e(`title`)},()=>[R(`span`,{id:H(z),role:`heading`,"aria-level":r.headerAriaLevel,class:A(H(g).e(`title`))},I(r.title),11,[`id`,`aria-level`])]),r.showClose?(P(),F(`button`,{key:2,"aria-label":H(v)(`el.drawer.close`),class:A(H(g).e(`close-btn`)),type:`button`,onClick:H(X)},[j(H(n),{class:A(H(g).e(`close`))},{default:x(()=>[j(H(i))]),_:1},8,[`class`])],10,[`aria-label`,`onClick`])):O(`v-if`,!0)],2)):O(`v-if`,!0),H(L)?(P(),F(`div`,{key:1,id:H(V),class:A([H(g).e(`body`),r.bodyClass])},[_(r.$slots,`default`)],10,[`id`])):O(`v-if`,!0),r.$slots.footer?(P(),F(`div`,{key:2,class:A([H(g).e(`footer`),r.footerClass])},[_(r.$slots,`footer`)],2)):O(`v-if`,!0),r.resizable?(P(),F(`div`,{key:3,ref_key:`draggerRef`,ref:m,style:ee({zIndex:H(U)}),class:A(H(g).e(`dragger`))},null,6)):O(`v-if`,!0)],16,[`aria-label`,`aria-labelledby`,`aria-describedby`,`onClick`])]),_:3},8,[`trapped`,`focus-trap-el`,`focus-start-el`,`onFocusAfterTrapped`,`onFocusAfterReleased`,`onFocusoutPrevented`,`onReleaseRequested`])]),_:3},8,[`mask`,`overlay-class`,`z-index`,`onClick`]),[[T,H(N)]])]),_:3},8,[`name`,`onAfterEnter`,`onAfterLeave`,`onBeforeLeave`])]),_:3},8,[`to`,`disabled`]))}}),[[`__file`,`drawer.vue`]])),X={key:0},Z={class:`flex justify-end gap-2 pr-4 pb-2`},Q=z({__name:`index`,setup(e){let t=d(),n=w({}),r=(e,n)=>{n?.(),t.closeDrawer(e.id)},i=e=>{let r=Date.now().toString();e.confirmLoading&&(n.value[e.id??r]=!0),e.onConfirm&&e.onConfirm(()=>{t.closeDrawer(e.id),n.value[e.id??r]=!1,delete n.value[e.id??r]},()=>{n.value[e.id??r]=!1,delete n.value[e.id??r]})},a=()=>{t.clearDrawers()};return p(()=>{window.addEventListener(`beforeunload`,a)}),G(()=>{window.removeEventListener(`beforeunload`,a)}),(e,a)=>{let s=o,c=Y;return P(!0),F(V,null,N(H(t).drawers,e=>(P(),B(c,D({key:e.id},{ref_for:!0},e,{modelValue:e.modelValue,"onUpdate:modelValue":t=>e.modelValue=t,style:{"--drawer-body-padding":`${e.bodyPadding??0}px`},onClose:t=>r(e,e.onCancel)}),{default:x(()=>[typeof e.content==`string`?(P(),F(`div`,X,I(e.content),1)):typeof e.content==`function`?(P(),B(m(e.content()),D({key:1,ref_for:!0},e.props),null,16)):(P(),B(m(e.content),D({key:2,ref_for:!0},e.props),null,16))]),footer:x(()=>[R(`div`,Z,[j(s,{onClick:t=>r(e,e.onCancel)},{default:x(()=>[k(I(e.cancelText||`取消`),1)]),_:2},1032,[`onClick`]),j(s,{type:`primary`,loading:n.value[e.id??new Date().getTime()],onClick:t=>i(e)},{default:x(()=>[k(I(e.confirmText||`确认`),1)]),_:2},1032,[`loading`,`onClick`])])]),_:2},1040,[`modelValue`,`onUpdate:modelValue`,`style`,`onClose`]))),128)}}}),$=d(),ne=e=>$.openDrawer(e),re=Q;export{ne as n,re as t};