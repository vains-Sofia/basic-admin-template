import{i as e}from"./use-aria-CMjMJ4AS.js";import{a as t,d as n,i as r,l as i,t as a}from"./tooltip-9mLRp4o_.js";import{c as o,r as s}from"./use-deprecated-BP8lmVFH.js";import{i as c}from"./teleport-DMHkh723.js";import{t as l}from"./css-BxD6NdqY.js";import{t as u}from"./refs-BjxfU7KM.js";import{a as d,c as f,d as p,i as m,l as h,n as g,o as _,r as v,s as y,t as b,u as x}from"./dropdown-BW3LkGFQ.js";import{Cr as S,Er as C,Et as w,Fr as T,Gn as E,Gr as D,Ii as O,Ir as k,Li as A,Q as j,Ri as M,Rr as N,Tr as P,Vr as ee,X as te,Y as ne,_ as re,_r as F,br as ie,bt as ae,dr as oe,fr as I,hr as se,ir as L,mr as R,ni as ce,nt as le,oi as z,or as ue,ot as B,pr as V,qr as H,ri as U,u as W,ui as G,ur as K,vr as q,vt as de,yr as fe,yt as J,zr as Y}from"./index-DkS91mYz.js";var pe=de({style:{type:J([String,Array,Object])},currentTabId:{type:J(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:[`ltr`,`rtl`],default:`ltr`},orientation:{type:J(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:me,ElCollectionItem:he,COLLECTION_INJECTION_KEY:X,COLLECTION_ITEM_INJECTION_KEY:ge}=p(`RovingFocusGroup`),Z=Symbol(`elRovingFocusGroup`),_e=Symbol(`elRovingFocusGroupItem`),ve={ArrowLeft:`prev`,ArrowUp:`prev`,ArrowRight:`next`,ArrowDown:`next`,PageUp:`first`,Home:`first`,PageDown:`last`,End:`last`},ye=(e,t)=>{if(t!==`rtl`)return e;switch(e){case W.right:return W.left;case W.left:return W.right;default:return e}},be=(e,t,n)=>{let r=ye(e.code,n);if(!(t===`vertical`&&[W.left,W.right].includes(r))&&!(t===`horizontal`&&[W.up,W.down].includes(r)))return ve[r]},xe=(e,t)=>e.map((n,r)=>e[(r+t)%e.length]),Q=e=>{let{activeElement:t}=document;for(let n of e)if(n===t||(n.focus(),t!==document.activeElement))return},Se=`currentTabIdChange`,Ce=`rovingFocusGroup.entryFocus`,we={bubbles:!1,cancelable:!0},Te=q({name:`ElRovingFocusGroupImpl`,inheritAttrs:!1,props:pe,emits:[Se,`entryFocus`],setup(e,{emit:t}){let n=U((e.currentTabId||e.defaultCurrentTabId)??null),i=U(!1),a=U(!1),o=U(),{getItems:s}=S(X,void 0),c=K(()=>[{outline:`none`},e.style]),l=e=>{t(Se,e)},u=()=>{i.value=!0},d=r(t=>{var n;(n=e.onMousedown)==null||n.call(e,t)},()=>{a.value=!0}),f=r(t=>{var n;(n=e.onFocus)==null||n.call(e,t)},e=>{let t=!G(a),{target:r,currentTarget:o}=e;if(r===o&&t&&!G(i)){let e=new Event(Ce,we);if(o?.dispatchEvent(e),!e.defaultPrevented){let e=s().filter(e=>e.focusable);Q([e.find(e=>e.active),e.find(e=>e.id===G(n)),...e].filter(Boolean).map(e=>e.ref))}}a.value=!1}),p=r(t=>{var n;(n=e.onBlur)==null||n.call(e,t)},()=>{i.value=!1});k(Z,{currentTabbedId:ce(n),loop:z(e,`loop`),tabIndex:K(()=>G(i)?-1:0),rovingFocusGroupRef:o,rovingFocusGroupRootStyle:c,orientation:z(e,`orientation`),dir:z(e,`dir`),onItemFocus:l,onItemShiftTab:u,onBlur:p,onFocus:f,onMousedown:d}),D(()=>e.currentTabId,e=>{n.value=e??null}),w(o,Ce,(...e)=>{t(`entryFocus`,...e)})}});function Ee(e,t,n,r,i,a){return N(e.$slots,`default`)}var De=q({name:`ElRovingFocusGroup`,components:{ElFocusGroupCollection:me,ElRovingFocusGroupImpl:B(Te,[[`render`,Ee],[`__file`,`roving-focus-group-impl.vue`]])}});function Oe(e,t,n,r,i,a){let o=Y(`el-roving-focus-group-impl`),s=Y(`el-focus-group-collection`);return T(),I(s,null,{default:H(()=>[F(o,A(ie(e.$attrs)),{default:H(()=>[N(e.$slots,`default`)]),_:3},16)]),_:3})}var ke=B(De,[[`render`,Oe],[`__file`,`roving-focus-group.vue`]]),$=Symbol(`elDropdown`),Ae=`elDropdown`,{ButtonGroup:je}=l,Me=q({name:`ElDropdown`,components:{ElButton:l,ElButtonGroup:je,ElScrollbar:n,ElDropdownCollection:v,ElTooltip:a,ElRovingFocusGroup:ke,ElOnlyChild:i,ElIcon:ne,ArrowDown:re},props:h,emits:[`visible-change`,`click`,`command`],setup(t,{emit:n}){let r=fe(),i=E(`dropdown`),{t:a}=ae(),c=U(),l=U(),u=U(),d=U(),f=U(null),p=U(null),m=U(!1),h=K(()=>({maxHeight:le(t.maxHeight)})),g=K(()=>[i.m(C.value)]),_=K(()=>e(t.trigger)),v=o().value,y=K(()=>t.id||v);function b(){var e;(e=u.value)==null||e.onClose(void 0,0)}function x(){var e;(e=u.value)==null||e.onClose()}function S(){var e;(e=u.value)==null||e.onOpen()}let C=s();function w(...e){n(`command`,...e)}function T(){}function D(){let e=G(d);_.value.includes(`hover`)&&e?.focus({preventScroll:!0}),p.value=null}function O(e){p.value=e}function A(e){m.value||(e.preventDefault(),e.stopImmediatePropagation())}function j(){n(`visible-change`,!0)}function M(e){var t;e?.type===`keydown`&&((t=d.value)==null||t.focus())}function N(){n(`visible-change`,!1)}return k($,{contentRef:d,role:K(()=>t.role),triggerId:y,isUsingKeyboard:m,onItemEnter:T,onItemLeave:D}),k(Ae,{instance:r,dropdownSize:C,handleClick:b,commandHandler:w,trigger:z(t,`trigger`),hideOnClick:z(t,`hideOnClick`)}),{t:a,ns:i,scrollbar:f,wrapStyle:h,dropdownTriggerKls:g,dropdownSize:C,triggerId:y,currentTabId:p,handleCurrentTabIdChange:O,handlerMainButtonClick:e=>{n(`click`,e)},handleEntryFocus:A,handleClose:x,handleOpen:S,handleBeforeShowTooltip:j,handleShowTooltip:M,handleBeforeHideTooltip:N,onFocusAfterTrapped:e=>{var t,n;e.preventDefault(),(n=(t=d.value)?.focus)==null||n.call(t,{preventScroll:!0})},popperRef:u,contentRef:d,triggeringElementRef:c,referenceElementRef:l}}});function Ne(e,t,n,r,i,a){let o=Y(`el-dropdown-collection`),s=Y(`el-roving-focus-group`),c=Y(`el-scrollbar`),l=Y(`el-only-child`),u=Y(`el-tooltip`),d=Y(`el-button`),f=Y(`arrow-down`),p=Y(`el-icon`),m=Y(`el-button-group`);return T(),R(`div`,{class:O([e.ns.b(),e.ns.is(`disabled`,e.disabled)])},[F(u,{ref:`popperRef`,role:e.role,effect:e.effect,"fallback-placements":[`bottom`,`top`],"popper-options":e.popperOptions,"gpu-acceleration":!1,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e(`popper`),e.popperClass],"reference-element":e.referenceElementRef?.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-arrow":e.showArrow,"show-after":e.trigger===`hover`?e.showTimeout:0,"hide-after":e.trigger===`hover`?e.hideTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.virtualRef??e.triggeringElementRef,"virtual-triggering":e.virtualTriggering||e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:``,"focus-on-target":``,persistent:e.persistent,onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},se({content:H(()=>[F(c,{ref:`scrollbar`,"wrap-style":e.wrapStyle,tag:`div`,"view-class":e.ns.e(`list`)},{default:H(()=>[F(s,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:`horizontal`,onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:H(()=>[F(o,null,{default:H(()=>[N(e.$slots,`dropdown`)]),_:3})]),_:3},8,[`loop`,`current-tab-id`,`onCurrentTabIdChange`,`onEntryFocus`])]),_:3},8,[`wrap-style`,`view-class`])]),_:2},[e.splitButton?void 0:{name:`default`,fn:H(()=>[F(l,{id:e.triggerId,ref:`triggeringElementRef`,role:`button`,tabindex:e.tabindex},{default:H(()=>[N(e.$slots,`default`)]),_:3},8,[`id`,`tabindex`])])}]),1032,[`role`,`effect`,`popper-options`,`placement`,`popper-class`,`reference-element`,`trigger`,`trigger-keys`,`trigger-target-el`,`show-arrow`,`show-after`,`hide-after`,`virtual-ref`,`virtual-triggering`,`disabled`,`transition`,`teleported`,`persistent`,`onBeforeShow`,`onShow`,`onBeforeHide`]),e.splitButton?(T(),I(m,{key:0},{default:H(()=>[F(d,P({ref:`referenceElementRef`},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:H(()=>[N(e.$slots,`default`)]),_:3},16,[`size`,`type`,`disabled`,`tabindex`,`onClick`]),F(d,P({id:e.triggerId,ref:`triggeringElementRef`},e.buttonProps,{role:`button`,size:e.dropdownSize,type:e.type,class:e.ns.e(`caret-button`),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t(`el.dropdown.toggleDropdown`)}),{default:H(()=>[F(p,{class:O(e.ns.e(`icon`))},{default:H(()=>[F(f)]),_:1},8,[`class`])]),_:1},16,[`id`,`size`,`type`,`class`,`disabled`,`tabindex`,`aria-label`])]),_:3})):V(`v-if`,!0)],2)}var Pe=B(Me,[[`render`,Ne],[`__file`,`dropdown.vue`]]),Fe=q({components:{ElRovingFocusCollectionItem:he},props:{focusable:{type:Boolean,default:!0},active:Boolean},emits:[`mousedown`,`focus`,`keydown`],setup(e,{emit:t}){let{currentTabbedId:n,loop:i,onItemFocus:a,onItemShiftTab:s}=S(Z,void 0),{getItems:c}=S(X,void 0),l=o(),u=U(),d=r(e=>{t(`mousedown`,e)},t=>{e.focusable?a(G(l)):t.preventDefault()}),f=r(e=>{t(`focus`,e)},()=>{a(G(l))}),p=r(e=>{t(`keydown`,e)},e=>{let{code:t,shiftKey:n,target:r,currentTarget:a}=e;if(t===W.tab&&n){s();return}if(r!==a)return;let o=be(e);if(o){e.preventDefault();let t=c().filter(e=>e.focusable).map(e=>e.ref);switch(o){case`last`:t.reverse();break;case`prev`:case`next`:{o===`prev`&&t.reverse();let e=t.indexOf(a);t=i.value?xe(t,e+1):t.slice(e+1);break}}C(()=>{Q(t)})}}),m=K(()=>n.value===G(l));return k(_e,{rovingFocusGroupItemRef:u,tabIndex:K(()=>G(m)?0:-1),handleMousedown:d,handleFocus:f,handleKeydown:p}),{id:l,handleKeydown:p,handleFocus:f,handleMousedown:d}}});function Ie(e,t,n,r,i,a){let o=Y(`el-roving-focus-collection-item`);return T(),I(o,{id:e.id,focusable:e.focusable,active:e.active},{default:H(()=>[N(e.$slots,`default`)]),_:3},8,[`id`,`focusable`,`active`])}var Le=B(Fe,[[`render`,Ie],[`__file`,`roving-focus-item.vue`]]),Re=q({name:`DropdownItemImpl`,components:{ElIcon:ne},props:y,emits:[`pointermove`,`pointerleave`,`click`,`clickimpl`],setup(e,{emit:t}){let n=E(`dropdown`),{role:i}=S($,void 0),{collectionItemRef:a}=S(g,void 0),{collectionItemRef:o}=S(ge,void 0),{rovingFocusGroupItemRef:s,tabIndex:c,handleFocus:l,handleKeydown:d,handleMousedown:f}=S(_e,void 0),p=u(a,o,s),m=K(()=>i.value===`menu`?`menuitem`:i.value===`navigation`?`link`:`button`),h=r(e=>{if([W.enter,W.numpadEnter,W.space].includes(e.code))return e.preventDefault(),e.stopImmediatePropagation(),t(`clickimpl`,e),!0},d);return{ns:n,itemRef:p,dataset:{[x]:``},role:m,tabIndex:c,handleFocus:l,handleKeydown:h,handleMousedown:f}}});function ze(e,t,n,r,i,a){let o=Y(`el-icon`);return T(),R(ue,null,[e.divided?(T(),R(`li`,{key:0,role:`separator`,class:O(e.ns.bem(`menu`,`item`,`divided`))},null,2)):V(`v-if`,!0),oe(`li`,P({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be(`menu`,`item`),e.ns.is(`disabled`,e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:t=>e.$emit(`clickimpl`,t),onFocus:e.handleFocus,onKeydown:L(e.handleKeydown,[`self`]),onMousedown:e.handleMousedown,onPointermove:t=>e.$emit(`pointermove`,t),onPointerleave:t=>e.$emit(`pointerleave`,t)}),[e.icon?(T(),I(o,{key:0},{default:H(()=>[(T(),I(ee(e.icon)))]),_:1})):V(`v-if`,!0),N(e.$slots,`default`)],16,[`aria-disabled`,`tabindex`,`role`,`onClick`,`onFocus`,`onKeydown`,`onMousedown`,`onPointermove`,`onPointerleave`])],64)}var Be=B(Re,[[`render`,ze],[`__file`,`dropdown-item-impl.vue`]]),Ve=()=>{let e=S(Ae,{});return{elDropdown:e,_elDropdownSize:K(()=>e?.dropdownSize)}},He=q({name:`ElDropdownItem`,components:{ElDropdownCollectionItem:m,ElRovingFocusItem:Le,ElDropdownItemImpl:Be},inheritAttrs:!1,props:y,emits:[`pointermove`,`pointerleave`,`click`],setup(e,{emit:n,attrs:i}){let{elDropdown:a}=Ve(),o=fe(),s=U(null),c=K(()=>G(s)?.textContent??``),{onItemEnter:l,onItemLeave:u}=S($,void 0),d=r(e=>(n(`pointermove`,e),e.defaultPrevented),t(t=>{if(e.disabled){u(t);return}let n=t.currentTarget;n===document.activeElement||n.contains(document.activeElement)||(l(t),t.defaultPrevented||n?.focus({preventScroll:!0}))})),f=r(e=>(n(`pointerleave`,e),e.defaultPrevented),t(u));return{handleClick:r(t=>{if(!e.disabled)return n(`click`,t),t.type!==`keydown`&&t.defaultPrevented},t=>{var n,r;if(e.disabled){t.stopImmediatePropagation();return}a?.hideOnClick?.value&&((n=a.handleClick)==null||n.call(a)),(r=a.commandHandler)==null||r.call(a,e.command,o,t)}),handlePointerMove:d,handlePointerLeave:f,textContent:c,propsAndAttrs:K(()=>({...e,...i}))}}});function Ue(e,t,n,r,i,a){let o=Y(`el-dropdown-item-impl`),s=Y(`el-roving-focus-item`),c=Y(`el-dropdown-collection-item`);return T(),I(c,{disabled:e.disabled,"text-value":e.textValue??e.textContent},{default:H(()=>[F(s,{focusable:!e.disabled},{default:H(()=>[F(o,P(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:H(()=>[N(e.$slots,`default`)]),_:3},16,[`onPointerleave`,`onPointermove`,`onClickimpl`])]),_:3},8,[`focusable`])]),_:3},8,[`disabled`,`text-value`])}var We=B(He,[[`render`,Ue],[`__file`,`dropdown-item.vue`]]),Ge=q({name:`ElDropdownMenu`,props:f,setup(e){let t=E(`dropdown`),{_elDropdownSize:n}=Ve(),i=n.value,{focusTrapRef:a,onKeydown:o}=S(c,void 0),{contentRef:s,role:l,triggerId:f}=S($,void 0),{collectionRef:p,getItems:m}=S(b,void 0),{rovingFocusGroupRef:h,rovingFocusGroupRootStyle:g,tabIndex:v,onBlur:y,onFocus:x,onMousedown:C}=S(Z,void 0),{collectionRef:w}=S(X,void 0),T=K(()=>[t.b(`menu`),t.bm(`menu`,i?.value)]),D=u(s,p,a,h,w),O=r(t=>{var n;(n=e.onKeydown)==null||n.call(e,t)},e=>{let{currentTarget:t,code:n,target:r}=e;if(t.contains(r),W.tab===n&&e.stopImmediatePropagation(),e.preventDefault(),r!==G(s)||!d.includes(n))return;let i=m().filter(e=>!e.disabled).map(e=>e.ref);_.includes(n)&&i.reverse(),Q(i)});return{size:i,rovingFocusGroupRootStyle:g,tabIndex:v,dropdownKls:T,role:l,triggerId:f,dropdownListWrapperRef:D,handleKeydown:e=>{O(e),o(e)},onBlur:y,onFocus:x,onMousedown:C}}});function Ke(e,t,n,r,i,a){return T(),R(`ul`,{ref:e.dropdownListWrapperRef,class:O(e.dropdownKls),style:M(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:e.onBlur,onFocus:e.onFocus,onKeydown:L(e.handleKeydown,[`self`]),onMousedown:L(e.onMousedown,[`self`])},[N(e.$slots,`default`)],46,[`role`,`aria-labelledby`,`onBlur`,`onFocus`,`onKeydown`,`onMousedown`])}var qe=B(Ge,[[`render`,Ke],[`__file`,`dropdown-menu.vue`]]),Je=te(Pe,{DropdownItem:We,DropdownMenu:qe}),Ye=j(We),Xe=j(qe);export{Ye as n,Xe as r,Je as t};