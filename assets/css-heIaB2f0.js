import{r as e}from"./event-ybyaoC_m.js";import{t}from"./scroll-C0Dofiz-.js";import{c as n}from"./use-deprecated-BP8lmVFH.js";import{n as r}from"./teleport-DMHkh723.js";import{t as i}from"./vnode-5olvZtGS.js";import{Ci as a,Ei as o,Er as s,Ft as c,Gn as l,Gr as u,Ht as d,Mr as f,Qr as p,Rr as m,Un as h,Vt as g,_r as _,at as v,bi as y,ct as b,ei as x,et as S,g as C,it as w,nt as T,pi as E,ri as D,rt as O,tt as k,ur as A,vr as j,vt as M,xr as N,xt as P,yi as F,yr as I,yt as L}from"./index-DkS91mYz.js";F();var R=e=>{if(!e)return{onClick:E,onMousedown:E,onMouseup:E};let t=!1,n=!1;return{onClick:r=>{t&&n&&e(r),t=n=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{n=e.target===e.currentTarget}}},z=M({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:L([String,Array,Object])},zIndex:{type:L([String,Number])}}),B={click:e=>e instanceof MouseEvent},V=`overlay`,H=j({name:`ElOverlay`,props:z,emits:B,setup(e,{slots:t,emit:n}){let r=l(V),{onClick:a,onMousedown:o,onMouseup:s}=R(e.customMaskEvent?void 0:e=>{n(`click`,e)});return()=>e.mask?_(`div`,{class:[r.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:o,onMouseup:s},[m(t,`default`)],i.STYLE|i.CLASS|i.PROPS,[`onClick`,`onMouseup`,`onMousedown`]):N(`div`,{class:e.overlayClass,style:{zIndex:e.zIndex,position:`fixed`,top:`0px`,right:`0px`,bottom:`0px`,left:`0px`}},[m(t,`default`)])}}),U=Symbol(`dialogInjectionKey`),W=`dialog-fade`,G=M({center:Boolean,alignCenter:{type:Boolean,default:void 0},closeIcon:{type:C},draggable:{type:Boolean,default:void 0},overflow:{type:Boolean,default:void 0},fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:``},ariaLevel:{type:String,default:`2`}}),K={close:()=>!0},q=M({...G,appendToBody:Boolean,appendTo:{type:r.to.type,default:`body`},beforeClose:{type:L(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},modalPenetrable:Boolean,openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:`2`},transition:{type:L([String,Object]),default:void 0}}),J={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[e]:e=>d(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Y=(e,n={})=>{p(e)||S(`[useLockscreen]`,`You need to pass a ref param to this function`);let r=n.ns||l(`popup`),i=A(()=>r.bm(`parent`,`hidden`));if(!c||w(document.body,i.value))return;let a=0,o=!1,s=`0`,d=()=>{setTimeout(()=>{typeof document>`u`||o&&document&&(document.body.style.width=s,v(document.body,i.value))},200)};u(e,e=>{if(!e){d();return}o=!w(document.body,i.value),o&&(s=document.body.style.width,k(document.body,i.value)),a=t(r.namespace.value);let n=document.documentElement.clientHeight<document.body.scrollHeight,c=O(document.body,`overflowY`);a>0&&(n||c===`scroll`)&&o&&(document.body.style.width=`calc(100% - ${a}px)`)}),x(()=>d())};F();var X=(t,r)=>{let i=I().emit,{nextZIndex:l}=P(),d=``,p=n(),m=n(),h=D(!1),_=D(!1),v=D(!1),x=D(t.zIndex??l()),S,C,w=b(),E=A(()=>w.value?.namespace??`el`),O=A(()=>w.value?.dialog),k=A(()=>{let e={},n=`--${E.value}-dialog`;return t.fullscreen||(t.top&&(e[`${n}-margin-top`]=t.top),t.width&&(e[`${n}-width`]=T(t.width))),e}),j=A(()=>(t.draggable??O.value?.draggable??!1)&&!t.fullscreen),M=A(()=>t.alignCenter??O.value?.alignCenter??!1),N=A(()=>t.overflow??O.value?.overflow??!1),F=A(()=>M.value?{display:`flex`}:{}),L=A(()=>{let e=t.transition??O.value?.transition??W,n={name:e,onAfterEnter:R,onBeforeLeave:B,onAfterLeave:z};if(o(e)){let t={...e},n=(e,t)=>n=>{y(e)?e.forEach(e=>{a(e)&&e(n)}):a(e)&&e(n),t()};return t.onAfterEnter=n(t.onAfterEnter,R),t.onBeforeLeave=n(t.onBeforeLeave,B),t.onAfterLeave=n(t.onAfterLeave,z),t.name||=W,t}return n});function R(){i(`opened`)}function z(){i(`closed`),i(e,!1),t.destroyOnClose&&(v.value=!1)}function B(){i(`close`)}function V(){C?.(),S?.(),t.openDelay&&t.openDelay>0?{stop:S}=g(()=>K(),t.openDelay):K()}function H(){S?.(),C?.(),t.closeDelay&&t.closeDelay>0?{stop:C}=g(()=>q(),t.closeDelay):q()}function U(){function e(e){e||(_.value=!0,h.value=!1)}t.beforeClose?t.beforeClose(e):H()}function G(){t.closeOnClickModal&&U()}function K(){c&&(h.value=!0)}function q(){h.value=!1}function J(){i(`openAutoFocus`)}function X(){i(`closeAutoFocus`)}function Z(e){e.detail?.focusReason===`pointer`&&e.preventDefault()}t.lockScroll&&Y(h);function Q(){t.closeOnPressEscape&&U()}return u(()=>t.zIndex,()=>{x.value=t.zIndex??l()}),u(()=>t.modelValue,e=>{e?(_.value=!1,V(),v.value=!0,x.value=t.zIndex??l(),s(()=>{i(`open`),r.value&&(r.value.parentElement.scrollTop=0,r.value.parentElement.scrollLeft=0,r.value.scrollTop=0)})):h.value&&H()}),u(()=>t.fullscreen,e=>{r.value&&(e?(d=r.value.style.transform,r.value.style.transform=``):r.value.style.transform=d)}),f(()=>{t.modelValue&&(h.value=!0,v.value=!0,V())}),{afterEnter:R,afterLeave:z,beforeLeave:B,handleClose:U,onModalClick:G,close:H,doClose:q,onOpenAutoFocus:J,onCloseAutoFocus:X,onCloseRequested:Q,onFocusoutPrevented:Z,titleId:p,bodyId:m,closed:_,style:k,overlayDialogStyle:F,rendered:v,visible:h,zIndex:x,transitionConfig:L,_draggable:j,_alignCenter:M,_overflow:N}};export{K as a,H as c,q as i,R as l,Y as n,G as o,J as r,U as s,X as t};