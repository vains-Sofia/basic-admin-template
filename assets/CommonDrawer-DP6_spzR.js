import{t as e}from"./use-deprecated-BP8lmVFH.js";import{r as t,t as n}from"./teleport-DMHkh723.js";import{t as r}from"./css-BxD6NdqY.js";import{c as i,i as a,r as o,t as s}from"./css-heIaB2f0.js";import{E as c,Et as l,Fr as u,Gn as d,Gr as f,Ii as p,Jr as m,Lr as h,Mr as g,Mt as _,Nt as v,Ri as y,Rr as b,Tr as x,Vi as S,Vr as C,Wr as ee,X as w,Y as T,_r as E,bt as D,dr as O,fr as k,gr as A,ir as j,kr as M,mr as N,nr as P,nt as F,or as I,ot as L,pr as R,qi as z,qn as B,qr as V,r as H,ri as U,ui as W,ur as G,vr as K,vt as q}from"./index-DkS91mYz.js";import{t as J}from"./Plugins-t28lUS8u.js";var Y=q({...a,direction:{type:String,default:`rtl`,values:[`ltr`,`rtl`,`ttb`,`btt`]},resizable:Boolean,size:{type:[String,Number],default:`30%`},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:`2`}}),X=o;function te(e,t){let{width:n,height:r}=_(),i=G(()=>[`ltr`,`rtl`].includes(e.direction)),a=G(()=>[`ltr`,`ttb`].includes(e.direction)?1:-1),o=G(()=>i.value?n.value:r.value),s=G(()=>v(c.value+a.value*u.value,4,o.value)),c=U(0),u=U(0),d=U(!1),p=U(!1),m=[],h=[],g=()=>{let e=t.value?.closest(`[aria-modal="true"]`);return e?i.value?e.offsetWidth:e.offsetHeight:100};f(()=>[e.size,e.resizable],()=>{p.value=!1,c.value=0,u.value=0,x()});let y=t=>{e.resizable&&(p.value||=(c.value=g(),!0),m=[t.pageX,t.pageY],d.value=!0,h.push(l(window,`mouseup`,x),l(window,`mousemove`,b)))},b=e=>{let{pageX:t,pageY:n}=e,r=t-m[0],a=n-m[1];u.value=i.value?r:a},x=()=>{m=[],c.value=s.value,u.value=0,d.value=!1,h.forEach(e=>e?.()),h=[]},S=l(t,`mousedown`,y);return M(()=>{S(),x()}),{size:G(()=>p.value?`${s.value}px`:F(e.size)),isResizing:d,isHorizontal:i}}var Z=w(L(K({...K({name:`ElDrawer`,inheritAttrs:!1}),props:Y,emits:X,setup(r,{expose:a}){let o=r,l=ee();e({scope:`el-drawer`,from:`the title slot`,replacement:`the header slot`,version:`3.0.0`,ref:`https://element-plus.org/en-US/component/drawer.html#slots`},G(()=>!!l.title));let f=U(),h=U(),g=U(),_=d(`drawer`),{t:v}=D(),{afterEnter:C,afterLeave:w,beforeLeave:A,visible:M,rendered:F,titleId:I,bodyId:L,zIndex:z,onModalClick:H,onOpenAutoFocus:K,onCloseAutoFocus:q,onFocusoutPrevented:J,onCloseRequested:Y,handleClose:X}=s(o,f),{isHorizontal:Z,size:Q,isResizing:$}=te(o,g);return a({handleClose:X,afterEnter:C,afterLeave:w}),(e,r)=>(u(),k(W(n),{to:e.appendTo,disabled:e.appendTo===`body`?!e.appendToBody:!1},{default:V(()=>[E(B,{name:W(_).b(`fade`),onAfterEnter:W(C),onAfterLeave:W(w),onBeforeLeave:W(A),persisted:``},{default:V(()=>[m(E(W(i),{mask:e.modal,"overlay-class":[W(_).is(`drawer`),e.modalClass??``],"z-index":W(z),onClick:W(H)},{default:V(()=>[E(W(t),{loop:``,trapped:W(M),"focus-trap-el":f.value,"focus-start-el":h.value,onFocusAfterTrapped:W(K),onFocusAfterReleased:W(q),onFocusoutPrevented:W(J),onReleaseRequested:W(Y)},{default:V(()=>[O(`div`,x({ref_key:`drawerRef`,ref:f,"aria-modal":`true`,"aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:W(I),"aria-describedby":W(L)},e.$attrs,{class:[W(_).b(),e.direction,W(M)&&`open`,W(_).is(`dragging`,W($))],style:{[W(Z)?`width`:`height`]:W(Q)},role:`dialog`,onClick:j(()=>{},[`stop`])}),[O(`span`,{ref_key:`focusStartRef`,ref:h,class:p(W(_).e(`sr-focus`)),tabindex:`-1`},null,2),e.withHeader?(u(),N(`header`,{key:0,class:p([W(_).e(`header`),e.headerClass])},[e.$slots.title?b(e.$slots,`title`,{key:1},()=>[R(` DEPRECATED SLOT `)]):b(e.$slots,`header`,{key:0,close:W(X),titleId:W(I),titleClass:W(_).e(`title`)},()=>[O(`span`,{id:W(I),role:`heading`,"aria-level":e.headerAriaLevel,class:p(W(_).e(`title`))},S(e.title),11,[`id`,`aria-level`])]),e.showClose?(u(),N(`button`,{key:2,"aria-label":W(v)(`el.drawer.close`),class:p(W(_).e(`close-btn`)),type:`button`,onClick:W(X)},[E(W(T),{class:p(W(_).e(`close`))},{default:V(()=>[E(W(c))]),_:1},8,[`class`])],10,[`aria-label`,`onClick`])):R(`v-if`,!0)],2)):R(`v-if`,!0),W(F)?(u(),N(`div`,{key:1,id:W(L),class:p([W(_).e(`body`),e.bodyClass])},[b(e.$slots,`default`)],10,[`id`])):R(`v-if`,!0),e.$slots.footer?(u(),N(`div`,{key:2,class:p([W(_).e(`footer`),e.footerClass])},[b(e.$slots,`footer`)],2)):R(`v-if`,!0),e.resizable?(u(),N(`div`,{key:3,ref_key:`draggerRef`,ref:g,style:y({zIndex:W(z)}),class:p(W(_).e(`dragger`))},null,6)):R(`v-if`,!0)],16,[`aria-label`,`aria-labelledby`,`aria-describedby`,`onClick`])]),_:3},8,[`trapped`,`focus-trap-el`,`focus-start-el`,`onFocusAfterTrapped`,`onFocusAfterReleased`,`onFocusoutPrevented`,`onReleaseRequested`])]),_:3},8,[`mask`,`overlay-class`,`z-index`,`onClick`]),[[P,W(M)]])]),_:3},8,[`name`,`onAfterEnter`,`onAfterLeave`,`onBeforeLeave`])]),_:3},8,[`to`,`disabled`]))}}),[[`__file`,`drawer.vue`]])),Q={key:0},$={key:0},ne=H(K({__name:`index`,setup(e){let t=J(),n=U({}),i=(e,n)=>{n?.(),t.closeDrawer(e.id)},a=e=>{let r=Date.now().toString();e.confirmLoading&&(n.value[e.id??r]=!0),e.onConfirm&&e.onConfirm(()=>{t.closeDrawer(e.id),n.value[e.id??r]=!1,delete n.value[e.id??r]},()=>{n.value[e.id??r]=!1,delete n.value[e.id??r]})},o=()=>{t.clearDrawers()};return g(()=>{window.addEventListener(`beforeunload`,o)}),M(()=>{window.removeEventListener(`beforeunload`,o)}),(e,o)=>{let s=r,c=Z;return u(!0),N(I,null,h(W(t).drawers,e=>(u(),k(c,x({key:e.id},{ref_for:!0},e,{modelValue:e.modelValue,"onUpdate:modelValue":t=>e.modelValue=t,class:`el-drawer-common`,style:{"--drawer-body-padding":`${e.bodyPadding??0}px`},onClose:t=>i(e,e.onCancel)}),{default:V(()=>[typeof e.content==`string`?(u(),N(`div`,Q,S(e.content),1)):typeof e.content==`function`?(u(),k(C(e.content()),x({key:1,ref_for:!0},e.props),null,16)):(u(),k(C(e.content),x({key:2,ref_for:!0},e.props),null,16))]),footer:V(()=>[e.footerRenderer?(u(),N(I,{key:0},[typeof e.footerRenderer==`string`?(u(),N(`div`,$,S(e.footerRenderer),1)):typeof e.footerRenderer==`function`?(u(),k(C(e.footerRenderer({confirm:()=>a(e),close:()=>i(e,e.onCancel),closeLoading:()=>{let t=e.id??Date.now().toString();n.value[t]=!1,delete n.value[t]},item:e,loading:n.value[e.id??Date.now()]})),{key:1})):(u(),k(C(e.footerRenderer),{key:2}))],64)):e.hideFooter?R(``,!0):(u(),N(I,{key:1},[E(s,{onClick:t=>i(e,e.onCancel)},{default:V(()=>[A(S(e.cancelText||`取消`),1)]),_:2},1032,[`onClick`]),E(s,{type:`primary`,loading:n.value[e.id??new Date().getTime()],onClick:t=>a(e)},{default:V(()=>[A(S(e.confirmText||`确认`),1)]),_:2},1032,[`loading`,`onClick`])],64))]),_:2},1040,[`modelValue`,`onUpdate:modelValue`,`style`,`onClose`]))),128)}}}),[[`__scopeId`,`data-v-7df6f5dc`]]),re=J(),ie=e=>re.openDrawer(e),ae=ne;export{ie as n,ae as t};