import{d as e,i as t,p as n}from"./tooltip-CjK7pdb5.js";import{M as r,N as i,f as a,r as o,t as s}from"./button-OiLMmw4m.js";import{a as c,c as l,i as u,l as d,n as f,o as p,r as m,s as h,t as g}from"./Plugins-Buz3_TXI.js";import{i as _}from"./dropdown-CQzlOhze.js";import{An as v,Bn as y,En as b,Fn as x,Hn as S,Mn as C,Rn as w,Vn as T,Vt as E,Wt as D,Yn as O,Zt as k,an as A,bn as j,cn as M,dn as N,dr as P,fn as F,jn as I,kn as L,ln as R,mr as z,o as B,on as V,pn as H,pr as U,sn as W,tn as G,tr as K,u as q,un as J,vn as Y,w as X,wn as Z}from"./index-O7hvt5-X.js";var Q=(e,t,n,r)=>{let i={offsetX:0,offsetY:0},a=O(!1),o=(t,n)=>{if(e.value){let{offsetX:a,offsetY:o}=i,s=e.value.getBoundingClientRect(),c=s.left,l=s.top,u=s.width,d=s.height,f=document.documentElement.clientWidth,p=document.documentElement.clientHeight,m=-c+a,h=-l+o,g=f-c-u+a,_=p-l-(d<p?d:0)+o;r?.value||(t=Math.min(Math.max(t,m),g),n=Math.min(Math.max(n,h),_)),i.offsetX=t,i.offsetY=n,e.value.style.transform=`translate(${q(t)}, ${q(n)})`}},s=e=>{let t=e.clientX,n=e.clientY,{offsetX:r,offsetY:s}=i,c=e=>{a.value||=!0,o(r+e.clientX-t,s+e.clientY-n)},l=()=>{a.value=!1,document.removeEventListener(`mousemove`,c),document.removeEventListener(`mouseup`,l)};document.addEventListener(`mousemove`,c),document.addEventListener(`mouseup`,l)},c=()=>{t.value&&e.value&&(t.value.addEventListener(`mousedown`,s),window.addEventListener(`resize`,d))},l=()=>{t.value&&e.value&&(t.value.removeEventListener(`mousedown`,s),window.removeEventListener(`resize`,d))},u=()=>{i.offsetX=0,i.offsetY=0,e.value&&(e.value.style.transform=``)},d=()=>{let{offsetX:e,offsetY:t}=i;o(e,t)};return b(()=>{y(()=>{n.value?c():l()})}),Z(()=>{l()}),{isDragging:a,resetPosition:u,updatePosition:d}},ee=i(H({...H({name:`ElDialogContent`}),props:p,emits:c,setup(e,{expose:t}){let i=e,{t:o}=X(),{Close:s}=a,{dialogRef:c,headerRef:l,bodyId:u,ns:d,style:f}=Y(h),{focusTrapRef:p}=Y(n),m=_(p,c),g=A(()=>!!i.draggable),{resetPosition:v,updatePosition:y,isDragging:b}=Q(c,l,g,A(()=>!!i.overflow)),S=A(()=>[d.b(),d.is(`fullscreen`,i.fullscreen),d.is(`draggable`,g.value),d.is(`dragging`,b.value),d.is(`align-center`,!!i.alignCenter),{[d.m(`center`)]:i.center}]);return t({resetPosition:v,updatePosition:y}),(e,t)=>(L(),R(`div`,{ref:K(m),class:P(K(S)),style:U(K(f)),tabindex:`-1`},[V(`header`,{ref_key:`headerRef`,ref:l,class:P([K(d).e(`header`),e.headerClass,{"show-close":e.showClose}])},[C(e.$slots,`header`,{},()=>[V(`span`,{role:`heading`,"aria-level":e.ariaLevel,class:P(K(d).e(`title`))},z(e.title),11,[`aria-level`])]),e.showClose?(L(),R(`button`,{key:0,"aria-label":K(o)(`el.dialog.close`),class:P(K(d).e(`headerbtn`)),type:`button`,onClick:t=>e.$emit(`close`)},[F(K(r),{class:P(K(d).e(`close`))},{default:T(()=>[(L(),W(x(e.closeIcon||K(s))))]),_:1},8,[`class`])],10,[`aria-label`,`onClick`])):M(`v-if`,!0)],2),V(`div`,{id:K(u),class:P([K(d).e(`body`),e.bodyClass])},[C(e.$slots,`default`)],10,[`id`]),e.$slots.footer?(L(),R(`footer`,{key:0,class:P([K(d).e(`footer`),e.footerClass])},[C(e.$slots,`footer`)],2)):M(`v-if`,!0)],6))}}),[[`__file`,`dialog-content.vue`]]),$=B(i(H({...H({name:`ElDialog`,inheritAttrs:!1}),props:u,emits:m,setup(n,{expose:r}){let i=n,a=w();o({scope:`el-dialog`,from:`the title slot`,replacement:`the header slot`,version:`3.0.0`,ref:`https://element-plus.org/en-US/component/dialog.html#slots`},A(()=>!!a.title));let s=E(`dialog`),c=O(),u=O(),p=O(),{visible:m,titleId:g,bodyId:_,style:y,overlayDialogStyle:b,rendered:x,transitionConfig:N,zIndex:I,_draggable:R,_alignCenter:z,_overflow:B,handleClose:H,onModalClick:G,onOpenAutoFocus:q,onCloseAutoFocus:Y,onCloseRequested:X,onFocusoutPrevented:Z}=f(i,c);v(h,{dialogRef:c,headerRef:u,bodyId:_,ns:s,rendered:x,style:y});let Q=d(G),$=A(()=>i.modalPenetrable&&!i.modal&&!i.fullscreen);return r({visible:m,dialogContentRef:p,resetPosition:()=>{var e;(e=p.value)==null||e.resetPosition()},handleClose:H}),(n,r)=>(L(),W(K(t),{to:n.appendTo,disabled:n.appendTo===`body`?!n.appendToBody:!1},{default:T(()=>[F(D,j(K(N),{persisted:``}),{default:T(()=>[S(F(K(l),{"custom-mask-event":``,mask:n.modal,"overlay-class":[n.modalClass??``,`${K(s).namespace.value}-modal-dialog`,K(s).is(`penetrable`,K($))],"z-index":K(I)},{default:T(()=>[V(`div`,{role:`dialog`,"aria-modal":`true`,"aria-label":n.title||void 0,"aria-labelledby":n.title?void 0:K(g),"aria-describedby":K(_),class:P(`${K(s).namespace.value}-overlay-dialog`),style:U(K(b)),onClick:K(Q).onClick,onMousedown:K(Q).onMousedown,onMouseup:K(Q).onMouseup},[F(K(e),{loop:``,trapped:K(m),"focus-start-el":`container`,onFocusAfterTrapped:K(q),onFocusAfterReleased:K(Y),onFocusoutPrevented:K(Z),onReleaseRequested:K(X)},{default:T(()=>[K(x)?(L(),W(ee,j({key:0,ref_key:`dialogContentRef`,ref:p},n.$attrs,{center:n.center,"align-center":K(z),"close-icon":n.closeIcon,draggable:K(R),overflow:K(B),fullscreen:n.fullscreen,"header-class":n.headerClass,"body-class":n.bodyClass,"footer-class":n.footerClass,"show-close":n.showClose,title:n.title,"aria-level":n.headerAriaLevel,onClose:K(H)}),J({header:T(()=>[n.$slots.title?C(n.$slots,`title`,{key:1}):C(n.$slots,`header`,{key:0,close:K(H),titleId:K(g),titleClass:K(s).e(`title`)})]),default:T(()=>[C(n.$slots,`default`)]),_:2},[n.$slots.footer?{name:`footer`,fn:T(()=>[C(n.$slots,`footer`)])}:void 0]),1040,[`center`,`align-center`,`close-icon`,`draggable`,`overflow`,`fullscreen`,`header-class`,`body-class`,`footer-class`,`show-close`,`title`,`aria-level`,`onClose`])):M(`v-if`,!0)]),_:3},8,[`trapped`,`onFocusAfterTrapped`,`onFocusAfterReleased`,`onFocusoutPrevented`,`onReleaseRequested`])],46,[`aria-label`,`aria-labelledby`,`aria-describedby`,`onClick`,`onMousedown`,`onMouseup`])]),_:3},8,[`mask`,`overlay-class`,`z-index`]),[[k,K(m)]])]),_:3},16)]),_:3},8,[`to`,`disabled`]))}}),[[`__file`,`dialog.vue`]])),te={key:0},ne=H({__name:`index`,setup(e){let t=g(),n=O({}),r=(e,n)=>{n?.(),t.closeDialog(e.id)},i=e=>{let r=Date.now().toString();e.confirmLoading&&(n.value[e.id??r]=!0),e.onConfirm&&e.onConfirm(()=>{t.closeDialog(e.id),n.value[e.id??r]=!1,delete n.value[e.id??r]},()=>{n.value[e.id??r]=!1,delete n.value[e.id??r]})},a=()=>{t.clearDialogs()};return b(()=>{window.addEventListener(`beforeunload`,a)}),Z(()=>{window.removeEventListener(`beforeunload`,a)}),(e,a)=>{let o=s,c=$;return L(!0),R(G,null,I(K(t).dialogs,e=>(L(),W(c,j({key:e.id},{ref_for:!0},e,{modelValue:e.modelValue,"onUpdate:modelValue":t=>e.modelValue=t,onClose:t=>r(e,e.onCancel)}),{default:T(()=>[typeof e.content==`string`?(L(),R(`div`,te,z(e.content),1)):typeof e.content==`function`?(L(),W(x(e.content()),j({key:1,ref_for:!0},e.props),null,16)):(L(),W(x(e.content),j({key:2,ref_for:!0},e.props),null,16))]),footer:T(()=>[F(o,{onClick:t=>r(e,e.onCancel)},{default:T(()=>[N(z(e.cancelText||`取消`),1)]),_:2},1032,[`onClick`]),F(o,{type:`primary`,loading:n.value[e.id??new Date().getTime()],onClick:t=>i(e)},{default:T(()=>[N(z(e.confirmText||`确认`),1)]),_:2},1032,[`loading`,`onClick`])]),_:2},1040,[`modelValue`,`onUpdate:modelValue`,`onClose`]))),128)}}}),re=g(),ie=e=>re.openDialog(e),ae=ne;export{ie as n,$ as r,ae as t};