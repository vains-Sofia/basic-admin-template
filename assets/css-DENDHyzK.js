import{t as e}from"./use-aria-CMjMJ4AS.js";import{n as t,r as n,t as r}from"./event-ybyaoC_m.js";import{a as i,i as a,n as o,r as s}from"./use-deprecated-BP8lmVFH.js";import{n as c}from"./aria-CCaT2o1P.js";import{$ as l,Ci as u,Ei as d,Er as f,Et as p,Fr as m,Ft as ee,G as te,Gn as ne,Gr as h,Gt as g,Ii as _,M as re,Mi as v,Mr as ie,Qt as y,Ri as ae,Rr as b,Tr as oe,Ur as se,Vi as x,Vr as S,Wr as ce,X as le,Xt as ue,Y as C,d as de,dr as w,fr as T,g as E,h as fe,ht as D,ii as O,ir as pe,kt as me,mr as k,oi as he,or as ge,ot as _e,pi as ve,pr as A,qr as j,ri as M,ui as N,ur as P,vr as F,vt as I,w as L,yi as R,yr as z,yt as B}from"./index-DkS91mYz.js";var V=()=>ee&&/firefox/i.test(window.navigator.userAgent),H=void 0,U={height:`0`,visibility:`hidden`,overflow:V()?``:`hidden`,position:`absolute`,"z-index":`-1000`,top:`0`,right:`0`},W=[`letter-spacing`,`line-height`,`padding-top`,`padding-bottom`,`font-family`,`font-weight`,`font-size`,`text-rendering`,`text-transform`,`width`,`text-indent`,`padding-left`,`padding-right`,`border-width`,`box-sizing`,`word-break`];function G(e){let t=window.getComputedStyle(e),n=t.getPropertyValue(`box-sizing`),r=Number.parseFloat(t.getPropertyValue(`padding-bottom`))+Number.parseFloat(t.getPropertyValue(`padding-top`)),i=Number.parseFloat(t.getPropertyValue(`border-bottom-width`))+Number.parseFloat(t.getPropertyValue(`border-top-width`));return{contextStyle:W.map(e=>[e,t.getPropertyValue(e)]),paddingSize:r,borderSize:i,boxSizing:n}}function ye(e,t=1,n){var r;H||(H=document.createElement(`textarea`),(e.parentNode??document.body).appendChild(H));let{paddingSize:i,borderSize:a,boxSizing:o,contextStyle:s}=G(e);s.forEach(([e,t])=>H?.style.setProperty(e,t)),Object.entries(U).forEach(([e,t])=>H?.style.setProperty(e,t,`important`)),H.value=e.value||e.placeholder||``;let c=H.scrollHeight,l={};o===`border-box`?c+=a:o===`content-box`&&(c-=i),H.value=``;let u=H.scrollHeight-i;if(g(t)){let e=u*t;o===`border-box`&&(e=e+i+a),c=Math.max(e,c),l.minHeight=`${e}px`}if(g(n)){let e=u*n;o===`border-box`&&(e=e+i+a),c=Math.min(e,c)}return l.height=`${c}px`,(r=H.parentNode)==null||r.removeChild(H),H=void 0,l}R();var be=I({id:{type:String,default:void 0},size:D,disabled:Boolean,modelValue:{type:B([String,Number,Object]),default:``},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:`text`},resize:{type:String,values:[`none`,`both`,`horizontal`,`vertical`]},autosize:{type:B([Boolean,Object]),default:!1},autocomplete:{type:B(String),default:`off`},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,clearIcon:{type:E,default:L},showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:E},prefixIcon:{type:E},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:B([Object,Array,String]),default:()=>de({})},autofocus:Boolean,rows:{type:Number,default:2},...e([`ariaLabel`]),inputmode:{type:B(String),default:void 0},name:String}),K={[n]:e=>v(e),input:e=>v(e),change:e=>v(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},xe=[`class`,`style`],Se=/^on[A-Z]/,Ce=(e={})=>{let{excludeListeners:t=!1,excludeKeys:n}=e,r=P(()=>(n?.value||[]).concat(xe)),i=z();return P(i?()=>y(Object.entries(i.proxy?.$attrs).filter(([e])=>!r.value.includes(e)&&!(t&&Se.test(e)))):()=>({}))};R();function we(e,{disabled:t,beforeFocus:n,afterFocus:r,beforeBlur:i,afterBlur:a}={}){let{emit:o}=z(),s=O(),l=M(!1),d=e=>{let i=u(n)?n(e):!1;N(t)||l.value||i||(l.value=!0,o(`focus`,e),r?.())},f=e=>{let n=u(i)?i(e):!1;N(t)||e.relatedTarget&&s.value?.contains(e.relatedTarget)||n||(l.value=!1,o(`blur`,e),a?.())};return h([s,()=>N(t)],([e,t])=>{e&&(t?e.removeAttribute(`tabindex`):e.setAttribute(`tabindex`,`-1`))}),p(s,`focus`,d,!0),p(s,`blur`,f,!0),p(s,`click`,n=>{var r;N(t)||c(n.target)||s.value?.contains(document.activeElement)&&s.value!==document.activeElement||(r=e.value)==null||r.focus()},!0),{isFocused:l,wrapperRef:s,handleFocus:d,handleBlur:f}}var q=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);function Te({afterComposition:e,emit:t}){let n=M(!1),r=e=>{t?.(`compositionstart`,e),n.value=!0},i=e=>{t?.(`compositionupdate`,e);let r=e.target?.value;n.value=!q(r[r.length-1]||``)},a=r=>{t?.(`compositionend`,r),n.value&&(n.value=!1,f(()=>e(r)))};return{isComposing:n,handleComposition:e=>{e.type===`compositionend`?a(e):i(e)},handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:a}}function Ee(e){let t;function n(){if(e.value==null)return;let{selectionStart:n,selectionEnd:r,value:i}=e.value;n==null||r==null||(t={selectionStart:n,selectionEnd:r,value:i,beforeTxt:i.slice(0,Math.max(0,n)),afterTxt:i.slice(Math.max(0,r))})}function r(){if(e.value==null||t==null)return;let{value:n}=e.value,{beforeTxt:r,afterTxt:i,selectionStart:a}=t;if(r==null||i==null||a==null)return;let o=n.length;if(n.endsWith(i))o=n.length-i.length;else if(n.startsWith(r))o=r.length;else{let e=r[a-1],t=n.indexOf(e,a-1);t!==-1&&(o=t+1)}e.value.setSelectionRange(o,o)}return[n,r]}R();var J=le(_e(F({...F({name:`ElInput`,inheritAttrs:!1}),props:be,emits:K,setup(e,{expose:c,emit:u}){let p=e,g=se(),v=Ce(),y=ce(),le=P(()=>[p.type===`textarea`?R.b():L.b(),L.m(F.value),L.is(`disabled`,I.value),L.is(`exceed`,Ne.value),{[L.b(`group`)]:y.prepend||y.append,[L.m(`prefix`)]:y.prefix||p.prefixIcon,[L.m(`suffix`)]:y.suffix||p.suffixIcon||p.clearable||p.showPassword,[L.bm(`suffix`,`password-clear`)]:X.value&&je.value,[L.b(`hidden`)]:p.type===`hidden`},g.class]),de=P(()=>[L.e(`wrapper`),L.is(`focus`,K.value)]),{form:E,formItem:D}=a(),{inputId:_e}=i(p,{formItemContext:D}),F=s(),I=o(),L=ne(`input`),R=ne(`textarea`),z=O(),B=O(),V=M(!1),H=M(!1),U=M(),W=O(p.inputStyle),G=P(()=>z.value||B.value),{wrapperRef:be,isFocused:K,handleFocus:xe,handleBlur:Se}=we(G,{disabled:I,afterBlur(){var e;p.validateEvent&&((e=D?.validate)==null||e.call(D,`blur`).catch(e=>l()))}}),q=P(()=>E?.statusIcon??!1),J=P(()=>D?.validateState||``),De=P(()=>J.value&&fe[J.value]),Oe=P(()=>H.value?te:re),ke=P(()=>[g.style]),Ae=P(()=>[p.inputStyle,W.value,{resize:p.resize}]),Y=P(()=>ue(p.modelValue)?``:String(p.modelValue)),X=P(()=>p.clearable&&!I.value&&!p.readonly&&!!Y.value&&(K.value||V.value)),je=P(()=>p.showPassword&&!I.value&&!!Y.value),Z=P(()=>p.showWordLimit&&!!p.maxlength&&(p.type===`text`||p.type===`textarea`)&&!I.value&&!p.readonly&&!p.showPassword),Me=P(()=>Y.value.length),Ne=P(()=>!!Z.value&&Me.value>Number(p.maxlength)),Pe=P(()=>!!y.suffix||!!p.suffixIcon||X.value||p.showPassword||Z.value||!!J.value&&q.value),[Fe,Ie]=Ee(z);me(B,e=>{if(Le(),!Z.value||p.resize!==`both`)return;let{width:t}=e[0].contentRect;U.value={right:`calc(100% - ${t+15+6}px)`}});let Q=()=>{let{type:e,autosize:t}=p;if(!(!ee||e!==`textarea`||!B.value))if(t){let e=d(t)?t.minRows:void 0,n=d(t)?t.maxRows:void 0,r=ye(B.value,e,n);W.value={overflowY:`hidden`,...r},f(()=>{B.value.offsetHeight,W.value=r})}else W.value={minHeight:ye(B.value).minHeight}},Le=(e=>{let t=!1;return()=>{t||!p.autosize||B.value?.offsetParent!==null&&(setTimeout(e),t=!0)}})(Q),$=()=>{let e=G.value,t=p.formatter?p.formatter(Y.value):Y.value;!e||e.value===t||(e.value=t)},Re=async e=>{Fe();let{value:r}=e.target;if(p.formatter&&p.parser&&(r=p.parser(r)),!Be.value){if(r===Y.value){$();return}u(n,r),u(t,r),await f(),$(),Ie()}},ze=e=>{let{value:t}=e.target;p.formatter&&p.parser&&(t=p.parser(t)),u(r,t)},{isComposing:Be,handleCompositionStart:Ve,handleCompositionUpdate:He,handleCompositionEnd:Ue}=Te({emit:u,afterComposition:Re}),We=()=>{Fe(),H.value=!H.value,setTimeout(Ie)},Ge=()=>G.value?.focus(),Ke=()=>G.value?.blur(),qe=e=>{V.value=!1,u(`mouseleave`,e)},Je=e=>{V.value=!0,u(`mouseenter`,e)},Ye=e=>{u(`keydown`,e)},Xe=()=>{var e;(e=G.value)==null||e.select()},Ze=()=>{u(n,``),u(r,``),u(`clear`),u(t,``)};return h(()=>p.modelValue,()=>{var e;f(()=>Q()),p.validateEvent&&((e=D?.validate)==null||e.call(D,`change`).catch(e=>l()))}),h(Y,()=>$()),h(()=>p.type,async()=>{await f(),$(),Q()}),ie(()=>{!p.formatter&&p.parser,$(),f(Q)}),c({input:z,textarea:B,ref:G,textareaStyle:Ae,autosize:he(p,`autosize`),isComposing:Be,focus:Ge,blur:Ke,select:Xe,clear:Ze,resizeTextarea:Q}),(e,t)=>(m(),k(`div`,{class:_([N(le),{[N(L).bm(`group`,`append`)]:e.$slots.append,[N(L).bm(`group`,`prepend`)]:e.$slots.prepend}]),style:ae(N(ke)),onMouseenter:Je,onMouseleave:qe},[A(` input `),e.type===`textarea`?(m(),k(ge,{key:1},[A(` textarea `),w(`textarea`,oe({id:N(_e),ref_key:`textarea`,ref:B,class:[N(R).e(`inner`),N(L).is(`focus`,N(K))]},N(v),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:N(I),readonly:e.readonly,autocomplete:e.autocomplete,style:N(Ae),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:N(Ve),onCompositionupdate:N(He),onCompositionend:N(Ue),onInput:Re,onFocus:N(xe),onBlur:N(Se),onChange:ze,onKeydown:Ye}),null,16,[`id`,`minlength`,`maxlength`,`tabindex`,`disabled`,`readonly`,`autocomplete`,`aria-label`,`placeholder`,`form`,`autofocus`,`rows`,`role`,`onCompositionstart`,`onCompositionupdate`,`onCompositionend`,`onFocus`,`onBlur`]),N(Z)?(m(),k(`span`,{key:0,style:ae(U.value),class:_(N(L).e(`count`))},x(N(Me))+` / `+x(e.maxlength),7)):A(`v-if`,!0)],64)):(m(),k(ge,{key:0},[A(` prepend slot `),e.$slots.prepend?(m(),k(`div`,{key:0,class:_(N(L).be(`group`,`prepend`))},[b(e.$slots,`prepend`)],2)):A(`v-if`,!0),w(`div`,{ref_key:`wrapperRef`,ref:be,class:_(N(de))},[A(` prefix slot `),e.$slots.prefix||e.prefixIcon?(m(),k(`span`,{key:0,class:_(N(L).e(`prefix`))},[w(`span`,{class:_(N(L).e(`prefix-inner`))},[b(e.$slots,`prefix`),e.prefixIcon?(m(),T(N(C),{key:0,class:_(N(L).e(`icon`))},{default:j(()=>[(m(),T(S(e.prefixIcon)))]),_:1},8,[`class`])):A(`v-if`,!0)],2)],2)):A(`v-if`,!0),w(`input`,oe({id:N(_e),ref_key:`input`,ref:z,class:N(L).e(`inner`)},N(v),{name:e.name,minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?H.value?`text`:`password`:e.type,disabled:N(I),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,inputmode:e.inputmode,onCompositionstart:N(Ve),onCompositionupdate:N(He),onCompositionend:N(Ue),onInput:Re,onChange:ze,onKeydown:Ye}),null,16,[`id`,`name`,`minlength`,`maxlength`,`type`,`disabled`,`readonly`,`autocomplete`,`tabindex`,`aria-label`,`placeholder`,`form`,`autofocus`,`role`,`inputmode`,`onCompositionstart`,`onCompositionupdate`,`onCompositionend`]),A(` suffix slot `),N(Pe)?(m(),k(`span`,{key:1,class:_(N(L).e(`suffix`))},[w(`span`,{class:_(N(L).e(`suffix-inner`))},[!N(X)||!N(je)||!N(Z)?(m(),k(ge,{key:0},[b(e.$slots,`suffix`),e.suffixIcon?(m(),T(N(C),{key:0,class:_(N(L).e(`icon`))},{default:j(()=>[(m(),T(S(e.suffixIcon)))]),_:1},8,[`class`])):A(`v-if`,!0)],64)):A(`v-if`,!0),N(X)?(m(),T(N(C),{key:1,class:_([N(L).e(`icon`),N(L).e(`clear`)]),onMousedown:pe(N(ve),[`prevent`]),onClick:Ze},{default:j(()=>[(m(),T(S(e.clearIcon)))]),_:1},8,[`class`,`onMousedown`])):A(`v-if`,!0),N(je)?(m(),T(N(C),{key:2,class:_([N(L).e(`icon`),N(L).e(`password`)]),onClick:We},{default:j(()=>[(m(),T(S(N(Oe))))]),_:1},8,[`class`])):A(`v-if`,!0),N(Z)?(m(),k(`span`,{key:3,class:_(N(L).e(`count`))},[w(`span`,{class:_(N(L).e(`count-inner`))},x(N(Me))+` / `+x(e.maxlength),3)],2)):A(`v-if`,!0),N(J)&&N(De)&&N(q)?(m(),T(N(C),{key:4,class:_([N(L).e(`icon`),N(L).e(`validateIcon`),N(L).is(`loading`,N(J)===`validating`)])},{default:j(()=>[(m(),T(S(N(De))))]),_:1},8,[`class`])):A(`v-if`,!0)],2)],2)):A(`v-if`,!0)],2),A(` append slot `),e.$slots.append?(m(),k(`div`,{key:1,class:_(N(L).be(`group`,`append`))},[b(e.$slots,`append`)],2)):A(`v-if`,!0)],64))],38))}}),[[`__file`,`input.vue`]]));export{V as a,Ce as i,Te as n,we as r,J as t};