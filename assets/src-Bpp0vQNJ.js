import{t as e}from"./css-BxD6NdqY.js";import{n as t,r as n,t as r}from"./dropdown-D3zFqCEz.js";import{$r as i,Fr as a,Gr as o,Mr as s,Ui as c,Y as l,_r as u,dr as d,gr as f,kr as p,mr as m,qi as h,ri as g,vr as _}from"./index-DkS91mYz.js";var v=c(((e,t)=>{(function(n,r){typeof e==`object`&&typeof t==`object`?t.exports=r():typeof define==`function`&&define.amd?define([],r):typeof e==`object`?e.QRCodeStyling=r():n.QRCodeStyling=r()})(e,(()=>(()=>{var e={873:(e,t)=>{var n,r,i=function(){var e=function(e,t){var n=e,r=o[t],i=null,a=0,c=null,g=[],_={},y=function(e,t){i=function(e){for(var t=Array(e),n=0;n<e;n+=1){t[n]=Array(e);for(var r=0;r<e;r+=1)t[n][r]=null}return t}(a=4*n+17),b(0,0),b(a-7,0),b(0,a-7),S(),x(),w(e,t),n>=7&&C(e),c??=E(n,r,g),T(c,t)},b=function(e,t){for(var n=-1;n<=7;n+=1)if(!(e+n<=-1||a<=e+n))for(var r=-1;r<=7;r+=1)t+r<=-1||a<=t+r||(i[e+n][t+r]=0<=n&&n<=6&&(r==0||r==6)||0<=r&&r<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=r&&r<=4)},x=function(){for(var e=8;e<a-8;e+=1)i[e][6]??(i[e][6]=e%2==0);for(var t=8;t<a-8;t+=1)i[6][t]??(i[6][t]=t%2==0)},S=function(){for(var e=s.getPatternPosition(n),t=0;t<e.length;t+=1)for(var r=0;r<e.length;r+=1){var a=e[t],o=e[r];if(i[a][o]==null)for(var c=-2;c<=2;c+=1)for(var l=-2;l<=2;l+=1)i[a+c][o+l]=c==-2||c==2||l==-2||l==2||c==0&&l==0}},C=function(e){for(var t=s.getBCHTypeNumber(n),r=0;r<18;r+=1){var o=!e&&(t>>r&1)==1;i[Math.floor(r/3)][r%3+a-8-3]=o}for(r=0;r<18;r+=1)o=!e&&(t>>r&1)==1,i[r%3+a-8-3][Math.floor(r/3)]=o},w=function(e,t){for(var n=r<<3|t,o=s.getBCHTypeInfo(n),c=0;c<15;c+=1){var l=!e&&(o>>c&1)==1;c<6?i[c][8]=l:c<8?i[c+1][8]=l:i[a-15+c][8]=l}for(c=0;c<15;c+=1)l=!e&&(o>>c&1)==1,c<8?i[8][a-c-1]=l:c<9?i[8][15-c-1+1]=l:i[8][15-c-1]=l;i[a-8][8]=!e},T=function(e,t){for(var n=-1,r=a-1,o=7,c=0,l=s.getMaskFunction(t),u=a-1;u>0;u-=2)for(u==6&&--u;;){for(var d=0;d<2;d+=1)if(i[r][u-d]==null){var f=!1;c<e.length&&(f=(e[c]>>>o&1)==1),l(r,u-d)&&(f=!f),i[r][u-d]=f,--o==-1&&(c+=1,o=7)}if((r+=n)<0||a<=r){r-=n,n=-n;break}}},E=function(e,t,n){for(var r=u.getRSBlocks(e,t),i=d(),a=0;a<n.length;a+=1){var o=n[a];i.put(o.getMode(),4),i.put(o.getLength(),s.getLengthInBits(o.getMode(),e)),o.write(i)}var c=0;for(a=0;a<r.length;a+=1)c+=r[a].dataCount;if(i.getLengthInBits()>8*c)throw`code length overflow. (`+i.getLengthInBits()+`>`+8*c+`)`;for(i.getLengthInBits()+4<=8*c&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*c||(i.put(236,8),i.getLengthInBits()>=8*c));)i.put(17,8);return function(e,t){for(var n=0,r=0,i=0,a=Array(t.length),o=Array(t.length),c=0;c<t.length;c+=1){var u=t[c].dataCount,d=t[c].totalCount-u;r=Math.max(r,u),i=Math.max(i,d),a[c]=Array(u);for(var f=0;f<a[c].length;f+=1)a[c][f]=255&e.getBuffer()[f+n];n+=u;var p=s.getErrorCorrectPolynomial(d),m=l(a[c],p.getLength()-1).mod(p);for(o[c]=Array(p.getLength()-1),f=0;f<o[c].length;f+=1){var h=f+m.getLength()-o[c].length;o[c][f]=h>=0?m.getAt(h):0}}var g=0;for(f=0;f<t.length;f+=1)g+=t[f].totalCount;var _=Array(g),v=0;for(f=0;f<r;f+=1)for(c=0;c<t.length;c+=1)f<a[c].length&&(_[v]=a[c][f],v+=1);for(f=0;f<i;f+=1)for(c=0;c<t.length;c+=1)f<o[c].length&&(_[v]=o[c][f],v+=1);return _}(i,r)};_.addData=function(e,t){var n=null;switch(t||=`Byte`){case`Numeric`:n=f(e);break;case`Alphanumeric`:n=p(e);break;case`Byte`:n=m(e);break;case`Kanji`:n=h(e);break;default:throw`mode:`+t}g.push(n),c=null},_.isDark=function(e,t){if(e<0||a<=e||t<0||a<=t)throw e+`,`+t;return i[e][t]},_.getModuleCount=function(){return a},_.make=function(){if(n<1){for(var e=1;e<40;e++){for(var t=u.getRSBlocks(e,r),i=d(),a=0;a<g.length;a++){var o=g[a];i.put(o.getMode(),4),i.put(o.getLength(),s.getLengthInBits(o.getMode(),e)),o.write(i)}var c=0;for(a=0;a<t.length;a++)c+=t[a].dataCount;if(i.getLengthInBits()<=8*c)break}n=e}y(!1,function(){for(var e=0,t=0,n=0;n<8;n+=1){y(!0,n);var r=s.getLostPoint(_);(n==0||e>r)&&(e=r,t=n)}return t}())},_.createTableTag=function(e,t){e||=2;var n=``;n+=`<table style="`,n+=` border-width: 0px; border-style: none;`,n+=` border-collapse: collapse;`,n+=` padding: 0px; margin: `+(t=t===void 0?4*e:t)+`px;`,n+=`">`,n+=`<tbody>`;for(var r=0;r<_.getModuleCount();r+=1){n+=`<tr>`;for(var i=0;i<_.getModuleCount();i+=1)n+=`<td style="`,n+=` border-width: 0px; border-style: none;`,n+=` border-collapse: collapse;`,n+=` padding: 0px; margin: 0px;`,n+=` width: `+e+`px;`,n+=` height: `+e+`px;`,n+=` background-color: `,n+=_.isDark(r,i)?`#000000`:`#ffffff`,n+=`;`,n+=`"/>`;n+=`</tr>`}return(n+=`</tbody>`)+`</table>`},_.createSvgTag=function(e,t,n,r){var i={};typeof arguments[0]==`object`&&(e=(i=arguments[0]).cellSize,t=i.margin,n=i.alt,r=i.title),e||=2,t=t===void 0?4*e:t,(n=typeof n==`string`?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||`qrcode-description`:null,(r=typeof r==`string`?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||`qrcode-title`:null;var a,o,s,c,l=_.getModuleCount()*e+2*t,u=``;for(c=`l`+e+`,0 0,`+e+` -`+e+`,0 0,-`+e+`z `,u+=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg"`,u+=i.scalable?``:` width="`+l+`px" height="`+l+`px"`,u+=` viewBox="0 0 `+l+` `+l+`" `,u+=` preserveAspectRatio="xMinYMin meet"`,u+=r.text||n.text?` role="img" aria-labelledby="`+D([r.id,n.id].join(` `).trim())+`"`:``,u+=`>`,u+=r.text?`<title id="`+D(r.id)+`">`+D(r.text)+`</title>`:``,u+=n.text?`<description id="`+D(n.id)+`">`+D(n.text)+`</description>`:``,u+=`<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>`,u+=`<path d="`,o=0;o<_.getModuleCount();o+=1)for(s=o*e+t,a=0;a<_.getModuleCount();a+=1)_.isDark(o,a)&&(u+=`M`+(a*e+t)+`,`+s+c);return(u+=`" stroke="transparent" fill="black"/>`)+`</svg>`},_.createDataURL=function(e,t){e||=2,t=t===void 0?4*e:t;var n=_.getModuleCount()*e+2*t,r=t,i=n-t;return v(n,n,(function(t,n){if(r<=t&&t<i&&r<=n&&n<i){var a=Math.floor((t-r)/e),o=Math.floor((n-r)/e);return _.isDark(o,a)?0:1}return 1}))},_.createImgTag=function(e,t,n){e||=2,t=t===void 0?4*e:t;var r=_.getModuleCount()*e+2*t,i=``;return i+=`<img`,i+=` src="`,i+=_.createDataURL(e,t),i+=`"`,i+=` width="`,i+=r,i+=`"`,i+=` height="`,i+=r,i+=`"`,n&&(i+=` alt="`,i+=D(n),i+=`"`),i+`/>`};var D=function(e){for(var t=``,n=0;n<e.length;n+=1){var r=e.charAt(n);switch(r){case`<`:t+=`&lt;`;break;case`>`:t+=`&gt;`;break;case`&`:t+=`&amp;`;break;case`"`:t+=`&quot;`;break;default:t+=r}}return t};return _.createASCII=function(e,t){if((e||=1)<2)return function(e){e=e===void 0?2:e;var t,n,r,i,a,o=1*_.getModuleCount()+2*e,s=e,c=o-e,l={"██":`█`,"█ ":`▀`," █":`▄`,"  ":` `},u={"██":`▀`,"█ ":`▀`," █":` `,"  ":` `},d=``;for(t=0;t<o;t+=2){for(r=Math.floor((t-s)/1),i=Math.floor((t+1-s)/1),n=0;n<o;n+=1)a=`█`,s<=n&&n<c&&s<=t&&t<c&&_.isDark(r,Math.floor((n-s)/1))&&(a=` `),s<=n&&n<c&&s<=t+1&&t+1<c&&_.isDark(i,Math.floor((n-s)/1))?a+=` `:a+=`█`,d+=e<1&&t+1>=c?u[a]:l[a];d+=`
`}return o%2&&e>0?d.substring(0,d.length-o-1)+Array(o+1).join(`▀`):d.substring(0,d.length-1)}(t);--e,t=t===void 0?2*e:t;var n,r,i,a,o=_.getModuleCount()*e+2*t,s=t,c=o-t,l=Array(e+1).join(`██`),u=Array(e+1).join(`  `),d=``,f=``;for(n=0;n<o;n+=1){for(i=Math.floor((n-s)/e),f=``,r=0;r<o;r+=1)a=1,s<=r&&r<c&&s<=n&&n<c&&_.isDark(i,Math.floor((r-s)/e))&&(a=0),f+=a?l:u;for(i=0;i<e;i+=1)d+=f+`
`}return d.substring(0,d.length-1)},_.renderTo2dContext=function(e,t){t||=2;for(var n=_.getModuleCount(),r=0;r<n;r++)for(var i=0;i<n;i++)e.fillStyle=_.isDark(r,i)?`black`:`white`,e.fillRect(r*t,i*t,t,t)},_};e.stringToBytes=(e.stringToBytesFuncs={default:function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t.push(255&r)}return t}}).default,e.createStringToBytes=function(e,t){var n=function(){for(var n=_(e),r=function(){var e=n.read();if(e==-1)throw`eof`;return e},i=0,a={};;){var o=n.read();if(o==-1)break;var s=r(),c=r()<<8|r();a[String.fromCharCode(o<<8|s)]=c,i+=1}if(i!=t)throw i+` != `+t;return a}(),r=63;return function(e){for(var t=[],i=0;i<e.length;i+=1){var a=e.charCodeAt(i);if(a<128)t.push(a);else{var o=n[e.charAt(i)];typeof o==`number`?(255&o)==o?t.push(o):(t.push(o>>>8),t.push(255&o)):t.push(r)}}return t}};var t,n,r,i,a,o={L:1,M:0,Q:3,H:2},s=(t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,r=7973,a=function(e){for(var t=0;e!=0;)t+=1,e>>>=1;return t},(i={}).getBCHTypeInfo=function(e){for(var t=e<<10;a(t)-a(n)>=0;)t^=n<<a(t)-a(n);return 21522^(e<<10|t)},i.getBCHTypeNumber=function(e){for(var t=e<<12;a(t)-a(r)>=0;)t^=r<<a(t)-a(r);return e<<12|t},i.getPatternPosition=function(e){return t[e-1]},i.getMaskFunction=function(e){switch(e){case 0:return function(e,t){return(e+t)%2==0};case 1:return function(e,t){return e%2==0};case 2:return function(e,t){return t%3==0};case 3:return function(e,t){return(e+t)%3==0};case 4:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case 5:return function(e,t){return e*t%2+e*t%3==0};case 6:return function(e,t){return(e*t%2+e*t%3)%2==0};case 7:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw`bad maskPattern:`+e}},i.getErrorCorrectPolynomial=function(e){for(var t=l([1],0),n=0;n<e;n+=1)t=t.multiply(l([1,c.gexp(n)],0));return t},i.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case 1:return 10;case 2:return 9;case 4:case 8:return 8;default:throw`mode:`+e}else if(t<27)switch(e){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw`mode:`+e}else{if(!(t<41))throw`type:`+t;switch(e){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw`mode:`+e}}},i.getLostPoint=function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r+=1)for(var i=0;i<t;i+=1){for(var a=0,o=e.isDark(r,i),s=-1;s<=1;s+=1)if(!(r+s<0||t<=r+s))for(var c=-1;c<=1;c+=1)i+c<0||t<=i+c||s==0&&c==0||o==e.isDark(r+s,i+c)&&(a+=1);a>5&&(n+=3+a-5)}for(r=0;r<t-1;r+=1)for(i=0;i<t-1;i+=1){var l=0;e.isDark(r,i)&&(l+=1),e.isDark(r+1,i)&&(l+=1),e.isDark(r,i+1)&&(l+=1),e.isDark(r+1,i+1)&&(l+=1),l!=0&&l!=4||(n+=3)}for(r=0;r<t;r+=1)for(i=0;i<t-6;i+=1)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(i=0;i<t;i+=1)for(r=0;r<t-6;r+=1)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);var u=0;for(i=0;i<t;i+=1)for(r=0;r<t;r+=1)e.isDark(r,i)&&(u+=1);return n+Math.abs(100*u/t/t-50)/5*10},i),c=function(){for(var e=Array(256),t=Array(256),n=0;n<8;n+=1)e[n]=1<<n;for(n=8;n<256;n+=1)e[n]=e[n-4]^e[n-5]^e[n-6]^e[n-8];for(n=0;n<255;n+=1)t[e[n]]=n;return{glog:function(e){if(e<1)throw`glog(`+e+`)`;return t[e]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e[t]}}}();function l(e,t){if(e.length===void 0)throw e.length+`/`+t;var n=function(){for(var n=0;n<e.length&&e[n]==0;)n+=1;for(var r=Array(e.length-n+t),i=0;i<e.length-n;i+=1)r[i]=e[i+n];return r}(),r={getAt:function(e){return n[e]},getLength:function(){return n.length},multiply:function(e){for(var t=Array(r.getLength()+e.getLength()-1),n=0;n<r.getLength();n+=1)for(var i=0;i<e.getLength();i+=1)t[n+i]^=c.gexp(c.glog(r.getAt(n))+c.glog(e.getAt(i)));return l(t,0)},mod:function(e){if(r.getLength()-e.getLength()<0)return r;for(var t=c.glog(r.getAt(0))-c.glog(e.getAt(0)),n=Array(r.getLength()),i=0;i<r.getLength();i+=1)n[i]=r.getAt(i);for(i=0;i<e.getLength();i+=1)n[i]^=c.gexp(c.glog(e.getAt(i))+t);return l(n,0).mod(e)}};return r}var u=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var n={};return n.totalCount=e,n.dataCount=t,n};return{getRSBlocks:function(n,r){var i=function(t,n){switch(n){case o.L:return e[4*(t-1)+0];case o.M:return e[4*(t-1)+1];case o.Q:return e[4*(t-1)+2];case o.H:return e[4*(t-1)+3];default:return}}(n,r);if(i===void 0)throw`bad rs block @ typeNumber:`+n+`/errorCorrectionLevel:`+r;for(var a=i.length/3,s=[],c=0;c<a;c+=1)for(var l=i[3*c+0],u=i[3*c+1],d=i[3*c+2],f=0;f<l;f+=1)s.push(t(u,d));return s}}}(),d=function(){var e=[],t=0,n={getBuffer:function(){return e},getAt:function(t){return(e[Math.floor(t/8)]>>>7-t%8&1)==1},put:function(e,t){for(var r=0;r<t;r+=1)n.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return t},putBit:function(n){var r=Math.floor(t/8);e.length<=r&&e.push(0),n&&(e[r]|=128>>>t%8),t+=1}};return n},f=function(e){var t=e,n={getMode:function(){return 1},getLength:function(e){return t.length},write:function(e){for(var n=t,i=0;i+2<n.length;)e.put(r(n.substring(i,i+3)),10),i+=3;i<n.length&&(n.length-i==1?e.put(r(n.substring(i,i+1)),4):n.length-i==2&&e.put(r(n.substring(i,i+2)),7))}},r=function(e){for(var t=0,n=0;n<e.length;n+=1)t=10*t+i(e.charAt(n));return t},i=function(e){if(`0`<=e&&e<=`9`)return e.charCodeAt(0)-48;throw`illegal char :`+e};return n},p=function(e){var t=e,n={getMode:function(){return 2},getLength:function(e){return t.length},write:function(e){for(var n=t,i=0;i+1<n.length;)e.put(45*r(n.charAt(i))+r(n.charAt(i+1)),11),i+=2;i<n.length&&e.put(r(n.charAt(i)),6)}},r=function(e){if(`0`<=e&&e<=`9`)return e.charCodeAt(0)-48;if(`A`<=e&&e<=`Z`)return e.charCodeAt(0)-65+10;switch(e){case` `:return 36;case`$`:return 37;case`%`:return 38;case`*`:return 39;case`+`:return 40;case`-`:return 41;case`.`:return 42;case`/`:return 43;case`:`:return 44;default:throw`illegal char :`+e}};return n},m=function(t){var n=e.stringToBytes(t);return{getMode:function(){return 4},getLength:function(e){return n.length},write:function(e){for(var t=0;t<n.length;t+=1)e.put(n[t],8)}}},h=function(t){var n=e.stringToBytesFuncs.SJIS;if(!n)throw`sjis not supported.`;(function(){var e=n(`友`);if(e.length!=2||(e[0]<<8|e[1])!=38726)throw`sjis not supported.`})();var r=n(t);return{getMode:function(){return 8},getLength:function(e){return~~(r.length/2)},write:function(e){for(var t=r,n=0;n+1<t.length;){var i=(255&t[n])<<8|255&t[n+1];if(33088<=i&&i<=40956)i-=33088;else{if(!(57408<=i&&i<=60351))throw`illegal char at `+(n+1)+`/`+i;i-=49472}i=192*(i>>>8&255)+(255&i),e.put(i,13),n+=2}if(n<t.length)throw`illegal char at `+(n+1)}}},g=function(){var e=[],t={writeByte:function(t){e.push(255&t)},writeShort:function(e){t.writeByte(e),t.writeByte(e>>>8)},writeBytes:function(e,n,r){n||=0,r||=e.length;for(var i=0;i<r;i+=1)t.writeByte(e[i+n])},writeString:function(e){for(var n=0;n<e.length;n+=1)t.writeByte(e.charCodeAt(n))},toByteArray:function(){return e},toString:function(){var t=``;t+=`[`;for(var n=0;n<e.length;n+=1)n>0&&(t+=`,`),t+=e[n];return t+`]`}};return t},_=function(e){var t=e,n=0,r=0,i=0,a={read:function(){for(;i<8;){if(n>=t.length){if(i==0)return-1;throw`unexpected end of file./`+i}var e=t.charAt(n);if(n+=1,e==`=`)return i=0,-1;e.match(/^\s$/)||(r=r<<6|o(e.charCodeAt(0)),i+=6)}var a=r>>>i-8&255;return i-=8,a}},o=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(e==43)return 62;if(e==47)return 63;throw`c:`+e};return a},v=function(e,t,n){for(var r=function(e,t){var n=e,r=t,i=Array(e*t),a={setPixel:function(e,t,r){i[t*n+e]=r},write:function(e){e.writeString(`GIF87a`),e.writeShort(n),e.writeShort(r),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(`,`),e.writeShort(0),e.writeShort(0),e.writeShort(n),e.writeShort(r),e.writeByte(0);var t=o(2);e.writeByte(2);for(var i=0;t.length-i>255;)e.writeByte(255),e.writeBytes(t,i,255),i+=255;e.writeByte(t.length-i),e.writeBytes(t,i,t.length-i),e.writeByte(0),e.writeString(`;`)}},o=function(e){for(var t=1<<e,n=1+(1<<e),r=e+1,a=s(),o=0;o<t;o+=1)a.add(String.fromCharCode(o));a.add(String.fromCharCode(t)),a.add(String.fromCharCode(n));var c,l,u,d=g(),f=(c=d,l=0,u=0,{write:function(e,t){if(e>>>t)throw`length over`;for(;l+t>=8;)c.writeByte(255&(e<<l|u)),t-=8-l,e>>>=8-l,u=0,l=0;u|=e<<l,l+=t},flush:function(){l>0&&c.writeByte(u)}});f.write(t,r);var p=0,m=String.fromCharCode(i[p]);for(p+=1;p<i.length;){var h=String.fromCharCode(i[p]);p+=1,a.contains(m+h)?m+=h:(f.write(a.indexOf(m),r),a.size()<4095&&(a.size()==1<<r&&(r+=1),a.add(m+h)),m=h)}return f.write(a.indexOf(m),r),f.write(n,r),f.flush(),d.toByteArray()},s=function(){var e={},t=0,n={add:function(r){if(n.contains(r))throw`dup key:`+r;e[r]=t,t+=1},size:function(){return t},indexOf:function(t){return e[t]},contains:function(t){return e[t]!==void 0}};return n};return a}(e,t),i=0;i<t;i+=1)for(var a=0;a<e;a+=1)r.setPixel(a,i,n(a,i));var o=g();r.write(o);for(var s=function(){var e=0,t=0,n=0,r=``,i={},a=function(e){r+=String.fromCharCode(o(63&e))},o=function(e){if(!(e<0)){if(e<26)return 65+e;if(e<52)return e-26+97;if(e<62)return e-52+48;if(e==62)return 43;if(e==63)return 47}throw`n:`+e};return i.writeByte=function(r){for(e=e<<8|255&r,t+=8,n+=1;t>=6;)a(e>>>t-6),t-=6},i.flush=function(){if(t>0&&(a(e<<6-t),e=0,t=0),n%3!=0)for(var i=3-n%3,o=0;o<i;o+=1)r+=`=`},i.toString=function(){return r},i}(),c=o.toByteArray(),l=0;l<c.length;l+=1)s.writeByte(c[l]);return s.flush(),`data:image/gif;base64,`+s};return e}();i.stringToBytesFuncs[`UTF-8`]=function(e){return function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return t}(e)},(r=typeof(n=function(){return i})==`function`?n.apply(t,[]):n)===void 0||(e.exports=r)}},t={};function n(r){var i=t[r];if(i!==void 0)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};return(()=>{n.d(r,{default:()=>D});let e=e=>!!e&&typeof e==`object`&&!Array.isArray(e);function t(n,...r){if(!r.length)return n;let i=r.shift();return i!==void 0&&e(n)&&e(i)?(n=Object.assign({},n),Object.keys(i).forEach((r=>{let a=n[r],o=i[r];Array.isArray(a)&&Array.isArray(o)?n[r]=o:e(a)&&e(o)?n[r]=t(Object.assign({},a),o):n[r]=o})),t(n,...r)):n}function i(e,t){let n=document.createElement(`a`);n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}let a={L:.07,M:.15,Q:.25,H:.3};class o{constructor({svg:e,type:t,window:n}){this._svg=e,this._type=t,this._window=n}draw(e,t,n,r){let i;switch(this._type){case`dots`:i=this._drawDot;break;case`classy`:i=this._drawClassy;break;case`classy-rounded`:i=this._drawClassyRounded;break;case`rounded`:i=this._drawRounded;break;case`extra-rounded`:i=this._drawExtraRounded;break;default:i=this._drawSquare}i.call(this,{x:e,y:t,size:n,getNeighbor:r})}_rotateFigure({x:e,y:t,size:n,rotation:r=0,draw:i}){var a;let o=e+n/2,s=t+n/2;i(),(a=this._element)==null||a.setAttribute(`transform`,`rotate(${180*r/Math.PI},${o},${s})`)}_basicDot(e){let{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`circle`),this._element.setAttribute(`cx`,String(n+t/2)),this._element.setAttribute(`cy`,String(r+t/2)),this._element.setAttribute(`r`,String(t/2))}}))}_basicSquare(e){let{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`rect`),this._element.setAttribute(`x`,String(n)),this._element.setAttribute(`y`,String(r)),this._element.setAttribute(`width`,String(t)),this._element.setAttribute(`height`,String(t))}}))}_basicSideRounded(e){let{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`path`),this._element.setAttribute(`d`,`M ${n} ${r}v ${t}h `+t/2+`a ${t/2} ${t/2}, 0, 0, 0, 0 ${-t}`)}}))}_basicCornerRounded(e){let{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`path`),this._element.setAttribute(`d`,`M ${n} ${r}v ${t}h ${t}v `+-t/2+`a ${t/2} ${t/2}, 0, 0, 0, ${-t/2} ${-t/2}`)}}))}_basicCornerExtraRounded(e){let{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`path`),this._element.setAttribute(`d`,`M ${n} ${r}v ${t}h ${t}a ${t} ${t}, 0, 0, 0, ${-t} ${-t}`)}}))}_basicCornersRounded(e){let{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`path`),this._element.setAttribute(`d`,`M ${n} ${r}v `+t/2+`a ${t/2} ${t/2}, 0, 0, 0, ${t/2} ${t/2}h `+t/2+`v `+-t/2+`a ${t/2} ${t/2}, 0, 0, 0, ${-t/2} ${-t/2}`)}}))}_drawDot({x:e,y:t,size:n}){this._basicDot({x:e,y:t,size:n,rotation:0})}_drawSquare({x:e,y:t,size:n}){this._basicSquare({x:e,y:t,size:n,rotation:0})}_drawRounded({x:e,y:t,size:n,getNeighbor:r}){let i=r?+r(-1,0):0,a=r?+r(1,0):0,o=r?+r(0,-1):0,s=r?+r(0,1):0,c=i+a+o+s;if(c!==0)if(c>2||i&&a||o&&s)this._basicSquare({x:e,y:t,size:n,rotation:0});else{if(c===2){let r=0;i&&o?r=Math.PI/2:o&&a?r=Math.PI:a&&s&&(r=-Math.PI/2),this._basicCornerRounded({x:e,y:t,size:n,rotation:r});return}if(c===1){let r=0;o?r=Math.PI/2:a?r=Math.PI:s&&(r=-Math.PI/2),this._basicSideRounded({x:e,y:t,size:n,rotation:r});return}}else this._basicDot({x:e,y:t,size:n,rotation:0})}_drawExtraRounded({x:e,y:t,size:n,getNeighbor:r}){let i=r?+r(-1,0):0,a=r?+r(1,0):0,o=r?+r(0,-1):0,s=r?+r(0,1):0,c=i+a+o+s;if(c!==0)if(c>2||i&&a||o&&s)this._basicSquare({x:e,y:t,size:n,rotation:0});else{if(c===2){let r=0;i&&o?r=Math.PI/2:o&&a?r=Math.PI:a&&s&&(r=-Math.PI/2),this._basicCornerExtraRounded({x:e,y:t,size:n,rotation:r});return}if(c===1){let r=0;o?r=Math.PI/2:a?r=Math.PI:s&&(r=-Math.PI/2),this._basicSideRounded({x:e,y:t,size:n,rotation:r});return}}else this._basicDot({x:e,y:t,size:n,rotation:0})}_drawClassy({x:e,y:t,size:n,getNeighbor:r}){let i=r?+r(-1,0):0,a=r?+r(1,0):0,o=r?+r(0,-1):0,s=r?+r(0,1):0;i+a+o+s===0?this._basicCornersRounded({x:e,y:t,size:n,rotation:Math.PI/2}):i||o?a||s?this._basicSquare({x:e,y:t,size:n,rotation:0}):this._basicCornerRounded({x:e,y:t,size:n,rotation:Math.PI/2}):this._basicCornerRounded({x:e,y:t,size:n,rotation:-Math.PI/2})}_drawClassyRounded({x:e,y:t,size:n,getNeighbor:r}){let i=r?+r(-1,0):0,a=r?+r(1,0):0,o=r?+r(0,-1):0,s=r?+r(0,1):0;i+a+o+s===0?this._basicCornersRounded({x:e,y:t,size:n,rotation:Math.PI/2}):i||o?a||s?this._basicSquare({x:e,y:t,size:n,rotation:0}):this._basicCornerExtraRounded({x:e,y:t,size:n,rotation:Math.PI/2}):this._basicCornerExtraRounded({x:e,y:t,size:n,rotation:-Math.PI/2})}}let s={dot:`dot`,square:`square`,extraRounded:`extra-rounded`},c=Object.values(s);class l{constructor({svg:e,type:t,window:n}){this._svg=e,this._type=t,this._window=n}draw(e,t,n,r){let i;switch(this._type){case s.square:i=this._drawSquare;break;case s.extraRounded:i=this._drawExtraRounded;break;default:i=this._drawDot}i.call(this,{x:e,y:t,size:n,rotation:r})}_rotateFigure({x:e,y:t,size:n,rotation:r=0,draw:i}){var a;let o=e+n/2,s=t+n/2;i(),(a=this._element)==null||a.setAttribute(`transform`,`rotate(${180*r/Math.PI},${o},${s})`)}_basicDot(e){let{size:t,x:n,y:r}=e,i=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`path`),this._element.setAttribute(`clip-rule`,`evenodd`),this._element.setAttribute(`d`,`M ${n+t/2} ${r}a ${t/2} ${t/2} 0 1 0 0.1 0zm 0 ${i}a ${t/2-i} ${t/2-i} 0 1 1 -0.1 0Z`)}}))}_basicSquare(e){let{size:t,x:n,y:r}=e,i=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`path`),this._element.setAttribute(`clip-rule`,`evenodd`),this._element.setAttribute(`d`,`M ${n} ${r}v ${t}h ${t}v `+-t+`zM ${n+i} ${r+i}h `+(t-2*i)+`v `+(t-2*i)+`h `+(2*i-t)+`z`)}}))}_basicExtraRounded(e){let{size:t,x:n,y:r}=e,i=t/7;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`path`),this._element.setAttribute(`clip-rule`,`evenodd`),this._element.setAttribute(`d`,`M ${n} ${r+2.5*i}v `+2*i+`a ${2.5*i} ${2.5*i}, 0, 0, 0, ${2.5*i} ${2.5*i}h `+2*i+`a ${2.5*i} ${2.5*i}, 0, 0, 0, ${2.5*i} ${2.5*-i}v `+-2*i+`a ${2.5*i} ${2.5*i}, 0, 0, 0, ${2.5*-i} ${2.5*-i}h `+-2*i+`a ${2.5*i} ${2.5*i}, 0, 0, 0, ${2.5*-i} ${2.5*i}M ${n+2.5*i} ${r+i}h `+2*i+`a ${1.5*i} ${1.5*i}, 0, 0, 1, ${1.5*i} ${1.5*i}v `+2*i+`a ${1.5*i} ${1.5*i}, 0, 0, 1, ${1.5*-i} ${1.5*i}h `+-2*i+`a ${1.5*i} ${1.5*i}, 0, 0, 1, ${1.5*-i} ${1.5*-i}v `+-2*i+`a ${1.5*i} ${1.5*i}, 0, 0, 1, ${1.5*i} ${1.5*-i}`)}}))}_drawDot({x:e,y:t,size:n,rotation:r}){this._basicDot({x:e,y:t,size:n,rotation:r})}_drawSquare({x:e,y:t,size:n,rotation:r}){this._basicSquare({x:e,y:t,size:n,rotation:r})}_drawExtraRounded({x:e,y:t,size:n,rotation:r}){this._basicExtraRounded({x:e,y:t,size:n,rotation:r})}}let u={dot:`dot`,square:`square`},d=Object.values(u);class f{constructor({svg:e,type:t,window:n}){this._svg=e,this._type=t,this._window=n}draw(e,t,n,r){let i;i=this._type===u.square?this._drawSquare:this._drawDot,i.call(this,{x:e,y:t,size:n,rotation:r})}_rotateFigure({x:e,y:t,size:n,rotation:r=0,draw:i}){var a;let o=e+n/2,s=t+n/2;i(),(a=this._element)==null||a.setAttribute(`transform`,`rotate(${180*r/Math.PI},${o},${s})`)}_basicDot(e){let{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`circle`),this._element.setAttribute(`cx`,String(n+t/2)),this._element.setAttribute(`cy`,String(r+t/2)),this._element.setAttribute(`r`,String(t/2))}}))}_basicSquare(e){let{size:t,x:n,y:r}=e;this._rotateFigure(Object.assign(Object.assign({},e),{draw:()=>{this._element=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`rect`),this._element.setAttribute(`x`,String(n)),this._element.setAttribute(`y`,String(r)),this._element.setAttribute(`width`,String(t)),this._element.setAttribute(`height`,String(t))}}))}_drawDot({x:e,y:t,size:n,rotation:r}){this._basicDot({x:e,y:t,size:n,rotation:r})}_drawSquare({x:e,y:t,size:n,rotation:r}){this._basicSquare({x:e,y:t,size:n,rotation:r})}}let p=`circle`,m=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],h=[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,1,1,1,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]];class g{constructor(e,t){this._roundSize=e=>this._options.dotsOptions.roundSize?Math.floor(e):e,this._window=t,this._element=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`svg`),this._element.setAttribute(`width`,String(e.width)),this._element.setAttribute(`height`,String(e.height)),this._element.setAttribute(`xmlns:xlink`,`http://www.w3.org/1999/xlink`),e.dotsOptions.roundSize||this._element.setAttribute(`shape-rendering`,`crispEdges`),this._element.setAttribute(`viewBox`,`0 0 ${e.width} ${e.height}`),this._defs=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`defs`),this._element.appendChild(this._defs),this._imageUri=e.image,this._instanceId=g.instanceCount++,this._options=e}get width(){return this._options.width}get height(){return this._options.height}getElement(){return this._element}async drawQR(e){let t=e.getModuleCount(),n=Math.min(this._options.width,this._options.height)-2*this._options.margin,r=this._options.shape===p?n/Math.sqrt(2):n,i=this._roundSize(r/t),o={hideXDots:0,hideYDots:0,width:0,height:0};if(this._qr=e,this._options.image){if(await this.loadImage(),!this._image)return;let{imageOptions:e,qrOptions:n}=this._options,r=e.imageSize*a[n.errorCorrectionLevel],s=Math.floor(r*t*t);o=function({originalHeight:e,originalWidth:t,maxHiddenDots:n,maxHiddenAxisDots:r,dotSize:i}){let a={x:0,y:0},o={x:0,y:0};if(e<=0||t<=0||n<=0||i<=0)return{height:0,width:0,hideYDots:0,hideXDots:0};let s=e/t;return a.x=Math.floor(Math.sqrt(n/s)),a.x<=0&&(a.x=1),r&&r<a.x&&(a.x=r),a.x%2==0&&a.x--,o.x=a.x*i,a.y=1+2*Math.ceil((a.x*s-1)/2),o.y=Math.round(o.x*s),(a.y*a.x>n||r&&r<a.y)&&(r&&r<a.y?(a.y=r,a.y%2==0&&a.x--):a.y-=2,o.y=a.y*i,a.x=1+2*Math.ceil((a.y/s-1)/2),o.x=Math.round(o.y/s)),{height:o.y,width:o.x,hideYDots:a.y,hideXDots:a.x}}({originalWidth:this._image.width,originalHeight:this._image.height,maxHiddenDots:s,maxHiddenAxisDots:t-14,dotSize:i})}this.drawBackground(),this.drawDots(((e,n)=>!(this._options.imageOptions.hideBackgroundDots&&e>=(t-o.hideYDots)/2&&e<(t+o.hideYDots)/2&&n>=(t-o.hideXDots)/2&&n<(t+o.hideXDots)/2||m[e]?.[n]||m[e-t+7]?.[n]||m[e]?.[n-t+7]||h[e]?.[n]||h[e-t+7]?.[n]||h[e]?.[n-t+7]))),this.drawCorners(),this._options.image&&await this.drawImage({width:o.width,height:o.height,count:t,dotSize:i})}drawBackground(){var e;let t=this._element,n=this._options;if(t){let t=n.backgroundOptions?.gradient,r=n.backgroundOptions?.color,i=n.height,a=n.width;if(t||r){let o=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`rect`);this._backgroundClipPath=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`clipPath`),this._backgroundClipPath.setAttribute(`id`,`clip-path-background-color-${this._instanceId}`),this._defs.appendChild(this._backgroundClipPath),(e=n.backgroundOptions)!=null&&e.round&&(i=a=Math.min(n.width,n.height),o.setAttribute(`rx`,String(i/2*n.backgroundOptions.round))),o.setAttribute(`x`,String(this._roundSize((n.width-a)/2))),o.setAttribute(`y`,String(this._roundSize((n.height-i)/2))),o.setAttribute(`width`,String(a)),o.setAttribute(`height`,String(i)),this._backgroundClipPath.appendChild(o),this._createColor({options:t,color:r,additionalRotation:0,x:0,y:0,height:n.height,width:n.width,name:`background-color-${this._instanceId}`})}}}drawDots(e){var t;if(!this._qr)throw`QR code is not defined`;let n=this._options,r=this._qr.getModuleCount();if(r>n.width||r>n.height)throw`The canvas is too small.`;let i=Math.min(n.width,n.height)-2*n.margin,a=n.shape===p?i/Math.sqrt(2):i,s=this._roundSize(a/r),c=this._roundSize((n.width-r*s)/2),l=this._roundSize((n.height-r*s)/2),u=new o({svg:this._element,type:n.dotsOptions.type,window:this._window});this._dotsClipPath=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`clipPath`),this._dotsClipPath.setAttribute(`id`,`clip-path-dot-color-${this._instanceId}`),this._defs.appendChild(this._dotsClipPath),this._createColor({options:n.dotsOptions?.gradient,color:n.dotsOptions.color,additionalRotation:0,x:0,y:0,height:n.height,width:n.width,name:`dot-color-${this._instanceId}`});for(let n=0;n<r;n++)for(let i=0;i<r;i++)e&&!e(n,i)||(t=this._qr)!=null&&t.isDark(n,i)&&(u.draw(c+i*s,l+n*s,s,((t,a)=>!(i+t<0||n+a<0||i+t>=r||n+a>=r)&&!(e&&!e(n+a,i+t))&&!!this._qr&&this._qr.isDark(n+a,i+t))),u._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(u._element));if(n.shape===p){let e=this._roundSize((i/s-r)/2),t=r+2*e,n=c-e*s,a=l-e*s,o=[],d=this._roundSize(t/2);for(let n=0;n<t;n++){o[n]=[];for(let i=0;i<t;i++)n>=e-1&&n<=t-e&&i>=e-1&&i<=t-e||Math.sqrt((n-d)*(n-d)+(i-d)*(i-d))>d?o[n][i]=0:o[n][i]=this._qr.isDark(i-2*e<0?i:i>=r?i-2*e:i-e,n-2*e<0?n:n>=r?n-2*e:n-e)?1:0}for(let e=0;e<t;e++)for(let r=0;r<t;r++)o[e][r]&&(u.draw(n+r*s,a+e*s,s,((t,n)=>!!o[e+n]?.[r+t])),u._element&&this._dotsClipPath&&this._dotsClipPath.appendChild(u._element))}}drawCorners(){if(!this._qr)throw`QR code is not defined`;let e=this._element,t=this._options;if(!e)throw`Element code is not defined`;let n=this._qr.getModuleCount(),r=Math.min(t.width,t.height)-2*t.margin,i=t.shape===p?r/Math.sqrt(2):r,a=this._roundSize(i/n),s=7*a,u=3*a,g=this._roundSize((t.width-n*a)/2),_=this._roundSize((t.height-n*a)/2);[[0,0,0],[1,0,Math.PI/2],[0,1,-Math.PI/2]].forEach((([e,r,i])=>{var p,v,y,b,x,S;let C=g+e*a*(n-7),w=_+r*a*(n-7),T=this._dotsClipPath,E=this._dotsClipPath;if(((p=t.cornersSquareOptions)!=null&&p.gradient||(v=t.cornersSquareOptions)!=null&&v.color)&&(T=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`clipPath`),T.setAttribute(`id`,`clip-path-corners-square-color-${e}-${r}-${this._instanceId}`),this._defs.appendChild(T),this._cornersSquareClipPath=this._cornersDotClipPath=E=T,this._createColor({options:t.cornersSquareOptions?.gradient,color:t.cornersSquareOptions?.color,additionalRotation:i,x:C,y:w,height:s,width:s,name:`corners-square-color-${e}-${r}-${this._instanceId}`})),t.cornersSquareOptions?.type&&c.includes(t.cornersSquareOptions.type)){let e=new l({svg:this._element,type:t.cornersSquareOptions.type,window:this._window});e.draw(C,w,s,i),e._element&&T&&T.appendChild(e._element)}else{let e=new o({svg:this._element,type:t.cornersSquareOptions?.type||t.dotsOptions.type,window:this._window});for(let t=0;t<m.length;t++)for(let n=0;n<m[t].length;n++)(y=m[t])!=null&&y[n]&&(e.draw(C+n*a,w+t*a,a,((e,r)=>!!m[t+r]?.[n+e])),e._element&&T&&T.appendChild(e._element))}if(((b=t.cornersDotOptions)!=null&&b.gradient||(x=t.cornersDotOptions)!=null&&x.color)&&(E=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`clipPath`),E.setAttribute(`id`,`clip-path-corners-dot-color-${e}-${r}-${this._instanceId}`),this._defs.appendChild(E),this._cornersDotClipPath=E,this._createColor({options:t.cornersDotOptions?.gradient,color:t.cornersDotOptions?.color,additionalRotation:i,x:C+2*a,y:w+2*a,height:u,width:u,name:`corners-dot-color-${e}-${r}-${this._instanceId}`})),t.cornersDotOptions?.type&&d.includes(t.cornersDotOptions.type)){let e=new f({svg:this._element,type:t.cornersDotOptions.type,window:this._window});e.draw(C+2*a,w+2*a,u,i),e._element&&E&&E.appendChild(e._element)}else{let e=new o({svg:this._element,type:t.cornersDotOptions?.type||t.dotsOptions.type,window:this._window});for(let t=0;t<h.length;t++)for(let n=0;n<h[t].length;n++)(S=h[t])!=null&&S[n]&&(e.draw(C+n*a,w+t*a,a,((e,r)=>!!h[t+r]?.[n+e])),e._element&&E&&E.appendChild(e._element))}}))}loadImage(){return new Promise(((e,t)=>{let n=this._options;if(!n.image)return t(`Image is not defined`);if(n.nodeCanvas?.loadImage)n.nodeCanvas.loadImage(n.image).then((t=>{var r;if(this._image=t,this._options.imageOptions.saveAsBlob){let e=n.nodeCanvas?.createCanvas(this._image.width,this._image.height);(r=e?.getContext(`2d`))==null||r.drawImage(t,0,0),this._imageUri=e?.toDataURL()}e()})).catch(t);else{let t=new this._window.Image;typeof n.imageOptions.crossOrigin==`string`&&(t.crossOrigin=n.imageOptions.crossOrigin),this._image=t,t.onload=async()=>{this._options.imageOptions.saveAsBlob&&(this._imageUri=await async function(e,t){return new Promise((n=>{let r=new t.XMLHttpRequest;r.onload=function(){let e=new t.FileReader;e.onloadend=function(){n(e.result)},e.readAsDataURL(r.response)},r.open(`GET`,e),r.responseType=`blob`,r.send()}))}(n.image||``,this._window)),e()},t.src=n.image}}))}async drawImage({width:e,height:t,count:n,dotSize:r}){let i=this._options,a=this._roundSize((i.width-n*r)/2),o=this._roundSize((i.height-n*r)/2),s=a+this._roundSize(i.imageOptions.margin+(n*r-e)/2),c=o+this._roundSize(i.imageOptions.margin+(n*r-t)/2),l=e-2*i.imageOptions.margin,u=t-2*i.imageOptions.margin,d=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`image`);d.setAttribute(`href`,this._imageUri||``),d.setAttribute(`xlink:href`,this._imageUri||``),d.setAttribute(`x`,String(s)),d.setAttribute(`y`,String(c)),d.setAttribute(`width`,`${l}px`),d.setAttribute(`height`,`${u}px`),this._element.appendChild(d)}_createColor({options:e,color:t,additionalRotation:n,x:r,y:i,height:a,width:o,name:s}){let c=o>a?o:a,l=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`rect`);if(l.setAttribute(`x`,String(r)),l.setAttribute(`y`,String(i)),l.setAttribute(`height`,String(a)),l.setAttribute(`width`,String(o)),l.setAttribute(`clip-path`,`url('#clip-path-${s}')`),e){let t;if(e.type===`radial`)t=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`radialGradient`),t.setAttribute(`id`,s),t.setAttribute(`gradientUnits`,`userSpaceOnUse`),t.setAttribute(`fx`,String(r+o/2)),t.setAttribute(`fy`,String(i+a/2)),t.setAttribute(`cx`,String(r+o/2)),t.setAttribute(`cy`,String(i+a/2)),t.setAttribute(`r`,String(c/2));else{let c=((e.rotation||0)+n)%(2*Math.PI),l=(c+2*Math.PI)%(2*Math.PI),u=r+o/2,d=i+a/2,f=r+o/2,p=i+a/2;l>=0&&l<=.25*Math.PI||l>1.75*Math.PI&&l<=2*Math.PI?(u-=o/2,d-=a/2*Math.tan(c),f+=o/2,p+=a/2*Math.tan(c)):l>.25*Math.PI&&l<=.75*Math.PI?(d-=a/2,u-=o/2/Math.tan(c),p+=a/2,f+=o/2/Math.tan(c)):l>.75*Math.PI&&l<=1.25*Math.PI?(u+=o/2,d+=a/2*Math.tan(c),f-=o/2,p-=a/2*Math.tan(c)):l>1.25*Math.PI&&l<=1.75*Math.PI&&(d+=a/2,u+=o/2/Math.tan(c),p-=a/2,f-=o/2/Math.tan(c)),t=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`linearGradient`),t.setAttribute(`id`,s),t.setAttribute(`gradientUnits`,`userSpaceOnUse`),t.setAttribute(`x1`,String(Math.round(u))),t.setAttribute(`y1`,String(Math.round(d))),t.setAttribute(`x2`,String(Math.round(f))),t.setAttribute(`y2`,String(Math.round(p)))}e.colorStops.forEach((({offset:e,color:n})=>{let r=this._window.document.createElementNS(`http://www.w3.org/2000/svg`,`stop`);r.setAttribute(`offset`,100*e+`%`),r.setAttribute(`stop-color`,n),t.appendChild(r)})),l.setAttribute(`fill`,`url('#${s}')`),this._defs.appendChild(t)}else t&&l.setAttribute(`fill`,t);this._element.appendChild(l)}}g.instanceCount=0;let _=g,v=`canvas`,y={};for(let e=0;e<=40;e++)y[e]=e;let b={type:v,shape:`square`,width:300,height:300,data:``,margin:0,qrOptions:{typeNumber:y[0],mode:void 0,errorCorrectionLevel:`Q`},imageOptions:{saveAsBlob:!0,hideBackgroundDots:!0,imageSize:.4,crossOrigin:void 0,margin:0},dotsOptions:{type:`square`,color:`#000`,roundSize:!0},backgroundOptions:{round:0,color:`#fff`}};function x(e){let t=Object.assign({},e);if(!t.colorStops||!t.colorStops.length)throw`Field 'colorStops' is required in gradient`;return t.rotation?t.rotation=Number(t.rotation):t.rotation=0,t.colorStops=t.colorStops.map((e=>Object.assign(Object.assign({},e),{offset:Number(e.offset)}))),t}function S(e){let t=Object.assign({},e);return t.width=Number(t.width),t.height=Number(t.height),t.margin=Number(t.margin),t.imageOptions=Object.assign(Object.assign({},t.imageOptions),{hideBackgroundDots:!!t.imageOptions.hideBackgroundDots,imageSize:Number(t.imageOptions.imageSize),margin:Number(t.imageOptions.margin)}),t.margin>Math.min(t.width,t.height)&&(t.margin=Math.min(t.width,t.height)),t.dotsOptions=Object.assign({},t.dotsOptions),t.dotsOptions.gradient&&(t.dotsOptions.gradient=x(t.dotsOptions.gradient)),t.cornersSquareOptions&&(t.cornersSquareOptions=Object.assign({},t.cornersSquareOptions),t.cornersSquareOptions.gradient&&(t.cornersSquareOptions.gradient=x(t.cornersSquareOptions.gradient))),t.cornersDotOptions&&(t.cornersDotOptions=Object.assign({},t.cornersDotOptions),t.cornersDotOptions.gradient&&(t.cornersDotOptions.gradient=x(t.cornersDotOptions.gradient))),t.backgroundOptions&&(t.backgroundOptions=Object.assign({},t.backgroundOptions),t.backgroundOptions.gradient&&(t.backgroundOptions.gradient=x(t.backgroundOptions.gradient))),t}var C=n(873),w=n.n(C);function T(e){if(!e)throw Error(`Extension must be defined`);e[0]===`.`&&(e=e.substring(1));let t={bmp:`image/bmp`,gif:`image/gif`,ico:`image/vnd.microsoft.icon`,jpeg:`image/jpeg`,jpg:`image/jpeg`,png:`image/png`,svg:`image/svg+xml`,tif:`image/tiff`,tiff:`image/tiff`,webp:`image/webp`,pdf:`application/pdf`}[e.toLowerCase()];if(!t)throw Error(`Extension "${e}" is not supported`);return t}class E{constructor(e){e?.jsdom?this._window=new e.jsdom(``,{resources:`usable`}).window:this._window=window,this._options=e?S(t(b,e)):b,this.update()}static _clearContainer(e){e&&(e.innerHTML=``)}_setupSvg(){if(!this._qr)return;let e=new _(this._options,this._window);this._svg=e.getElement(),this._svgDrawingPromise=e.drawQR(this._qr).then((()=>{var t;this._svg&&((t=this._extension)==null||t.call(this,e.getElement(),this._options))}))}_setupCanvas(){this._qr&&(this._options.nodeCanvas?.createCanvas?(this._nodeCanvas=this._options.nodeCanvas.createCanvas(this._options.width,this._options.height),this._nodeCanvas.width=this._options.width,this._nodeCanvas.height=this._options.height):(this._domCanvas=document.createElement(`canvas`),this._domCanvas.width=this._options.width,this._domCanvas.height=this._options.height),this._setupSvg(),this._canvasDrawingPromise=this._svgDrawingPromise?.then((()=>{if(!this._svg)return;let e=this._svg,t=new this._window.XMLSerializer().serializeToString(e),n=btoa(t),r=`data:${T(`svg`)};base64,${n}`;if(this._options.nodeCanvas?.loadImage)return this._options.nodeCanvas.loadImage(r).then((e=>{var t;e.width=this._options.width,e.height=this._options.height,(t=this._nodeCanvas?.getContext(`2d`))==null||t.drawImage(e,0,0)}));{let e=new this._window.Image;return new Promise((t=>{e.onload=()=>{var n;(n=this._domCanvas?.getContext(`2d`))==null||n.drawImage(e,0,0),t()},e.src=r}))}})))}async _getElement(e=`png`){if(!this._qr)throw`QR code is empty`;return e.toLowerCase()===`svg`?(this._svg&&this._svgDrawingPromise||this._setupSvg(),await this._svgDrawingPromise,this._svg):((this._domCanvas||this._nodeCanvas)&&this._canvasDrawingPromise||this._setupCanvas(),await this._canvasDrawingPromise,this._domCanvas||this._nodeCanvas)}update(e){E._clearContainer(this._container),this._options=e?S(t(this._options,e)):this._options,this._options.data&&(this._qr=w()(this._options.qrOptions.typeNumber,this._options.qrOptions.errorCorrectionLevel),this._qr.addData(this._options.data,this._options.qrOptions.mode||function(e){switch(!0){case/^[0-9]*$/.test(e):return`Numeric`;case/^[0-9A-Z $%*+\-./:]*$/.test(e):return`Alphanumeric`;default:return`Byte`}}(this._options.data)),this._qr.make(),this._options.type===v?this._setupCanvas():this._setupSvg(),this.append(this._container))}append(e){if(e){if(typeof e.appendChild!=`function`)throw`Container should be a single DOM node`;this._options.type===v?this._domCanvas&&e.appendChild(this._domCanvas):this._svg&&e.appendChild(this._svg),this._container=e}}applyExtension(e){if(!e)throw`Extension function should be defined.`;this._extension=e,this.update()}deleteExtension(){this._extension=void 0,this.update()}async getRawData(e=`png`){if(!this._qr)throw`QR code is empty`;let t=await this._getElement(e),n=T(e);if(!t)return null;if(e.toLowerCase()===`svg`){let e=`<?xml version="1.0" standalone="no"?>\r\n${new this._window.XMLSerializer().serializeToString(t)}`;return typeof Blob>`u`||this._options.jsdom?Buffer.from(e):new Blob([e],{type:n})}return new Promise((e=>{let r=t;if(`toBuffer`in r)if(n===`image/png`)e(r.toBuffer(n));else if(n===`image/jpeg`)e(r.toBuffer(n));else{if(n!==`application/pdf`)throw Error(`Unsupported extension`);e(r.toBuffer(n))}else `toBlob`in r&&r.toBlob(e,n,1)}))}async download(e){if(!this._qr)throw`QR code is empty`;if(typeof Blob>`u`)throw`Cannot download in Node.js, call getRawData instead.`;let t=`png`,n=`qr`;typeof e==`string`?(t=e,console.warn(`Extension is deprecated as argument for 'download' method, please pass object { name: '...', extension: '...' } as argument`)):typeof e==`object`&&e&&(e.name&&(n=e.name),e.extension&&(t=e.extension));let r=await this._getElement(t);if(r)if(t.toLowerCase()===`svg`){let e=new XMLSerializer().serializeToString(r);e=`<?xml version="1.0" standalone="no"?>\r
`+e,i(`data:${T(t)};charset=utf-8,${encodeURIComponent(e)}`,`${n}.svg`)}else i(r.toDataURL(T(t)),`${n}.${t}`)}}let D=E})(),r.default})()))})),y={viewBox:`0 0 1024 1024`,width:`1.2em`,height:`1.2em`};function b(e,t){return a(),m(`svg`,y,[...t[0]||=[d(`path`,{fill:`currentColor`,d:`M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248m452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248M828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0`},null,-1)]])}var x=i({name:`ep-loading`,render:b}),S=h(v(),1),C=_({name:`QrCode`,props:{data:{type:String,required:!0},size:{type:Number,default:300},image:{type:String,default:``},imageSize:{type:Number,default:.2},dotsType:{type:String,default:`square`},cornersSquareType:{type:String,default:void 0},cornersDotType:{type:String,default:``},background:{type:String,default:`#ffffff`},dotsColor:{type:String,default:`#000000`},showDownload:{type:Boolean,default:!1},expired:{type:Boolean,default:!1},onRefresh:{type:Function,default:null},loading:{type:Boolean,default:!1},loadingText:{type:String,default:`加载中...`},transition:{type:Boolean,default:!1}},setup(i,{slots:a}){let c=g(),d=null,m=g(!1);s(()=>{d=new S.default({width:i.size,height:i.size,data:i.data,image:i.image||void 0,imageOptions:{imageSize:i.imageSize},dotsOptions:{color:i.dotsColor,type:i.dotsType},cornersSquareOptions:{type:i.cornersSquareType},cornersDotOptions:{type:i.cornersDotType},backgroundOptions:{color:i.background},qrOptions:{typeNumber:0,errorCorrectionLevel:`Q`}}),c.value&&(d.append(c.value),i.transition?requestAnimationFrame(()=>{m.value=!0}):m.value=!0)}),o(()=>[i.data,i.size,i.image,i.dotsColor,i.dotsType,i.cornersSquareType,i.cornersDotType,i.background],()=>{d&&(m.value=!1,d.update({width:i.size,height:i.size,data:i.data,image:i.image||void 0,imageOptions:{imageSize:i.imageSize},dotsOptions:{color:i.dotsColor,type:i.dotsType},cornersSquareOptions:{type:i.cornersSquareType},cornersDotOptions:{type:i.cornersDotType},backgroundOptions:{color:i.background}}),i.transition?requestAnimationFrame(()=>{m.value=!0}):m.value=!0)},{deep:!0}),p(()=>{d=null});let h=g(`svg`),_=e=>h.value=e,v=(e=`qrcode`)=>d?.download({name:e,extension:h.value});return()=>u(`div`,{class:`qr-wrapper`,style:`width:${i.size}px;`},[u(`div`,{class:[`qr-container`,i.transition?`qr-fade`:``,m.value?`qr-fade-in`:`qr-fade-out`],style:`width:${i.size}px;height:${i.size}px;`},[u(`div`,{ref:c},null),i.loading&&u(`div`,{class:`qr-mask qr-loading-mask`},[a.loading?a.loading():u(`div`,{class:`qr-loading-content`},[u(l,{class:`qr-loading-icon`,size:22},{default:()=>[u(x,null,null)]}),u(`div`,{class:`qr-loading-text`},[i.loadingText])])]),i.expired&&!i.loading&&u(`div`,{class:`qr-mask`},[a.expired?a.expired():u(`div`,{class:`qr-mask-content`},[u(`div`,{class:`qr-mask-text`},[f(`二维码已失效`)]),i.onRefresh&&u(e,{type:`primary`,size:`small`,link:!0,onClick:i.onRefresh},{default:()=>[f(`重新获取`)]})])])]),i.showDownload&&u(r,{"split-button":!0,onClick:()=>v(),"show-arrow":!1,onCommand:_},{default:()=>u(`span`,null,[f(`下载 `),h.value]),dropdown:()=>u(n,null,{default:()=>[u(t,{command:`svg`},{default:()=>[f(`svg`)]}),u(t,{command:`png`},{default:()=>[f(`png`)]}),u(t,{command:`jpeg`},{default:()=>[f(`jpeg`)]}),u(t,{command:`webp`},{default:()=>[f(`webp`)]})]})})])}});export{C as t};